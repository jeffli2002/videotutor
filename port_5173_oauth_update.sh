#!/bin/bash

echo "üîÑ Port 5173 Configuration Update Guide"
echo "======================================="
echo ""
echo "‚úÖ VITE SERVER NOW ON PORT 5173"
echo "   Application URL: http://localhost:5173"
echo ""
echo "üîß REQUIRED OAUTH UPDATES:"
echo ""
echo "1Ô∏è‚É£ GOOGLE CLOUD CONSOLE:"
echo "   ‚Ä¢ Go to: https://console.cloud.google.com/"
echo "   ‚Ä¢ Select your project ‚Üí APIs & Services ‚Üí Credentials"
echo "   ‚Ä¢ Edit OAuth 2.0 Client ID"
echo "   ‚Ä¢ Update Authorized JavaScript origins:"
echo "     - REMOVE: http://localhost:5174"
echo "     - ENSURE: http://localhost:5173 is present"
echo "   ‚Ä¢ Update Authorized redirect URIs:"
echo "     - REMOVE: http://localhost:5174/auth/callback"
echo "     - ENSURE: http://localhost:5173/auth/callback is present"
echo ""
echo "2Ô∏è‚É£ SUPABASE CONFIGURATION:"
echo "   ‚Ä¢ Go to: https://app.supabase.com/"
echo "   ‚Ä¢ Your project ‚Üí Authentication ‚Üí URL Configuration"
echo "   ‚Ä¢ Update Site URL:"
echo "     - CHANGE TO: http://localhost:5173"
echo "   ‚Ä¢ Update Redirect URLs:"
echo "     - REMOVE: http://localhost:5174 entries"
echo "     - ENSURE these are present:"
echo "       ‚Ä¢ http://localhost:5173"
echo "       ‚Ä¢ http://localhost:5173/"
echo "       ‚Ä¢ http://localhost:5173/auth/callback"
echo ""
echo "üìã STEP-BY-STEP CHECKLIST:"
echo ""
echo "‚òê 1. Update Google Cloud Console JavaScript origins"
echo "‚òê 2. Update Google Cloud Console redirect URIs"
echo "‚òê 3. Update Supabase Site URL to port 5173"
echo "‚òê 4. Update Supabase Redirect URLs to port 5173"
echo "‚òê 5. Clear browser cache and cookies"
echo "‚òê 6. Test Google OAuth on http://localhost:5173"
echo ""
echo "üåê NEW APPLICATION URL:"
echo "   http://localhost:5173"
echo ""
echo "üß™ TESTING AFTER UPDATES:"
echo "1. Visit: http://localhost:5173"
echo "2. Open Console (F12)"
echo "3. Run: window.testAuth.checkSession()"
echo "4. Click 'Continue with Google'"
echo "5. Complete OAuth authorization"
echo "6. Run: window.testAuth.checkSession() again"
echo ""
echo "‚ö†Ô∏è  IMPORTANT:"
echo "‚Ä¢ OAuth changes may take 5-10 minutes to propagate"
echo "‚Ä¢ Clear browser data after making changes"
echo "‚Ä¢ Test in incognito mode to avoid cache issues"
echo ""
echo "üéØ EXPECTED RESULT:"
echo "After OAuth: {hasUser: true, userEmail: 'your@email.com'}"
echo ""
echo "üöÄ Ready to update OAuth configuration for port 5173!"