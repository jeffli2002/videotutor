#!/bin/bash

echo "üîß WSL2 Localhost Connection Fix"
echo "================================"
echo ""
echo "üîç DIAGNOSIS:"
echo "Vite server is running but localhost:5173 shows 'connection refused'"
echo "This is a common WSL2 networking issue"
echo ""
echo "‚úÖ SOLUTIONS TO TRY:"
echo ""
echo "1Ô∏è‚É£ USE WSL IP ADDRESS:"
echo "   ‚Ä¢ Try: http://172.26.198.29:5173/"
echo "   ‚Ä¢ Try: http://10.255.255.254:5173/"
echo ""
echo "2Ô∏è‚É£ WINDOWS FIREWALL FIX:"
echo "   ‚Ä¢ Open Windows Defender Firewall"
echo "   ‚Ä¢ Allow an app through firewall"
echo "   ‚Ä¢ Add 'Node.js' if not present"
echo "   ‚Ä¢ Enable for both Private and Public networks"
echo ""
echo "3Ô∏è‚É£ WSL2 PORT FORWARDING:"
echo "   Open PowerShell as Administrator and run:"
echo "   netsh interface portproxy add v4tov4 listenport=5173 listenaddress=0.0.0.0 connectport=5173 connectaddress=172.26.198.29"
echo ""
echo "4Ô∏è‚É£ ALTERNATIVE - ACCESS VIA FILE EXPLORER:"
echo "   ‚Ä¢ Open Windows File Explorer"
echo "   ‚Ä¢ Type in address bar: \\\\wsl$\\Ubuntu\\mnt\\d\\AI\\VideoTutor"
echo "   ‚Ä¢ Double-click index.html (if it exists)"
echo ""
echo "5Ô∏è‚É£ BUILD AND SERVE STATIC VERSION:"
echo "   ‚Ä¢ Run: npm run build"
echo "   ‚Ä¢ Run: npm run preview"
echo "   ‚Ä¢ Try accessing the preview URL"
echo ""
echo "üéØ IMMEDIATE TEST:"
echo "Try these URLs in your browser:"
echo "‚Ä¢ http://172.26.198.29:5173/"
echo "‚Ä¢ http://10.255.255.254:5173/"
echo ""
echo "üîß IF STILL NOT WORKING:"
echo "1. Restart WSL: wsl --shutdown (in Windows CMD)"
echo "2. Restart Docker Desktop (if installed)"
echo "3. Try different port: npm run dev -- --port 3000"
echo ""
echo "üí° The WSL IP addresses should work immediately!"