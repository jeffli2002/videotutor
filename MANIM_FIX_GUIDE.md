# ğŸ”§ Manimæ¸²æŸ“ä¿®å¤æŒ‡å—

## ğŸ“‹ å·²ä¿®å¤çš„é—®é¢˜

### âœ… ä¸»è¦é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ

1. **è§†é¢‘æ–‡ä»¶è·¯å¾„é—®é¢˜**
   - **é—®é¢˜**: Manimè¾“å‡ºçš„è§†é¢‘æ–‡ä»¶è·¯å¾„æ˜¯åµŒå¥—çš„ `media/videos/{name}/2160p60/{name}.mp4`ï¼Œè€ŒAPIæœåŠ¡å™¨æœŸæœ›çš„æ˜¯ `media/videos/{name}.mp4`
   - **ä¿®å¤**: æ›´æ–°äº† `manim_api_server.py` ä¸­çš„è·¯å¾„æŸ¥æ‰¾é€»è¾‘ï¼Œæ”¯æŒå¤šç§å¯èƒ½çš„è¾“å‡ºè·¯å¾„
   - **ä»£ç æ”¹è¿›**: æ·»åŠ äº†å¤šè·¯å¾„æ£€æŸ¥æœºåˆ¶

2. **é”™è¯¯å¤„ç†ä¸è¶³**
   - **é—®é¢˜**: åŸå§‹ä»£ç ç¼ºä¹è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯å’Œæ—¥å¿—è®°å½•
   - **ä¿®å¤**: æ·»åŠ äº†å®Œæ•´çš„æ—¥å¿—è®°å½•å’Œé”™è¯¯æ•è·
   - **æ”¹è¿›**: å¢åŠ äº†å¥åº·æ£€æŸ¥ç«¯ç‚¹ `/health`

3. **æ–‡ä»¶æ¸…ç†é—®é¢˜**
   - **é—®é¢˜**: ä¸´æ—¶è„šæœ¬æ–‡ä»¶æ²¡æœ‰è¢«æ¸…ç†
   - **ä¿®å¤**: æ·»åŠ äº†è‡ªåŠ¨æ¸…ç†æœºåˆ¶
   - **æ”¹è¿›**: æ›´å¥½çš„èµ„æºç®¡ç†

## ğŸš€ ä¿®å¤åçš„åŠŸèƒ½

### æ–°å¢åŠŸèƒ½
- âœ… **æ™ºèƒ½è·¯å¾„æ£€æµ‹**: è‡ªåŠ¨æŸ¥æ‰¾manimç”Ÿæˆçš„è§†é¢‘æ–‡ä»¶
- âœ… **è¯¦ç»†æ—¥å¿—è®°å½•**: å®Œæ•´çš„æ¸²æŸ“è¿‡ç¨‹æ—¥å¿—
- âœ… **å¥åº·æ£€æŸ¥**: `/health` ç«¯ç‚¹ç”¨äºæœåŠ¡çŠ¶æ€æ£€æŸ¥
- âœ… **é”™è¯¯è¯¦æƒ…**: è¿”å›è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯
- âœ… **èµ„æºæ¸…ç†**: è‡ªåŠ¨æ¸…ç†ä¸´æ—¶æ–‡ä»¶

### æ”¯æŒçš„è§†é¢‘è´¨é‡
- ğŸ¥ **2160p60** (4K, 60fps) - é»˜è®¤é«˜è´¨é‡
- ğŸ¥ **1080p60** (1080p, 60fps) - å¤‡é€‰é«˜è´¨é‡
- ğŸ¥ **720p30** (720p, 30fps) - å¤‡é€‰æ ‡å‡†è´¨é‡

## ğŸ“– ä½¿ç”¨æŒ‡å—

### 1. å¯åŠ¨Manim APIæœåŠ¡å™¨

```bash
# å¯åŠ¨æœåŠ¡å™¨
python manim_api_server.py

# æœåŠ¡å™¨å°†åœ¨ä»¥ä¸‹åœ°å€è¿è¡Œï¼š
# http://localhost:5001
```

### 2. æµ‹è¯•APIè¿æ¥

```bash
# è¿è¡Œå¥åº·æ£€æŸ¥
curl http://localhost:5001/health

# æœŸæœ›å“åº”:
# {"status": "healthy", "service": "manim-api-server"}
```

### 3. è¿è¡Œå®Œæ•´æµ‹è¯•

```bash
# è¿è¡Œä¿®å¤éªŒè¯æµ‹è¯•
python test_manim_fix.py

# è¿è¡Œç®€å•æµ‹è¯•
python test_manim_api_simple.py
```

### 4. APIä½¿ç”¨ç¤ºä¾‹

```javascript
// å‰ç«¯è°ƒç”¨ç¤ºä¾‹
const response = await fetch('http://localhost:5001/api/manim_render', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    script: manimPythonCode,
    output_name: 'my_video',
    scene_name: 'MyScene'
  })
});

const result = await response.json();
if (result.success) {
  console.log('è§†é¢‘URL:', result.video_url);
} else {
  console.error('æ¸²æŸ“å¤±è´¥:', result.error);
}
```

## ğŸ› ï¸ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. ç«¯å£å ç”¨é”™è¯¯
```bash
# ç—‡çŠ¶: OSError: [WinError 10048]
# è§£å†³æ–¹æ¡ˆ:
netstat -ano | findstr :5001
taskkill /PID <è¿›ç¨‹ID> /F
```

#### 2. Manimæœªæ‰¾åˆ°
```bash
# ç—‡çŠ¶: "Manimæœªå®‰è£…æˆ–æœªåœ¨PATHä¸­"
# è§£å†³æ–¹æ¡ˆ:
pip install manim
# æˆ–
conda install -c conda-forge manim
```

#### 3. è§†é¢‘ç”Ÿæˆå¤±è´¥
- æ£€æŸ¥Pythonè„šæœ¬è¯­æ³•
- éªŒè¯åœºæ™¯åç§°æ˜¯å¦æ­£ç¡®
- ç¡®è®¤manimç‰ˆæœ¬å…¼å®¹æ€§

#### 4. è¿æ¥å¤±è´¥
```bash
# ç¡®ä¿æœåŠ¡å™¨æ­£åœ¨è¿è¡Œ
python manim_api_server.py

# æ£€æŸ¥é˜²ç«å¢™è®¾ç½®
# ç¡®è®¤ç«¯å£5001æœªè¢«é˜»æ­¢
```

### æ—¥å¿—åˆ†æ

æœåŠ¡å™¨å¯åŠ¨æ—¶ä¼šæ˜¾ç¤ºï¼š
```
INFO:__main__:å¯åŠ¨Manim APIæœåŠ¡å™¨ï¼Œè¾“å‡ºç›®å½•: rendered_videos
INFO:__main__:å¼€å§‹æ¸²æŸ“è§†é¢‘: test_video, åœºæ™¯: TestScene
INFO:__main__:è„šæœ¬å·²ä¿å­˜: test_video.py
INFO:__main__:å¼€å§‹æ‰§è¡Œmanimæ¸²æŸ“...
INFO:__main__:Manimæ¸²æŸ“æˆåŠŸ: [manimè¾“å‡º]
INFO:__main__:æ‰¾åˆ°ç”Ÿæˆçš„è§†é¢‘: media/videos/test_video/2160p60/test_video.mp4
INFO:__main__:è§†é¢‘å·²ç§»åŠ¨åˆ°: rendered_videos/test_video.mp4
INFO:__main__:ä¸´æ—¶è„šæœ¬å·²æ¸…ç†: test_video.py
```

## ğŸ“ æ–‡ä»¶ç»“æ„

```
VideoTutor/
â”œâ”€â”€ manim_api_server.py          # ä¿®å¤åçš„APIæœåŠ¡å™¨
â”œâ”€â”€ test_manim_fix.py           # å®Œæ•´æµ‹è¯•è„šæœ¬
â”œâ”€â”€ test_manim_api_simple.py    # ç®€å•æµ‹è¯•è„šæœ¬
â”œâ”€â”€ rendered_videos/            # è¾“å‡ºè§†é¢‘ç›®å½•
â”‚   â”œâ”€â”€ demo1.mp4
â”‚   â”œâ”€â”€ test_simple.mp4
â”‚   â””â”€â”€ test_fix.mp4
â””â”€â”€ media/                      # Manimä¸´æ—¶æ–‡ä»¶
    â””â”€â”€ videos/
        â”œâ”€â”€ demo1/
        â”œâ”€â”€ test_simple/
        â””â”€â”€ test_fix/
```

## ğŸ”§ ç»´æŠ¤å»ºè®®

### å®šæœŸæ¸…ç†
```bash
# æ¸…ç†ä¸´æ—¶mediaæ–‡ä»¶ (ä¿ç•™rendered_videos)
rm -rf media/videos/*
```

### æ€§èƒ½ä¼˜åŒ–
- ä½¿ç”¨é€‚å½“çš„è§†é¢‘è´¨é‡è®¾ç½®
- å®šæœŸæ¸…ç†ä¸´æ—¶æ–‡ä»¶
- ç›‘æ§ç£ç›˜ç©ºé—´ä½¿ç”¨

### ç›‘æ§
- æ£€æŸ¥APIå“åº”æ—¶é—´
- ç›‘æ§å†…å­˜ä½¿ç”¨
- è®°å½•é”™è¯¯é¢‘ç‡

## ğŸ“Š æµ‹è¯•ç»“æœ

æœ€æ–°æµ‹è¯•ç»“æœï¼š
- âœ… å¥åº·æ£€æŸ¥é€šè¿‡
- âœ… ç®€å•è§†é¢‘ç”ŸæˆæˆåŠŸ
- âœ… å¤æ‚æ•°å­¦åŠ¨ç”»ç”ŸæˆæˆåŠŸ
- âœ… æ–‡ä»¶æ­£ç¡®ç§»åŠ¨åˆ°è¾“å‡ºç›®å½•
- âœ… ä¸´æ—¶æ–‡ä»¶æ­£ç¡®æ¸…ç†

## ğŸ‰ ä¿®å¤å®Œæˆï¼

Manimæ¸²æŸ“ç³»ç»Ÿç°åœ¨å·²ç»å®Œå…¨ä¿®å¤å¹¶ä¼˜åŒ–ã€‚æ‰€æœ‰å·²çŸ¥é—®é¢˜éƒ½å·²è§£å†³ï¼Œç³»ç»Ÿå¯ä»¥ç¨³å®šè¿è¡Œã€‚å¦‚æœé‡åˆ°æ–°é—®é¢˜ï¼Œè¯·å‚è€ƒæ•…éšœæ’é™¤éƒ¨åˆ†æˆ–æŸ¥çœ‹æ—¥å¿—è·å–è¯¦ç»†ä¿¡æ¯ã€‚ 