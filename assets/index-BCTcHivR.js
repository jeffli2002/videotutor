function Ip(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var ct=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Op(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Rp(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}),r}var nd={exports:{}},Vi={},sd={exports:{}},q={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ss=Symbol.for("react.element"),$p=Symbol.for("react.portal"),Lp=Symbol.for("react.fragment"),zp=Symbol.for("react.strict_mode"),Mp=Symbol.for("react.profiler"),Up=Symbol.for("react.provider"),Dp=Symbol.for("react.context"),Fp=Symbol.for("react.forward_ref"),Vp=Symbol.for("react.suspense"),Bp=Symbol.for("react.memo"),Wp=Symbol.for("react.lazy"),gu=Symbol.iterator;function qp(t){return t===null||typeof t!="object"?null:(t=gu&&t[gu]||t["@@iterator"],typeof t=="function"?t:null)}var id={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},od=Object.assign,ld={};function xn(t,e,r){this.props=t,this.context=e,this.refs=ld,this.updater=r||id}xn.prototype.isReactComponent={};xn.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};xn.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function ad(){}ad.prototype=xn.prototype;function ta(t,e,r){this.props=t,this.context=e,this.refs=ld,this.updater=r||id}var ra=ta.prototype=new ad;ra.constructor=ta;od(ra,xn.prototype);ra.isPureReactComponent=!0;var vu=Array.isArray,ud=Object.prototype.hasOwnProperty,na={current:null},cd={key:!0,ref:!0,__self:!0,__source:!0};function dd(t,e,r){var n,s={},i=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)ud.call(e,n)&&!cd.hasOwnProperty(n)&&(s[n]=e[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];s.children=u}if(t&&t.defaultProps)for(n in l=t.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:Ss,type:t,key:i,ref:o,props:s,_owner:na.current}}function Gp(t,e){return{$$typeof:Ss,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function sa(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ss}function Hp(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var yu=/\/+/g;function po(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Hp(""+t.key):e.toString(36)}function ti(t,e,r,n,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ss:case $p:o=!0}}if(o)return o=t,s=s(o),t=n===""?"."+po(o,0):n,vu(s)?(r="",t!=null&&(r=t.replace(yu,"$&/")+"/"),ti(s,e,r,"",function(c){return c})):s!=null&&(sa(s)&&(s=Gp(s,r+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(yu,"$&/")+"/")+t)),e.push(s)),1;if(o=0,n=n===""?".":n+":",vu(t))for(var l=0;l<t.length;l++){i=t[l];var u=n+po(i,l);o+=ti(i,e,r,u,s)}else if(u=qp(t),typeof u=="function")for(t=u.call(t),l=0;!(i=t.next()).done;)i=i.value,u=n+po(i,l++),o+=ti(i,e,r,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Is(t,e,r){if(t==null)return t;var n=[],s=0;return ti(t,n,"","",function(i){return e.call(r,i,s++)}),n}function Kp(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ue={current:null},ri={transition:null},Qp={ReactCurrentDispatcher:Ue,ReactCurrentBatchConfig:ri,ReactCurrentOwner:na};function hd(){throw Error("act(...) is not supported in production builds of React.")}q.Children={map:Is,forEach:function(t,e,r){Is(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Is(t,function(){e++}),e},toArray:function(t){return Is(t,function(e){return e})||[]},only:function(t){if(!sa(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};q.Component=xn;q.Fragment=Lp;q.Profiler=Mp;q.PureComponent=ta;q.StrictMode=zp;q.Suspense=Vp;q.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Qp;q.act=hd;q.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=od({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=na.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)ud.call(e,u)&&!cd.hasOwnProperty(u)&&(n[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)n.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];n.children=l}return{$$typeof:Ss,type:t.type,key:s,ref:i,props:n,_owner:o}};q.createContext=function(t){return t={$$typeof:Dp,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Up,_context:t},t.Consumer=t};q.createElement=dd;q.createFactory=function(t){var e=dd.bind(null,t);return e.type=t,e};q.createRef=function(){return{current:null}};q.forwardRef=function(t){return{$$typeof:Fp,render:t}};q.isValidElement=sa;q.lazy=function(t){return{$$typeof:Wp,_payload:{_status:-1,_result:t},_init:Kp}};q.memo=function(t,e){return{$$typeof:Bp,type:t,compare:e===void 0?null:e}};q.startTransition=function(t){var e=ri.transition;ri.transition={};try{t()}finally{ri.transition=e}};q.unstable_act=hd;q.useCallback=function(t,e){return Ue.current.useCallback(t,e)};q.useContext=function(t){return Ue.current.useContext(t)};q.useDebugValue=function(){};q.useDeferredValue=function(t){return Ue.current.useDeferredValue(t)};q.useEffect=function(t,e){return Ue.current.useEffect(t,e)};q.useId=function(){return Ue.current.useId()};q.useImperativeHandle=function(t,e,r){return Ue.current.useImperativeHandle(t,e,r)};q.useInsertionEffect=function(t,e){return Ue.current.useInsertionEffect(t,e)};q.useLayoutEffect=function(t,e){return Ue.current.useLayoutEffect(t,e)};q.useMemo=function(t,e){return Ue.current.useMemo(t,e)};q.useReducer=function(t,e,r){return Ue.current.useReducer(t,e,r)};q.useRef=function(t){return Ue.current.useRef(t)};q.useState=function(t){return Ue.current.useState(t)};q.useSyncExternalStore=function(t,e,r){return Ue.current.useSyncExternalStore(t,e,r)};q.useTransition=function(){return Ue.current.useTransition()};q.version="18.3.1";sd.exports=q;var j=sd.exports;const Or=Op(j),Jp=Ip({__proto__:null,default:Or},[j]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yp=j,Xp=Symbol.for("react.element"),Zp=Symbol.for("react.fragment"),em=Object.prototype.hasOwnProperty,tm=Yp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,rm={key:!0,ref:!0,__self:!0,__source:!0};function fd(t,e,r){var n,s={},i=null,o=null;r!==void 0&&(i=""+r),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)em.call(e,n)&&!rm.hasOwnProperty(n)&&(s[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)s[n]===void 0&&(s[n]=e[n]);return{$$typeof:Xp,type:t,key:i,ref:o,props:s,_owner:tm.current}}Vi.Fragment=Zp;Vi.jsx=fd;Vi.jsxs=fd;nd.exports=Vi;var a=nd.exports,Ko={},pd={exports:{}},nt={},md={exports:{}},gd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(A,z){var S=A.length;A.push(z);e:for(;0<S;){var T=S-1>>>1,D=A[T];if(0<s(D,z))A[T]=z,A[S]=D,S=T;else break e}}function r(A){return A.length===0?null:A[0]}function n(A){if(A.length===0)return null;var z=A[0],S=A.pop();if(S!==z){A[0]=S;e:for(var T=0,D=A.length,ve=D>>>1;T<ve;){var Tt=2*(T+1)-1,bn=A[Tt],At=Tt+1,Mr=A[At];if(0>s(bn,S))At<D&&0>s(Mr,bn)?(A[T]=Mr,A[At]=S,T=At):(A[T]=bn,A[Tt]=S,T=Tt);else if(At<D&&0>s(Mr,S))A[T]=Mr,A[At]=S,T=At;else break e}}return z}function s(A,z){var S=A.sortIndex-z.sortIndex;return S!==0?S:A.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],c=[],d=1,h=null,f=3,v=!1,y=!1,x=!1,k=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(A){for(var z=r(c);z!==null;){if(z.callback===null)n(c);else if(z.startTime<=A)n(c),z.sortIndex=z.expirationTime,e(u,z);else break;z=r(c)}}function w(A){if(x=!1,g(A),!y)if(r(u)!==null)y=!0,it(b);else{var z=r(c);z!==null&&Le(w,z.startTime-A)}}function b(A,z){y=!1,x&&(x=!1,m(O),O=-1),v=!0;var S=f;try{for(g(z),h=r(u);h!==null&&(!(h.expirationTime>z)||A&&!te());){var T=h.callback;if(typeof T=="function"){h.callback=null,f=h.priorityLevel;var D=T(h.expirationTime<=z);z=t.unstable_now(),typeof D=="function"?h.callback=D:h===r(u)&&n(u),g(z)}else n(u);h=r(u)}if(h!==null)var ve=!0;else{var Tt=r(c);Tt!==null&&Le(w,Tt.startTime-z),ve=!1}return ve}finally{h=null,f=S,v=!1}}var E=!1,P=null,O=-1,J=5,M=-1;function te(){return!(t.unstable_now()-M<J)}function K(){if(P!==null){var A=t.unstable_now();M=A;var z=!0;try{z=P(!0,A)}finally{z?Te():(E=!1,P=null)}}else E=!1}var Te;if(typeof p=="function")Te=function(){p(K)};else if(typeof MessageChannel<"u"){var ft=new MessageChannel,Qe=ft.port2;ft.port1.onmessage=K,Te=function(){Qe.postMessage(null)}}else Te=function(){k(K,0)};function it(A){P=A,E||(E=!0,Te())}function Le(A,z){O=k(function(){A(t.unstable_now())},z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(A){A.callback=null},t.unstable_continueExecution=function(){y||v||(y=!0,it(b))},t.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):J=0<A?Math.floor(1e3/A):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(A){switch(f){case 1:case 2:case 3:var z=3;break;default:z=f}var S=f;f=z;try{return A()}finally{f=S}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(A,z){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var S=f;f=A;try{return z()}finally{f=S}},t.unstable_scheduleCallback=function(A,z,S){var T=t.unstable_now();switch(typeof S=="object"&&S!==null?(S=S.delay,S=typeof S=="number"&&0<S?T+S:T):S=T,A){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=S+D,A={id:d++,callback:z,priorityLevel:A,startTime:S,expirationTime:D,sortIndex:-1},S>T?(A.sortIndex=S,e(c,A),r(u)===null&&A===r(c)&&(x?(m(O),O=-1):x=!0,Le(w,S-T))):(A.sortIndex=D,e(u,A),y||v||(y=!0,it(b))),A},t.unstable_shouldYield=te,t.unstable_wrapCallback=function(A){var z=f;return function(){var S=f;f=z;try{return A.apply(this,arguments)}finally{f=S}}}})(gd);md.exports=gd;var nm=md.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sm=j,rt=nm;function N(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var vd=new Set,is={};function Rr(t,e){hn(t,e),hn(t+"Capture",e)}function hn(t,e){for(is[t]=e,t=0;t<e.length;t++)vd.add(e[t])}var Ut=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Qo=Object.prototype.hasOwnProperty,im=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,wu={},xu={};function om(t){return Qo.call(xu,t)?!0:Qo.call(wu,t)?!1:im.test(t)?xu[t]=!0:(wu[t]=!0,!1)}function lm(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function am(t,e,r,n){if(e===null||typeof e>"u"||lm(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function De(t,e,r,n,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Pe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Pe[t]=new De(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Pe[e]=new De(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Pe[t]=new De(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Pe[t]=new De(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Pe[t]=new De(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Pe[t]=new De(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Pe[t]=new De(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Pe[t]=new De(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Pe[t]=new De(t,5,!1,t.toLowerCase(),null,!1,!1)});var ia=/[\-:]([a-z])/g;function oa(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ia,oa);Pe[e]=new De(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ia,oa);Pe[e]=new De(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ia,oa);Pe[e]=new De(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Pe[t]=new De(t,1,!1,t.toLowerCase(),null,!1,!1)});Pe.xlinkHref=new De("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Pe[t]=new De(t,1,!1,t.toLowerCase(),null,!0,!0)});function la(t,e,r,n){var s=Pe.hasOwnProperty(e)?Pe[e]:null;(s!==null?s.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(am(e,r,s,n)&&(r=null),n||s===null?om(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):s.mustUseProperty?t[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,n=s.attributeNamespace,r===null?t.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Bt=sm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Os=Symbol.for("react.element"),Hr=Symbol.for("react.portal"),Kr=Symbol.for("react.fragment"),aa=Symbol.for("react.strict_mode"),Jo=Symbol.for("react.profiler"),yd=Symbol.for("react.provider"),wd=Symbol.for("react.context"),ua=Symbol.for("react.forward_ref"),Yo=Symbol.for("react.suspense"),Xo=Symbol.for("react.suspense_list"),ca=Symbol.for("react.memo"),Ht=Symbol.for("react.lazy"),xd=Symbol.for("react.offscreen"),_u=Symbol.iterator;function Cn(t){return t===null||typeof t!="object"?null:(t=_u&&t[_u]||t["@@iterator"],typeof t=="function"?t:null)}var fe=Object.assign,mo;function Un(t){if(mo===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);mo=e&&e[1]||""}return`
`+mo+t}var go=!1;function vo(t,e){if(!t||go)return"";go=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var n=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){n=c}t.call(e.prototype)}else{try{throw Error()}catch(c){n=c}t()}}catch(c){if(c&&n&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=n.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{go=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Un(t):""}function um(t){switch(t.tag){case 5:return Un(t.type);case 16:return Un("Lazy");case 13:return Un("Suspense");case 19:return Un("SuspenseList");case 0:case 2:case 15:return t=vo(t.type,!1),t;case 11:return t=vo(t.type.render,!1),t;case 1:return t=vo(t.type,!0),t;default:return""}}function Zo(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Kr:return"Fragment";case Hr:return"Portal";case Jo:return"Profiler";case aa:return"StrictMode";case Yo:return"Suspense";case Xo:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case wd:return(t.displayName||"Context")+".Consumer";case yd:return(t._context.displayName||"Context")+".Provider";case ua:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ca:return e=t.displayName||null,e!==null?e:Zo(t.type)||"Memo";case Ht:e=t._payload,t=t._init;try{return Zo(t(e))}catch{}}return null}function cm(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Zo(e);case 8:return e===aa?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function cr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function _d(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function dm(t){var e=_d(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Rs(t){t._valueTracker||(t._valueTracker=dm(t))}function kd(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=_d(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function fi(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function el(t,e){var r=e.checked;return fe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function ku(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=cr(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Sd(t,e){e=e.checked,e!=null&&la(t,"checked",e,!1)}function tl(t,e){Sd(t,e);var r=cr(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?rl(t,e.type,r):e.hasOwnProperty("defaultValue")&&rl(t,e.type,cr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Su(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function rl(t,e,r){(e!=="number"||fi(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Dn=Array.isArray;function on(t,e,r,n){if(t=t.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<t.length;r++)s=e.hasOwnProperty("$"+t[r].value),t[r].selected!==s&&(t[r].selected=s),s&&n&&(t[r].defaultSelected=!0)}else{for(r=""+cr(r),e=null,s=0;s<t.length;s++){if(t[s].value===r){t[s].selected=!0,n&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function nl(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(N(91));return fe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function ju(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(N(92));if(Dn(r)){if(1<r.length)throw Error(N(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:cr(r)}}function jd(t,e){var r=cr(e.value),n=cr(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function bu(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function bd(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function sl(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?bd(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var $s,Ed=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,s){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for($s=$s||document.createElement("div"),$s.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=$s.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function os(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var Wn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},hm=["Webkit","ms","Moz","O"];Object.keys(Wn).forEach(function(t){hm.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Wn[e]=Wn[t]})});function Cd(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||Wn.hasOwnProperty(t)&&Wn[t]?(""+e).trim():e+"px"}function Nd(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=Cd(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,s):t[r]=s}}var fm=fe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function il(t,e){if(e){if(fm[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(N(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(N(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(N(61))}if(e.style!=null&&typeof e.style!="object")throw Error(N(62))}}function ol(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ll=null;function da(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var al=null,ln=null,an=null;function Eu(t){if(t=Es(t)){if(typeof al!="function")throw Error(N(280));var e=t.stateNode;e&&(e=Hi(e),al(t.stateNode,t.type,e))}}function Pd(t){ln?an?an.push(t):an=[t]:ln=t}function Td(){if(ln){var t=ln,e=an;if(an=ln=null,Eu(t),e)for(t=0;t<e.length;t++)Eu(e[t])}}function Ad(t,e){return t(e)}function Id(){}var yo=!1;function Od(t,e,r){if(yo)return t(e,r);yo=!0;try{return Ad(t,e,r)}finally{yo=!1,(ln!==null||an!==null)&&(Id(),Td())}}function ls(t,e){var r=t.stateNode;if(r===null)return null;var n=Hi(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(N(231,e,typeof r));return r}var ul=!1;if(Ut)try{var Nn={};Object.defineProperty(Nn,"passive",{get:function(){ul=!0}}),window.addEventListener("test",Nn,Nn),window.removeEventListener("test",Nn,Nn)}catch{ul=!1}function pm(t,e,r,n,s,i,o,l,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(r,c)}catch(d){this.onError(d)}}var qn=!1,pi=null,mi=!1,cl=null,mm={onError:function(t){qn=!0,pi=t}};function gm(t,e,r,n,s,i,o,l,u){qn=!1,pi=null,pm.apply(mm,arguments)}function vm(t,e,r,n,s,i,o,l,u){if(gm.apply(this,arguments),qn){if(qn){var c=pi;qn=!1,pi=null}else throw Error(N(198));mi||(mi=!0,cl=c)}}function $r(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function Rd(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Cu(t){if($r(t)!==t)throw Error(N(188))}function ym(t){var e=t.alternate;if(!e){if(e=$r(t),e===null)throw Error(N(188));return e!==t?null:t}for(var r=t,n=e;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return Cu(s),t;if(i===n)return Cu(s),e;i=i.sibling}throw Error(N(188))}if(r.return!==n.return)r=s,n=i;else{for(var o=!1,l=s.child;l;){if(l===r){o=!0,r=s,n=i;break}if(l===n){o=!0,n=s,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,n=s;break}if(l===n){o=!0,n=i,r=s;break}l=l.sibling}if(!o)throw Error(N(189))}}if(r.alternate!==n)throw Error(N(190))}if(r.tag!==3)throw Error(N(188));return r.stateNode.current===r?t:e}function $d(t){return t=ym(t),t!==null?Ld(t):null}function Ld(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Ld(t);if(e!==null)return e;t=t.sibling}return null}var zd=rt.unstable_scheduleCallback,Nu=rt.unstable_cancelCallback,wm=rt.unstable_shouldYield,xm=rt.unstable_requestPaint,ge=rt.unstable_now,_m=rt.unstable_getCurrentPriorityLevel,ha=rt.unstable_ImmediatePriority,Md=rt.unstable_UserBlockingPriority,gi=rt.unstable_NormalPriority,km=rt.unstable_LowPriority,Ud=rt.unstable_IdlePriority,Bi=null,Nt=null;function Sm(t){if(Nt&&typeof Nt.onCommitFiberRoot=="function")try{Nt.onCommitFiberRoot(Bi,t,void 0,(t.current.flags&128)===128)}catch{}}var kt=Math.clz32?Math.clz32:Em,jm=Math.log,bm=Math.LN2;function Em(t){return t>>>=0,t===0?32:31-(jm(t)/bm|0)|0}var Ls=64,zs=4194304;function Fn(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function vi(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,s=t.suspendedLanes,i=t.pingedLanes,o=r&268435455;if(o!==0){var l=o&~s;l!==0?n=Fn(l):(i&=o,i!==0&&(n=Fn(i)))}else o=r&~s,o!==0?n=Fn(o):i!==0&&(n=Fn(i));if(n===0)return 0;if(e!==0&&e!==n&&!(e&s)&&(s=n&-n,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-kt(e),s=1<<r,n|=t[r],e&=~s;return n}function Cm(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Nm(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-kt(i),l=1<<o,u=s[o];u===-1?(!(l&r)||l&n)&&(s[o]=Cm(l,e)):u<=e&&(t.expiredLanes|=l),i&=~l}}function dl(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Dd(){var t=Ls;return Ls<<=1,!(Ls&4194240)&&(Ls=64),t}function wo(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function js(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-kt(e),t[e]=r}function Pm(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var s=31-kt(r),i=1<<s;e[s]=0,n[s]=-1,t[s]=-1,r&=~i}}function fa(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-kt(r),s=1<<n;s&e|t[n]&e&&(t[n]|=e),r&=~s}}var X=0;function Fd(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Vd,pa,Bd,Wd,qd,hl=!1,Ms=[],rr=null,nr=null,sr=null,as=new Map,us=new Map,Jt=[],Tm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Pu(t,e){switch(t){case"focusin":case"focusout":rr=null;break;case"dragenter":case"dragleave":nr=null;break;case"mouseover":case"mouseout":sr=null;break;case"pointerover":case"pointerout":as.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":us.delete(e.pointerId)}}function Pn(t,e,r,n,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Es(e),e!==null&&pa(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Am(t,e,r,n,s){switch(e){case"focusin":return rr=Pn(rr,t,e,r,n,s),!0;case"dragenter":return nr=Pn(nr,t,e,r,n,s),!0;case"mouseover":return sr=Pn(sr,t,e,r,n,s),!0;case"pointerover":var i=s.pointerId;return as.set(i,Pn(as.get(i)||null,t,e,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,us.set(i,Pn(us.get(i)||null,t,e,r,n,s)),!0}return!1}function Gd(t){var e=_r(t.target);if(e!==null){var r=$r(e);if(r!==null){if(e=r.tag,e===13){if(e=Rd(r),e!==null){t.blockedOn=e,qd(t.priority,function(){Bd(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ni(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=fl(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);ll=n,r.target.dispatchEvent(n),ll=null}else return e=Es(r),e!==null&&pa(e),t.blockedOn=r,!1;e.shift()}return!0}function Tu(t,e,r){ni(t)&&r.delete(e)}function Im(){hl=!1,rr!==null&&ni(rr)&&(rr=null),nr!==null&&ni(nr)&&(nr=null),sr!==null&&ni(sr)&&(sr=null),as.forEach(Tu),us.forEach(Tu)}function Tn(t,e){t.blockedOn===e&&(t.blockedOn=null,hl||(hl=!0,rt.unstable_scheduleCallback(rt.unstable_NormalPriority,Im)))}function cs(t){function e(s){return Tn(s,t)}if(0<Ms.length){Tn(Ms[0],t);for(var r=1;r<Ms.length;r++){var n=Ms[r];n.blockedOn===t&&(n.blockedOn=null)}}for(rr!==null&&Tn(rr,t),nr!==null&&Tn(nr,t),sr!==null&&Tn(sr,t),as.forEach(e),us.forEach(e),r=0;r<Jt.length;r++)n=Jt[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<Jt.length&&(r=Jt[0],r.blockedOn===null);)Gd(r),r.blockedOn===null&&Jt.shift()}var un=Bt.ReactCurrentBatchConfig,yi=!0;function Om(t,e,r,n){var s=X,i=un.transition;un.transition=null;try{X=1,ma(t,e,r,n)}finally{X=s,un.transition=i}}function Rm(t,e,r,n){var s=X,i=un.transition;un.transition=null;try{X=4,ma(t,e,r,n)}finally{X=s,un.transition=i}}function ma(t,e,r,n){if(yi){var s=fl(t,e,r,n);if(s===null)Po(t,e,n,wi,r),Pu(t,n);else if(Am(s,t,e,r,n))n.stopPropagation();else if(Pu(t,n),e&4&&-1<Tm.indexOf(t)){for(;s!==null;){var i=Es(s);if(i!==null&&Vd(i),i=fl(t,e,r,n),i===null&&Po(t,e,n,wi,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else Po(t,e,n,null,r)}}var wi=null;function fl(t,e,r,n){if(wi=null,t=da(n),t=_r(t),t!==null)if(e=$r(t),e===null)t=null;else if(r=e.tag,r===13){if(t=Rd(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return wi=t,null}function Hd(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(_m()){case ha:return 1;case Md:return 4;case gi:case km:return 16;case Ud:return 536870912;default:return 16}default:return 16}}var Zt=null,ga=null,si=null;function Kd(){if(si)return si;var t,e=ga,r=e.length,n,s="value"in Zt?Zt.value:Zt.textContent,i=s.length;for(t=0;t<r&&e[t]===s[t];t++);var o=r-t;for(n=1;n<=o&&e[r-n]===s[i-n];n++);return si=s.slice(t,1<n?1-n:void 0)}function ii(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Us(){return!0}function Au(){return!1}function st(t){function e(r,n,s,i,o){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(r=t[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Us:Au,this.isPropagationStopped=Au,this}return fe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Us)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Us)},persist:function(){},isPersistent:Us}),e}var _n={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},va=st(_n),bs=fe({},_n,{view:0,detail:0}),$m=st(bs),xo,_o,An,Wi=fe({},bs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ya,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==An&&(An&&t.type==="mousemove"?(xo=t.screenX-An.screenX,_o=t.screenY-An.screenY):_o=xo=0,An=t),xo)},movementY:function(t){return"movementY"in t?t.movementY:_o}}),Iu=st(Wi),Lm=fe({},Wi,{dataTransfer:0}),zm=st(Lm),Mm=fe({},bs,{relatedTarget:0}),ko=st(Mm),Um=fe({},_n,{animationName:0,elapsedTime:0,pseudoElement:0}),Dm=st(Um),Fm=fe({},_n,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Vm=st(Fm),Bm=fe({},_n,{data:0}),Ou=st(Bm),Wm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Gm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Hm(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Gm[t])?!!e[t]:!1}function ya(){return Hm}var Km=fe({},bs,{key:function(t){if(t.key){var e=Wm[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ii(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?qm[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ya,charCode:function(t){return t.type==="keypress"?ii(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ii(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Qm=st(Km),Jm=fe({},Wi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ru=st(Jm),Ym=fe({},bs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ya}),Xm=st(Ym),Zm=fe({},_n,{propertyName:0,elapsedTime:0,pseudoElement:0}),eg=st(Zm),tg=fe({},Wi,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),rg=st(tg),ng=[9,13,27,32],wa=Ut&&"CompositionEvent"in window,Gn=null;Ut&&"documentMode"in document&&(Gn=document.documentMode);var sg=Ut&&"TextEvent"in window&&!Gn,Qd=Ut&&(!wa||Gn&&8<Gn&&11>=Gn),$u=" ",Lu=!1;function Jd(t,e){switch(t){case"keyup":return ng.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Yd(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Qr=!1;function ig(t,e){switch(t){case"compositionend":return Yd(e);case"keypress":return e.which!==32?null:(Lu=!0,$u);case"textInput":return t=e.data,t===$u&&Lu?null:t;default:return null}}function og(t,e){if(Qr)return t==="compositionend"||!wa&&Jd(t,e)?(t=Kd(),si=ga=Zt=null,Qr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Qd&&e.locale!=="ko"?null:e.data;default:return null}}var lg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zu(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!lg[t.type]:e==="textarea"}function Xd(t,e,r,n){Pd(n),e=xi(e,"onChange"),0<e.length&&(r=new va("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var Hn=null,ds=null;function ag(t){uh(t,0)}function qi(t){var e=Xr(t);if(kd(e))return t}function ug(t,e){if(t==="change")return e}var Zd=!1;if(Ut){var So;if(Ut){var jo="oninput"in document;if(!jo){var Mu=document.createElement("div");Mu.setAttribute("oninput","return;"),jo=typeof Mu.oninput=="function"}So=jo}else So=!1;Zd=So&&(!document.documentMode||9<document.documentMode)}function Uu(){Hn&&(Hn.detachEvent("onpropertychange",eh),ds=Hn=null)}function eh(t){if(t.propertyName==="value"&&qi(ds)){var e=[];Xd(e,ds,t,da(t)),Od(ag,e)}}function cg(t,e,r){t==="focusin"?(Uu(),Hn=e,ds=r,Hn.attachEvent("onpropertychange",eh)):t==="focusout"&&Uu()}function dg(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return qi(ds)}function hg(t,e){if(t==="click")return qi(e)}function fg(t,e){if(t==="input"||t==="change")return qi(e)}function pg(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var jt=typeof Object.is=="function"?Object.is:pg;function hs(t,e){if(jt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!Qo.call(e,s)||!jt(t[s],e[s]))return!1}return!0}function Du(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Fu(t,e){var r=Du(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Du(r)}}function th(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?th(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function rh(){for(var t=window,e=fi();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=fi(t.document)}return e}function xa(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function mg(t){var e=rh(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&th(r.ownerDocument.documentElement,r)){if(n!==null&&xa(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!t.extend&&i>n&&(s=n,n=i,i=s),s=Fu(r,i);var o=Fu(r,n);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var gg=Ut&&"documentMode"in document&&11>=document.documentMode,Jr=null,pl=null,Kn=null,ml=!1;function Vu(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;ml||Jr==null||Jr!==fi(n)||(n=Jr,"selectionStart"in n&&xa(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Kn&&hs(Kn,n)||(Kn=n,n=xi(pl,"onSelect"),0<n.length&&(e=new va("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Jr)))}function Ds(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Yr={animationend:Ds("Animation","AnimationEnd"),animationiteration:Ds("Animation","AnimationIteration"),animationstart:Ds("Animation","AnimationStart"),transitionend:Ds("Transition","TransitionEnd")},bo={},nh={};Ut&&(nh=document.createElement("div").style,"AnimationEvent"in window||(delete Yr.animationend.animation,delete Yr.animationiteration.animation,delete Yr.animationstart.animation),"TransitionEvent"in window||delete Yr.transitionend.transition);function Gi(t){if(bo[t])return bo[t];if(!Yr[t])return t;var e=Yr[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in nh)return bo[t]=e[r];return t}var sh=Gi("animationend"),ih=Gi("animationiteration"),oh=Gi("animationstart"),lh=Gi("transitionend"),ah=new Map,Bu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function hr(t,e){ah.set(t,e),Rr(e,[t])}for(var Eo=0;Eo<Bu.length;Eo++){var Co=Bu[Eo],vg=Co.toLowerCase(),yg=Co[0].toUpperCase()+Co.slice(1);hr(vg,"on"+yg)}hr(sh,"onAnimationEnd");hr(ih,"onAnimationIteration");hr(oh,"onAnimationStart");hr("dblclick","onDoubleClick");hr("focusin","onFocus");hr("focusout","onBlur");hr(lh,"onTransitionEnd");hn("onMouseEnter",["mouseout","mouseover"]);hn("onMouseLeave",["mouseout","mouseover"]);hn("onPointerEnter",["pointerout","pointerover"]);hn("onPointerLeave",["pointerout","pointerover"]);Rr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Rr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Rr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Rr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Rr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Rr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wg=new Set("cancel close invalid load scroll toggle".split(" ").concat(Vn));function Wu(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,vm(n,e,void 0,t),t.currentTarget=null}function uh(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],s=n.event;n=n.listeners;e:{var i=void 0;if(e)for(var o=n.length-1;0<=o;o--){var l=n[o],u=l.instance,c=l.currentTarget;if(l=l.listener,u!==i&&s.isPropagationStopped())break e;Wu(s,l,c),i=u}else for(o=0;o<n.length;o++){if(l=n[o],u=l.instance,c=l.currentTarget,l=l.listener,u!==i&&s.isPropagationStopped())break e;Wu(s,l,c),i=u}}}if(mi)throw t=cl,mi=!1,cl=null,t}function oe(t,e){var r=e[xl];r===void 0&&(r=e[xl]=new Set);var n=t+"__bubble";r.has(n)||(ch(e,t,2,!1),r.add(n))}function No(t,e,r){var n=0;e&&(n|=4),ch(r,t,n,e)}var Fs="_reactListening"+Math.random().toString(36).slice(2);function fs(t){if(!t[Fs]){t[Fs]=!0,vd.forEach(function(r){r!=="selectionchange"&&(wg.has(r)||No(r,!1,t),No(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Fs]||(e[Fs]=!0,No("selectionchange",!1,e))}}function ch(t,e,r,n){switch(Hd(e)){case 1:var s=Om;break;case 4:s=Rm;break;default:s=ma}r=s.bind(null,e,r,t),s=void 0,!ul||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),n?s!==void 0?t.addEventListener(e,r,{capture:!0,passive:s}):t.addEventListener(e,r,!0):s!==void 0?t.addEventListener(e,r,{passive:s}):t.addEventListener(e,r,!1)}function Po(t,e,r,n,s){var i=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=n.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;l!==null;){if(o=_r(l),o===null)return;if(u=o.tag,u===5||u===6){n=i=o;continue e}l=l.parentNode}}n=n.return}Od(function(){var c=i,d=da(r),h=[];e:{var f=ah.get(t);if(f!==void 0){var v=va,y=t;switch(t){case"keypress":if(ii(r)===0)break e;case"keydown":case"keyup":v=Qm;break;case"focusin":y="focus",v=ko;break;case"focusout":y="blur",v=ko;break;case"beforeblur":case"afterblur":v=ko;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=Iu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=zm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=Xm;break;case sh:case ih:case oh:v=Dm;break;case lh:v=eg;break;case"scroll":v=$m;break;case"wheel":v=rg;break;case"copy":case"cut":case"paste":v=Vm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=Ru}var x=(e&4)!==0,k=!x&&t==="scroll",m=x?f!==null?f+"Capture":null:f;x=[];for(var p=c,g;p!==null;){g=p;var w=g.stateNode;if(g.tag===5&&w!==null&&(g=w,m!==null&&(w=ls(p,m),w!=null&&x.push(ps(p,w,g)))),k)break;p=p.return}0<x.length&&(f=new v(f,y,null,r,d),h.push({event:f,listeners:x}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",f&&r!==ll&&(y=r.relatedTarget||r.fromElement)&&(_r(y)||y[Dt]))break e;if((v||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,v?(y=r.relatedTarget||r.toElement,v=c,y=y?_r(y):null,y!==null&&(k=$r(y),y!==k||y.tag!==5&&y.tag!==6)&&(y=null)):(v=null,y=c),v!==y)){if(x=Iu,w="onMouseLeave",m="onMouseEnter",p="mouse",(t==="pointerout"||t==="pointerover")&&(x=Ru,w="onPointerLeave",m="onPointerEnter",p="pointer"),k=v==null?f:Xr(v),g=y==null?f:Xr(y),f=new x(w,p+"leave",v,r,d),f.target=k,f.relatedTarget=g,w=null,_r(d)===c&&(x=new x(m,p+"enter",y,r,d),x.target=g,x.relatedTarget=k,w=x),k=w,v&&y)t:{for(x=v,m=y,p=0,g=x;g;g=Dr(g))p++;for(g=0,w=m;w;w=Dr(w))g++;for(;0<p-g;)x=Dr(x),p--;for(;0<g-p;)m=Dr(m),g--;for(;p--;){if(x===m||m!==null&&x===m.alternate)break t;x=Dr(x),m=Dr(m)}x=null}else x=null;v!==null&&qu(h,f,v,x,!1),y!==null&&k!==null&&qu(h,k,y,x,!0)}}e:{if(f=c?Xr(c):window,v=f.nodeName&&f.nodeName.toLowerCase(),v==="select"||v==="input"&&f.type==="file")var b=ug;else if(zu(f))if(Zd)b=fg;else{b=dg;var E=cg}else(v=f.nodeName)&&v.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(b=hg);if(b&&(b=b(t,c))){Xd(h,b,r,d);break e}E&&E(t,f,c),t==="focusout"&&(E=f._wrapperState)&&E.controlled&&f.type==="number"&&rl(f,"number",f.value)}switch(E=c?Xr(c):window,t){case"focusin":(zu(E)||E.contentEditable==="true")&&(Jr=E,pl=c,Kn=null);break;case"focusout":Kn=pl=Jr=null;break;case"mousedown":ml=!0;break;case"contextmenu":case"mouseup":case"dragend":ml=!1,Vu(h,r,d);break;case"selectionchange":if(gg)break;case"keydown":case"keyup":Vu(h,r,d)}var P;if(wa)e:{switch(t){case"compositionstart":var O="onCompositionStart";break e;case"compositionend":O="onCompositionEnd";break e;case"compositionupdate":O="onCompositionUpdate";break e}O=void 0}else Qr?Jd(t,r)&&(O="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(O="onCompositionStart");O&&(Qd&&r.locale!=="ko"&&(Qr||O!=="onCompositionStart"?O==="onCompositionEnd"&&Qr&&(P=Kd()):(Zt=d,ga="value"in Zt?Zt.value:Zt.textContent,Qr=!0)),E=xi(c,O),0<E.length&&(O=new Ou(O,t,null,r,d),h.push({event:O,listeners:E}),P?O.data=P:(P=Yd(r),P!==null&&(O.data=P)))),(P=sg?ig(t,r):og(t,r))&&(c=xi(c,"onBeforeInput"),0<c.length&&(d=new Ou("onBeforeInput","beforeinput",null,r,d),h.push({event:d,listeners:c}),d.data=P))}uh(h,e)})}function ps(t,e,r){return{instance:t,listener:e,currentTarget:r}}function xi(t,e){for(var r=e+"Capture",n=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=ls(t,r),i!=null&&n.unshift(ps(t,i,s)),i=ls(t,e),i!=null&&n.push(ps(t,i,s))),t=t.return}return n}function Dr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function qu(t,e,r,n,s){for(var i=e._reactName,o=[];r!==null&&r!==n;){var l=r,u=l.alternate,c=l.stateNode;if(u!==null&&u===n)break;l.tag===5&&c!==null&&(l=c,s?(u=ls(r,i),u!=null&&o.unshift(ps(r,u,l))):s||(u=ls(r,i),u!=null&&o.push(ps(r,u,l)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var xg=/\r\n?/g,_g=/\u0000|\uFFFD/g;function Gu(t){return(typeof t=="string"?t:""+t).replace(xg,`
`).replace(_g,"")}function Vs(t,e,r){if(e=Gu(e),Gu(t)!==e&&r)throw Error(N(425))}function _i(){}var gl=null,vl=null;function yl(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var wl=typeof setTimeout=="function"?setTimeout:void 0,kg=typeof clearTimeout=="function"?clearTimeout:void 0,Hu=typeof Promise=="function"?Promise:void 0,Sg=typeof queueMicrotask=="function"?queueMicrotask:typeof Hu<"u"?function(t){return Hu.resolve(null).then(t).catch(jg)}:wl;function jg(t){setTimeout(function(){throw t})}function To(t,e){var r=e,n=0;do{var s=r.nextSibling;if(t.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){t.removeChild(s),cs(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);cs(e)}function ir(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Ku(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var kn=Math.random().toString(36).slice(2),Ct="__reactFiber$"+kn,ms="__reactProps$"+kn,Dt="__reactContainer$"+kn,xl="__reactEvents$"+kn,bg="__reactListeners$"+kn,Eg="__reactHandles$"+kn;function _r(t){var e=t[Ct];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Dt]||r[Ct]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=Ku(t);t!==null;){if(r=t[Ct])return r;t=Ku(t)}return e}t=r,r=t.parentNode}return null}function Es(t){return t=t[Ct]||t[Dt],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Xr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(N(33))}function Hi(t){return t[ms]||null}var _l=[],Zr=-1;function fr(t){return{current:t}}function le(t){0>Zr||(t.current=_l[Zr],_l[Zr]=null,Zr--)}function ne(t,e){Zr++,_l[Zr]=t.current,t.current=e}var dr={},$e=fr(dr),Ge=fr(!1),Nr=dr;function fn(t,e){var r=t.type.contextTypes;if(!r)return dr;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=e[i];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function He(t){return t=t.childContextTypes,t!=null}function ki(){le(Ge),le($e)}function Qu(t,e,r){if($e.current!==dr)throw Error(N(168));ne($e,e),ne(Ge,r)}function dh(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in e))throw Error(N(108,cm(t)||"Unknown",s));return fe({},r,n)}function Si(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||dr,Nr=$e.current,ne($e,t),ne(Ge,Ge.current),!0}function Ju(t,e,r){var n=t.stateNode;if(!n)throw Error(N(169));r?(t=dh(t,e,Nr),n.__reactInternalMemoizedMergedChildContext=t,le(Ge),le($e),ne($e,t)):le(Ge),ne(Ge,r)}var $t=null,Ki=!1,Ao=!1;function hh(t){$t===null?$t=[t]:$t.push(t)}function Cg(t){Ki=!0,hh(t)}function pr(){if(!Ao&&$t!==null){Ao=!0;var t=0,e=X;try{var r=$t;for(X=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}$t=null,Ki=!1}catch(s){throw $t!==null&&($t=$t.slice(t+1)),zd(ha,pr),s}finally{X=e,Ao=!1}}return null}var en=[],tn=0,ji=null,bi=0,ot=[],lt=0,Pr=null,Lt=1,zt="";function vr(t,e){en[tn++]=bi,en[tn++]=ji,ji=t,bi=e}function fh(t,e,r){ot[lt++]=Lt,ot[lt++]=zt,ot[lt++]=Pr,Pr=t;var n=Lt;t=zt;var s=32-kt(n)-1;n&=~(1<<s),r+=1;var i=32-kt(e)+s;if(30<i){var o=s-s%5;i=(n&(1<<o)-1).toString(32),n>>=o,s-=o,Lt=1<<32-kt(e)+s|r<<s|n,zt=i+t}else Lt=1<<i|r<<s|n,zt=t}function _a(t){t.return!==null&&(vr(t,1),fh(t,1,0))}function ka(t){for(;t===ji;)ji=en[--tn],en[tn]=null,bi=en[--tn],en[tn]=null;for(;t===Pr;)Pr=ot[--lt],ot[lt]=null,zt=ot[--lt],ot[lt]=null,Lt=ot[--lt],ot[lt]=null}var tt=null,et=null,ae=!1,_t=null;function ph(t,e){var r=at(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function Yu(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,tt=t,et=ir(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,tt=t,et=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Pr!==null?{id:Lt,overflow:zt}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=at(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,tt=t,et=null,!0):!1;default:return!1}}function kl(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Sl(t){if(ae){var e=et;if(e){var r=e;if(!Yu(t,e)){if(kl(t))throw Error(N(418));e=ir(r.nextSibling);var n=tt;e&&Yu(t,e)?ph(n,r):(t.flags=t.flags&-4097|2,ae=!1,tt=t)}}else{if(kl(t))throw Error(N(418));t.flags=t.flags&-4097|2,ae=!1,tt=t}}}function Xu(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;tt=t}function Bs(t){if(t!==tt)return!1;if(!ae)return Xu(t),ae=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!yl(t.type,t.memoizedProps)),e&&(e=et)){if(kl(t))throw mh(),Error(N(418));for(;e;)ph(t,e),e=ir(e.nextSibling)}if(Xu(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(N(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){et=ir(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}et=null}}else et=tt?ir(t.stateNode.nextSibling):null;return!0}function mh(){for(var t=et;t;)t=ir(t.nextSibling)}function pn(){et=tt=null,ae=!1}function Sa(t){_t===null?_t=[t]:_t.push(t)}var Ng=Bt.ReactCurrentBatchConfig;function In(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(N(309));var n=r.stateNode}if(!n)throw Error(N(147,t));var s=n,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(N(284));if(!r._owner)throw Error(N(290,t))}return t}function Ws(t,e){throw t=Object.prototype.toString.call(e),Error(N(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Zu(t){var e=t._init;return e(t._payload)}function gh(t){function e(m,p){if(t){var g=m.deletions;g===null?(m.deletions=[p],m.flags|=16):g.push(p)}}function r(m,p){if(!t)return null;for(;p!==null;)e(m,p),p=p.sibling;return null}function n(m,p){for(m=new Map;p!==null;)p.key!==null?m.set(p.key,p):m.set(p.index,p),p=p.sibling;return m}function s(m,p){return m=ur(m,p),m.index=0,m.sibling=null,m}function i(m,p,g){return m.index=g,t?(g=m.alternate,g!==null?(g=g.index,g<p?(m.flags|=2,p):g):(m.flags|=2,p)):(m.flags|=1048576,p)}function o(m){return t&&m.alternate===null&&(m.flags|=2),m}function l(m,p,g,w){return p===null||p.tag!==6?(p=Mo(g,m.mode,w),p.return=m,p):(p=s(p,g),p.return=m,p)}function u(m,p,g,w){var b=g.type;return b===Kr?d(m,p,g.props.children,w,g.key):p!==null&&(p.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Ht&&Zu(b)===p.type)?(w=s(p,g.props),w.ref=In(m,p,g),w.return=m,w):(w=hi(g.type,g.key,g.props,null,m.mode,w),w.ref=In(m,p,g),w.return=m,w)}function c(m,p,g,w){return p===null||p.tag!==4||p.stateNode.containerInfo!==g.containerInfo||p.stateNode.implementation!==g.implementation?(p=Uo(g,m.mode,w),p.return=m,p):(p=s(p,g.children||[]),p.return=m,p)}function d(m,p,g,w,b){return p===null||p.tag!==7?(p=Cr(g,m.mode,w,b),p.return=m,p):(p=s(p,g),p.return=m,p)}function h(m,p,g){if(typeof p=="string"&&p!==""||typeof p=="number")return p=Mo(""+p,m.mode,g),p.return=m,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case Os:return g=hi(p.type,p.key,p.props,null,m.mode,g),g.ref=In(m,null,p),g.return=m,g;case Hr:return p=Uo(p,m.mode,g),p.return=m,p;case Ht:var w=p._init;return h(m,w(p._payload),g)}if(Dn(p)||Cn(p))return p=Cr(p,m.mode,g,null),p.return=m,p;Ws(m,p)}return null}function f(m,p,g,w){var b=p!==null?p.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return b!==null?null:l(m,p,""+g,w);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Os:return g.key===b?u(m,p,g,w):null;case Hr:return g.key===b?c(m,p,g,w):null;case Ht:return b=g._init,f(m,p,b(g._payload),w)}if(Dn(g)||Cn(g))return b!==null?null:d(m,p,g,w,null);Ws(m,g)}return null}function v(m,p,g,w,b){if(typeof w=="string"&&w!==""||typeof w=="number")return m=m.get(g)||null,l(p,m,""+w,b);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Os:return m=m.get(w.key===null?g:w.key)||null,u(p,m,w,b);case Hr:return m=m.get(w.key===null?g:w.key)||null,c(p,m,w,b);case Ht:var E=w._init;return v(m,p,g,E(w._payload),b)}if(Dn(w)||Cn(w))return m=m.get(g)||null,d(p,m,w,b,null);Ws(p,w)}return null}function y(m,p,g,w){for(var b=null,E=null,P=p,O=p=0,J=null;P!==null&&O<g.length;O++){P.index>O?(J=P,P=null):J=P.sibling;var M=f(m,P,g[O],w);if(M===null){P===null&&(P=J);break}t&&P&&M.alternate===null&&e(m,P),p=i(M,p,O),E===null?b=M:E.sibling=M,E=M,P=J}if(O===g.length)return r(m,P),ae&&vr(m,O),b;if(P===null){for(;O<g.length;O++)P=h(m,g[O],w),P!==null&&(p=i(P,p,O),E===null?b=P:E.sibling=P,E=P);return ae&&vr(m,O),b}for(P=n(m,P);O<g.length;O++)J=v(P,m,O,g[O],w),J!==null&&(t&&J.alternate!==null&&P.delete(J.key===null?O:J.key),p=i(J,p,O),E===null?b=J:E.sibling=J,E=J);return t&&P.forEach(function(te){return e(m,te)}),ae&&vr(m,O),b}function x(m,p,g,w){var b=Cn(g);if(typeof b!="function")throw Error(N(150));if(g=b.call(g),g==null)throw Error(N(151));for(var E=b=null,P=p,O=p=0,J=null,M=g.next();P!==null&&!M.done;O++,M=g.next()){P.index>O?(J=P,P=null):J=P.sibling;var te=f(m,P,M.value,w);if(te===null){P===null&&(P=J);break}t&&P&&te.alternate===null&&e(m,P),p=i(te,p,O),E===null?b=te:E.sibling=te,E=te,P=J}if(M.done)return r(m,P),ae&&vr(m,O),b;if(P===null){for(;!M.done;O++,M=g.next())M=h(m,M.value,w),M!==null&&(p=i(M,p,O),E===null?b=M:E.sibling=M,E=M);return ae&&vr(m,O),b}for(P=n(m,P);!M.done;O++,M=g.next())M=v(P,m,O,M.value,w),M!==null&&(t&&M.alternate!==null&&P.delete(M.key===null?O:M.key),p=i(M,p,O),E===null?b=M:E.sibling=M,E=M);return t&&P.forEach(function(K){return e(m,K)}),ae&&vr(m,O),b}function k(m,p,g,w){if(typeof g=="object"&&g!==null&&g.type===Kr&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case Os:e:{for(var b=g.key,E=p;E!==null;){if(E.key===b){if(b=g.type,b===Kr){if(E.tag===7){r(m,E.sibling),p=s(E,g.props.children),p.return=m,m=p;break e}}else if(E.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===Ht&&Zu(b)===E.type){r(m,E.sibling),p=s(E,g.props),p.ref=In(m,E,g),p.return=m,m=p;break e}r(m,E);break}else e(m,E);E=E.sibling}g.type===Kr?(p=Cr(g.props.children,m.mode,w,g.key),p.return=m,m=p):(w=hi(g.type,g.key,g.props,null,m.mode,w),w.ref=In(m,p,g),w.return=m,m=w)}return o(m);case Hr:e:{for(E=g.key;p!==null;){if(p.key===E)if(p.tag===4&&p.stateNode.containerInfo===g.containerInfo&&p.stateNode.implementation===g.implementation){r(m,p.sibling),p=s(p,g.children||[]),p.return=m,m=p;break e}else{r(m,p);break}else e(m,p);p=p.sibling}p=Uo(g,m.mode,w),p.return=m,m=p}return o(m);case Ht:return E=g._init,k(m,p,E(g._payload),w)}if(Dn(g))return y(m,p,g,w);if(Cn(g))return x(m,p,g,w);Ws(m,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,p!==null&&p.tag===6?(r(m,p.sibling),p=s(p,g),p.return=m,m=p):(r(m,p),p=Mo(g,m.mode,w),p.return=m,m=p),o(m)):r(m,p)}return k}var mn=gh(!0),vh=gh(!1),Ei=fr(null),Ci=null,rn=null,ja=null;function ba(){ja=rn=Ci=null}function Ea(t){var e=Ei.current;le(Ei),t._currentValue=e}function jl(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function cn(t,e){Ci=t,ja=rn=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(qe=!0),t.firstContext=null)}function dt(t){var e=t._currentValue;if(ja!==t)if(t={context:t,memoizedValue:e,next:null},rn===null){if(Ci===null)throw Error(N(308));rn=t,Ci.dependencies={lanes:0,firstContext:t}}else rn=rn.next=t;return e}var kr=null;function Ca(t){kr===null?kr=[t]:kr.push(t)}function yh(t,e,r,n){var s=e.interleaved;return s===null?(r.next=r,Ca(e)):(r.next=s.next,s.next=r),e.interleaved=r,Ft(t,n)}function Ft(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Kt=!1;function Na(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function wh(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Mt(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function or(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,Y&2){var s=n.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),n.pending=e,Ft(t,r)}return s=n.interleaved,s===null?(e.next=e,Ca(n)):(e.next=s.next,s.next=e),n.interleaved=e,Ft(t,r)}function oi(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,fa(t,r)}}function ec(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?s=i=e:i=i.next=e}else s=i=e;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function Ni(t,e,r,n){var s=t.updateQueue;Kt=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,c=u.next;u.next=null,o===null?i=c:o.next=c,o=u;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=c:l.next=c,d.lastBaseUpdate=u))}if(i!==null){var h=s.baseState;o=0,d=c=u=null,l=i;do{var f=l.lane,v=l.eventTime;if((n&f)===f){d!==null&&(d=d.next={eventTime:v,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var y=t,x=l;switch(f=e,v=r,x.tag){case 1:if(y=x.payload,typeof y=="function"){h=y.call(v,h,f);break e}h=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=x.payload,f=typeof y=="function"?y.call(v,h,f):y,f==null)break e;h=fe({},h,f);break e;case 2:Kt=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[l]:f.push(l))}else v={eventTime:v,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(c=d=v,u=h):d=d.next=v,o|=f;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;f=l,l=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(u=h),s.baseState=u,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Ar|=o,t.lanes=o,t.memoizedState=h}}function tc(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(N(191,s));s.call(n)}}}var Cs={},Pt=fr(Cs),gs=fr(Cs),vs=fr(Cs);function Sr(t){if(t===Cs)throw Error(N(174));return t}function Pa(t,e){switch(ne(vs,e),ne(gs,t),ne(Pt,Cs),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:sl(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=sl(e,t)}le(Pt),ne(Pt,e)}function gn(){le(Pt),le(gs),le(vs)}function xh(t){Sr(vs.current);var e=Sr(Pt.current),r=sl(e,t.type);e!==r&&(ne(gs,t),ne(Pt,r))}function Ta(t){gs.current===t&&(le(Pt),le(gs))}var ue=fr(0);function Pi(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Io=[];function Aa(){for(var t=0;t<Io.length;t++)Io[t]._workInProgressVersionPrimary=null;Io.length=0}var li=Bt.ReactCurrentDispatcher,Oo=Bt.ReactCurrentBatchConfig,Tr=0,he=null,_e=null,je=null,Ti=!1,Qn=!1,ys=0,Pg=0;function Ae(){throw Error(N(321))}function Ia(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!jt(t[r],e[r]))return!1;return!0}function Oa(t,e,r,n,s,i){if(Tr=i,he=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,li.current=t===null||t.memoizedState===null?Og:Rg,t=r(n,s),Qn){i=0;do{if(Qn=!1,ys=0,25<=i)throw Error(N(301));i+=1,je=_e=null,e.updateQueue=null,li.current=$g,t=r(n,s)}while(Qn)}if(li.current=Ai,e=_e!==null&&_e.next!==null,Tr=0,je=_e=he=null,Ti=!1,e)throw Error(N(300));return t}function Ra(){var t=ys!==0;return ys=0,t}function Et(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return je===null?he.memoizedState=je=t:je=je.next=t,je}function ht(){if(_e===null){var t=he.alternate;t=t!==null?t.memoizedState:null}else t=_e.next;var e=je===null?he.memoizedState:je.next;if(e!==null)je=e,_e=t;else{if(t===null)throw Error(N(310));_e=t,t={memoizedState:_e.memoizedState,baseState:_e.baseState,baseQueue:_e.baseQueue,queue:_e.queue,next:null},je===null?he.memoizedState=je=t:je=je.next=t}return je}function ws(t,e){return typeof e=="function"?e(t):e}function Ro(t){var e=ht(),r=e.queue;if(r===null)throw Error(N(311));r.lastRenderedReducer=t;var n=_e,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var l=o=null,u=null,c=i;do{var d=c.lane;if((Tr&d)===d)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),n=c.hasEagerState?c.eagerState:t(n,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(l=u=h,o=n):u=u.next=h,he.lanes|=d,Ar|=d}c=c.next}while(c!==null&&c!==i);u===null?o=n:u.next=l,jt(n,e.memoizedState)||(qe=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=u,r.lastRenderedState=n}if(t=r.interleaved,t!==null){s=t;do i=s.lane,he.lanes|=i,Ar|=i,s=s.next;while(s!==t)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function $o(t){var e=ht(),r=e.queue;if(r===null)throw Error(N(311));r.lastRenderedReducer=t;var n=r.dispatch,s=r.pending,i=e.memoizedState;if(s!==null){r.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);jt(i,e.memoizedState)||(qe=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),r.lastRenderedState=i}return[i,n]}function _h(){}function kh(t,e){var r=he,n=ht(),s=e(),i=!jt(n.memoizedState,s);if(i&&(n.memoizedState=s,qe=!0),n=n.queue,$a(bh.bind(null,r,n,t),[t]),n.getSnapshot!==e||i||je!==null&&je.memoizedState.tag&1){if(r.flags|=2048,xs(9,jh.bind(null,r,n,s,e),void 0,null),be===null)throw Error(N(349));Tr&30||Sh(r,e,s)}return s}function Sh(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=he.updateQueue,e===null?(e={lastEffect:null,stores:null},he.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function jh(t,e,r,n){e.value=r,e.getSnapshot=n,Eh(e)&&Ch(t)}function bh(t,e,r){return r(function(){Eh(e)&&Ch(t)})}function Eh(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!jt(t,r)}catch{return!0}}function Ch(t){var e=Ft(t,1);e!==null&&St(e,t,1,-1)}function rc(t){var e=Et();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ws,lastRenderedState:t},e.queue=t,t=t.dispatch=Ig.bind(null,he,t),[e.memoizedState,t]}function xs(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=he.updateQueue,e===null?(e={lastEffect:null,stores:null},he.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function Nh(){return ht().memoizedState}function ai(t,e,r,n){var s=Et();he.flags|=t,s.memoizedState=xs(1|e,r,void 0,n===void 0?null:n)}function Qi(t,e,r,n){var s=ht();n=n===void 0?null:n;var i=void 0;if(_e!==null){var o=_e.memoizedState;if(i=o.destroy,n!==null&&Ia(n,o.deps)){s.memoizedState=xs(e,r,i,n);return}}he.flags|=t,s.memoizedState=xs(1|e,r,i,n)}function nc(t,e){return ai(8390656,8,t,e)}function $a(t,e){return Qi(2048,8,t,e)}function Ph(t,e){return Qi(4,2,t,e)}function Th(t,e){return Qi(4,4,t,e)}function Ah(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Ih(t,e,r){return r=r!=null?r.concat([t]):null,Qi(4,4,Ah.bind(null,e,t),r)}function La(){}function Oh(t,e){var r=ht();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Ia(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function Rh(t,e){var r=ht();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Ia(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function $h(t,e,r){return Tr&21?(jt(r,e)||(r=Dd(),he.lanes|=r,Ar|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,qe=!0),t.memoizedState=r)}function Tg(t,e){var r=X;X=r!==0&&4>r?r:4,t(!0);var n=Oo.transition;Oo.transition={};try{t(!1),e()}finally{X=r,Oo.transition=n}}function Lh(){return ht().memoizedState}function Ag(t,e,r){var n=ar(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},zh(t))Mh(e,r);else if(r=yh(t,e,r,n),r!==null){var s=Me();St(r,t,n,s),Uh(r,e,n)}}function Ig(t,e,r){var n=ar(t),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(zh(t))Mh(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,r);if(s.hasEagerState=!0,s.eagerState=l,jt(l,o)){var u=e.interleaved;u===null?(s.next=s,Ca(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}r=yh(t,e,s,n),r!==null&&(s=Me(),St(r,t,n,s),Uh(r,e,n))}}function zh(t){var e=t.alternate;return t===he||e!==null&&e===he}function Mh(t,e){Qn=Ti=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function Uh(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,fa(t,r)}}var Ai={readContext:dt,useCallback:Ae,useContext:Ae,useEffect:Ae,useImperativeHandle:Ae,useInsertionEffect:Ae,useLayoutEffect:Ae,useMemo:Ae,useReducer:Ae,useRef:Ae,useState:Ae,useDebugValue:Ae,useDeferredValue:Ae,useTransition:Ae,useMutableSource:Ae,useSyncExternalStore:Ae,useId:Ae,unstable_isNewReconciler:!1},Og={readContext:dt,useCallback:function(t,e){return Et().memoizedState=[t,e===void 0?null:e],t},useContext:dt,useEffect:nc,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,ai(4194308,4,Ah.bind(null,e,t),r)},useLayoutEffect:function(t,e){return ai(4194308,4,t,e)},useInsertionEffect:function(t,e){return ai(4,2,t,e)},useMemo:function(t,e){var r=Et();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Et();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=Ag.bind(null,he,t),[n.memoizedState,t]},useRef:function(t){var e=Et();return t={current:t},e.memoizedState=t},useState:rc,useDebugValue:La,useDeferredValue:function(t){return Et().memoizedState=t},useTransition:function(){var t=rc(!1),e=t[0];return t=Tg.bind(null,t[1]),Et().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=he,s=Et();if(ae){if(r===void 0)throw Error(N(407));r=r()}else{if(r=e(),be===null)throw Error(N(349));Tr&30||Sh(n,e,r)}s.memoizedState=r;var i={value:r,getSnapshot:e};return s.queue=i,nc(bh.bind(null,n,i,t),[t]),n.flags|=2048,xs(9,jh.bind(null,n,i,r,e),void 0,null),r},useId:function(){var t=Et(),e=be.identifierPrefix;if(ae){var r=zt,n=Lt;r=(n&~(1<<32-kt(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=ys++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=Pg++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Rg={readContext:dt,useCallback:Oh,useContext:dt,useEffect:$a,useImperativeHandle:Ih,useInsertionEffect:Ph,useLayoutEffect:Th,useMemo:Rh,useReducer:Ro,useRef:Nh,useState:function(){return Ro(ws)},useDebugValue:La,useDeferredValue:function(t){var e=ht();return $h(e,_e.memoizedState,t)},useTransition:function(){var t=Ro(ws)[0],e=ht().memoizedState;return[t,e]},useMutableSource:_h,useSyncExternalStore:kh,useId:Lh,unstable_isNewReconciler:!1},$g={readContext:dt,useCallback:Oh,useContext:dt,useEffect:$a,useImperativeHandle:Ih,useInsertionEffect:Ph,useLayoutEffect:Th,useMemo:Rh,useReducer:$o,useRef:Nh,useState:function(){return $o(ws)},useDebugValue:La,useDeferredValue:function(t){var e=ht();return _e===null?e.memoizedState=t:$h(e,_e.memoizedState,t)},useTransition:function(){var t=$o(ws)[0],e=ht().memoizedState;return[t,e]},useMutableSource:_h,useSyncExternalStore:kh,useId:Lh,unstable_isNewReconciler:!1};function yt(t,e){if(t&&t.defaultProps){e=fe({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function bl(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:fe({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Ji={isMounted:function(t){return(t=t._reactInternals)?$r(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Me(),s=ar(t),i=Mt(n,s);i.payload=e,r!=null&&(i.callback=r),e=or(t,i,s),e!==null&&(St(e,t,s,n),oi(e,t,s))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Me(),s=ar(t),i=Mt(n,s);i.tag=1,i.payload=e,r!=null&&(i.callback=r),e=or(t,i,s),e!==null&&(St(e,t,s,n),oi(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Me(),n=ar(t),s=Mt(r,n);s.tag=2,e!=null&&(s.callback=e),e=or(t,s,n),e!==null&&(St(e,t,n,r),oi(e,t,n))}};function sc(t,e,r,n,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,i,o):e.prototype&&e.prototype.isPureReactComponent?!hs(r,n)||!hs(s,i):!0}function Dh(t,e,r){var n=!1,s=dr,i=e.contextType;return typeof i=="object"&&i!==null?i=dt(i):(s=He(e)?Nr:$e.current,n=e.contextTypes,i=(n=n!=null)?fn(t,s):dr),e=new e(r,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ji,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function ic(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&Ji.enqueueReplaceState(e,e.state,null)}function El(t,e,r,n){var s=t.stateNode;s.props=r,s.state=t.memoizedState,s.refs={},Na(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=dt(i):(i=He(e)?Nr:$e.current,s.context=fn(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(bl(t,e,i,r),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Ji.enqueueReplaceState(s,s.state,null),Ni(t,r,s,n),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function vn(t,e){try{var r="",n=e;do r+=um(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Lo(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function Cl(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var Lg=typeof WeakMap=="function"?WeakMap:Map;function Fh(t,e,r){r=Mt(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){Oi||(Oi=!0,zl=n),Cl(t,e)},r}function Vh(t,e,r){r=Mt(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var s=e.value;r.payload=function(){return n(s)},r.callback=function(){Cl(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){Cl(t,e),typeof n!="function"&&(lr===null?lr=new Set([this]):lr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function oc(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new Lg;var s=new Set;n.set(e,s)}else s=n.get(e),s===void 0&&(s=new Set,n.set(e,s));s.has(r)||(s.add(r),t=Jg.bind(null,t,e,r),e.then(t,t))}function lc(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function ac(t,e,r,n,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Mt(-1,1),e.tag=2,or(r,e,1))),r.lanes|=1),t)}var zg=Bt.ReactCurrentOwner,qe=!1;function ze(t,e,r,n){e.child=t===null?vh(e,null,r,n):mn(e,t.child,r,n)}function uc(t,e,r,n,s){r=r.render;var i=e.ref;return cn(e,s),n=Oa(t,e,r,n,i,s),r=Ra(),t!==null&&!qe?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Vt(t,e,s)):(ae&&r&&_a(e),e.flags|=1,ze(t,e,n,s),e.child)}function cc(t,e,r,n,s){if(t===null){var i=r.type;return typeof i=="function"&&!Wa(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=i,Bh(t,e,i,n,s)):(t=hi(r.type,null,n,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:hs,r(o,n)&&t.ref===e.ref)return Vt(t,e,s)}return e.flags|=1,t=ur(i,n),t.ref=e.ref,t.return=e,e.child=t}function Bh(t,e,r,n,s){if(t!==null){var i=t.memoizedProps;if(hs(i,n)&&t.ref===e.ref)if(qe=!1,e.pendingProps=n=i,(t.lanes&s)!==0)t.flags&131072&&(qe=!0);else return e.lanes=t.lanes,Vt(t,e,s)}return Nl(t,e,r,n,s)}function Wh(t,e,r){var n=e.pendingProps,s=n.children,i=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ne(sn,Ye),Ye|=r;else{if(!(r&1073741824))return t=i!==null?i.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ne(sn,Ye),Ye|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,ne(sn,Ye),Ye|=n}else i!==null?(n=i.baseLanes|r,e.memoizedState=null):n=r,ne(sn,Ye),Ye|=n;return ze(t,e,s,r),e.child}function qh(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function Nl(t,e,r,n,s){var i=He(r)?Nr:$e.current;return i=fn(e,i),cn(e,s),r=Oa(t,e,r,n,i,s),n=Ra(),t!==null&&!qe?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Vt(t,e,s)):(ae&&n&&_a(e),e.flags|=1,ze(t,e,r,s),e.child)}function dc(t,e,r,n,s){if(He(r)){var i=!0;Si(e)}else i=!1;if(cn(e,s),e.stateNode===null)ui(t,e),Dh(e,r,n),El(e,r,n,s),n=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,c=r.contextType;typeof c=="object"&&c!==null?c=dt(c):(c=He(r)?Nr:$e.current,c=fn(e,c));var d=r.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||u!==c)&&ic(e,o,n,c),Kt=!1;var f=e.memoizedState;o.state=f,Ni(e,n,o,s),u=e.memoizedState,l!==n||f!==u||Ge.current||Kt?(typeof d=="function"&&(bl(e,r,d,n),u=e.memoizedState),(l=Kt||sc(e,r,l,n,f,u,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=u),o.props=n,o.state=u,o.context=c,n=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,wh(t,e),l=e.memoizedProps,c=e.type===e.elementType?l:yt(e.type,l),o.props=c,h=e.pendingProps,f=o.context,u=r.contextType,typeof u=="object"&&u!==null?u=dt(u):(u=He(r)?Nr:$e.current,u=fn(e,u));var v=r.getDerivedStateFromProps;(d=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||f!==u)&&ic(e,o,n,u),Kt=!1,f=e.memoizedState,o.state=f,Ni(e,n,o,s);var y=e.memoizedState;l!==h||f!==y||Ge.current||Kt?(typeof v=="function"&&(bl(e,r,v,n),y=e.memoizedState),(c=Kt||sc(e,r,c,n,f,y,u)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,y,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,y,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=y),o.props=n,o.state=y,o.context=u,n=c):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),n=!1)}return Pl(t,e,r,n,i,s)}function Pl(t,e,r,n,s,i){qh(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return s&&Ju(e,r,!1),Vt(t,e,i);n=e.stateNode,zg.current=e;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=mn(e,t.child,null,i),e.child=mn(e,null,l,i)):ze(t,e,l,i),e.memoizedState=n.state,s&&Ju(e,r,!0),e.child}function Gh(t){var e=t.stateNode;e.pendingContext?Qu(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Qu(t,e.context,!1),Pa(t,e.containerInfo)}function hc(t,e,r,n,s){return pn(),Sa(s),e.flags|=256,ze(t,e,r,n),e.child}var Tl={dehydrated:null,treeContext:null,retryLane:0};function Al(t){return{baseLanes:t,cachePool:null,transitions:null}}function Hh(t,e,r){var n=e.pendingProps,s=ue.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ne(ue,s&1),t===null)return Sl(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,i?(n=e.mode,i=e.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Zi(o,n,0,null),t=Cr(t,n,r,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Al(r),e.memoizedState=Tl,t):za(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return Mg(t,e,o,n,l,s,r);if(i){i=n.fallback,o=e.mode,s=t.child,l=s.sibling;var u={mode:"hidden",children:n.children};return!(o&1)&&e.child!==s?(n=e.child,n.childLanes=0,n.pendingProps=u,e.deletions=null):(n=ur(s,u),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=ur(l,i):(i=Cr(i,o,r,null),i.flags|=2),i.return=e,n.return=e,n.sibling=i,e.child=n,n=i,i=e.child,o=t.child.memoizedState,o=o===null?Al(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~r,e.memoizedState=Tl,n}return i=t.child,t=i.sibling,n=ur(i,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function za(t,e){return e=Zi({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function qs(t,e,r,n){return n!==null&&Sa(n),mn(e,t.child,null,r),t=za(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Mg(t,e,r,n,s,i,o){if(r)return e.flags&256?(e.flags&=-257,n=Lo(Error(N(422))),qs(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=n.fallback,s=e.mode,n=Zi({mode:"visible",children:n.children},s,0,null),i=Cr(i,s,o,null),i.flags|=2,n.return=e,i.return=e,n.sibling=i,e.child=n,e.mode&1&&mn(e,t.child,null,o),e.child.memoizedState=Al(o),e.memoizedState=Tl,i);if(!(e.mode&1))return qs(t,e,o,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(N(419)),n=Lo(i,n,void 0),qs(t,e,o,n)}if(l=(o&t.childLanes)!==0,qe||l){if(n=be,n!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Ft(t,s),St(n,t,s,-1))}return Ba(),n=Lo(Error(N(421))),qs(t,e,o,n)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=Yg.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,et=ir(s.nextSibling),tt=e,ae=!0,_t=null,t!==null&&(ot[lt++]=Lt,ot[lt++]=zt,ot[lt++]=Pr,Lt=t.id,zt=t.overflow,Pr=e),e=za(e,n.children),e.flags|=4096,e)}function fc(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),jl(t.return,e,r)}function zo(t,e,r,n,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function Kh(t,e,r){var n=e.pendingProps,s=n.revealOrder,i=n.tail;if(ze(t,e,n.children,r),n=ue.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&fc(t,r,e);else if(t.tag===19)fc(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(ne(ue,n),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)t=r.alternate,t!==null&&Pi(t)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),zo(e,!1,s,r,i);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Pi(t)===null){e.child=s;break}t=s.sibling,s.sibling=r,r=s,s=t}zo(e,!0,r,null,i);break;case"together":zo(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ui(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Vt(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Ar|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(N(153));if(e.child!==null){for(t=e.child,r=ur(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=ur(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function Ug(t,e,r){switch(e.tag){case 3:Gh(e),pn();break;case 5:xh(e);break;case 1:He(e.type)&&Si(e);break;case 4:Pa(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,s=e.memoizedProps.value;ne(Ei,n._currentValue),n._currentValue=s;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(ne(ue,ue.current&1),e.flags|=128,null):r&e.child.childLanes?Hh(t,e,r):(ne(ue,ue.current&1),t=Vt(t,e,r),t!==null?t.sibling:null);ne(ue,ue.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return Kh(t,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ne(ue,ue.current),n)break;return null;case 22:case 23:return e.lanes=0,Wh(t,e,r)}return Vt(t,e,r)}var Qh,Il,Jh,Yh;Qh=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Il=function(){};Jh=function(t,e,r,n){var s=t.memoizedProps;if(s!==n){t=e.stateNode,Sr(Pt.current);var i=null;switch(r){case"input":s=el(t,s),n=el(t,n),i=[];break;case"select":s=fe({},s,{value:void 0}),n=fe({},n,{value:void 0}),i=[];break;case"textarea":s=nl(t,s),n=nl(t,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=_i)}il(r,n);var o;r=null;for(c in s)if(!n.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var l=s[c];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(is.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in n){var u=n[c];if(l=s!=null?s[c]:void 0,n.hasOwnProperty(c)&&u!==l&&(u!=null||l!=null))if(c==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(r||(r={}),r[o]=u[o])}else r||(i||(i=[]),i.push(c,r)),r=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(is.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&oe("scroll",t),i||l===u||(i=[])):(i=i||[]).push(c,u))}r&&(i=i||[]).push("style",r);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};Yh=function(t,e,r,n){r!==n&&(e.flags|=4)};function On(t,e){if(!ae)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Ie(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function Dg(t,e,r){var n=e.pendingProps;switch(ka(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ie(e),null;case 1:return He(e.type)&&ki(),Ie(e),null;case 3:return n=e.stateNode,gn(),le(Ge),le($e),Aa(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Bs(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,_t!==null&&(Dl(_t),_t=null))),Il(t,e),Ie(e),null;case 5:Ta(e);var s=Sr(vs.current);if(r=e.type,t!==null&&e.stateNode!=null)Jh(t,e,r,n,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(N(166));return Ie(e),null}if(t=Sr(Pt.current),Bs(e)){n=e.stateNode,r=e.type;var i=e.memoizedProps;switch(n[Ct]=e,n[ms]=i,t=(e.mode&1)!==0,r){case"dialog":oe("cancel",n),oe("close",n);break;case"iframe":case"object":case"embed":oe("load",n);break;case"video":case"audio":for(s=0;s<Vn.length;s++)oe(Vn[s],n);break;case"source":oe("error",n);break;case"img":case"image":case"link":oe("error",n),oe("load",n);break;case"details":oe("toggle",n);break;case"input":ku(n,i),oe("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},oe("invalid",n);break;case"textarea":ju(n,i),oe("invalid",n)}il(r,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&Vs(n.textContent,l,t),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Vs(n.textContent,l,t),s=["children",""+l]):is.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&oe("scroll",n)}switch(r){case"input":Rs(n),Su(n,i,!0);break;case"textarea":Rs(n),bu(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=_i)}n=s,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=bd(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(r,{is:n.is}):(t=o.createElement(r),r==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,r),t[Ct]=e,t[ms]=n,Qh(t,e,!1,!1),e.stateNode=t;e:{switch(o=ol(r,n),r){case"dialog":oe("cancel",t),oe("close",t),s=n;break;case"iframe":case"object":case"embed":oe("load",t),s=n;break;case"video":case"audio":for(s=0;s<Vn.length;s++)oe(Vn[s],t);s=n;break;case"source":oe("error",t),s=n;break;case"img":case"image":case"link":oe("error",t),oe("load",t),s=n;break;case"details":oe("toggle",t),s=n;break;case"input":ku(t,n),s=el(t,n),oe("invalid",t);break;case"option":s=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},s=fe({},n,{value:void 0}),oe("invalid",t);break;case"textarea":ju(t,n),s=nl(t,n),oe("invalid",t);break;default:s=n}il(r,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?Nd(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Ed(t,u)):i==="children"?typeof u=="string"?(r!=="textarea"||u!=="")&&os(t,u):typeof u=="number"&&os(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(is.hasOwnProperty(i)?u!=null&&i==="onScroll"&&oe("scroll",t):u!=null&&la(t,i,u,o))}switch(r){case"input":Rs(t),Su(t,n,!1);break;case"textarea":Rs(t),bu(t);break;case"option":n.value!=null&&t.setAttribute("value",""+cr(n.value));break;case"select":t.multiple=!!n.multiple,i=n.value,i!=null?on(t,!!n.multiple,i,!1):n.defaultValue!=null&&on(t,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=_i)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ie(e),null;case 6:if(t&&e.stateNode!=null)Yh(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(N(166));if(r=Sr(vs.current),Sr(Pt.current),Bs(e)){if(n=e.stateNode,r=e.memoizedProps,n[Ct]=e,(i=n.nodeValue!==r)&&(t=tt,t!==null))switch(t.tag){case 3:Vs(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Vs(n.nodeValue,r,(t.mode&1)!==0)}i&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Ct]=e,e.stateNode=n}return Ie(e),null;case 13:if(le(ue),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ae&&et!==null&&e.mode&1&&!(e.flags&128))mh(),pn(),e.flags|=98560,i=!1;else if(i=Bs(e),n!==null&&n.dehydrated!==null){if(t===null){if(!i)throw Error(N(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(N(317));i[Ct]=e}else pn(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ie(e),i=!1}else _t!==null&&(Dl(_t),_t=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||ue.current&1?ke===0&&(ke=3):Ba())),e.updateQueue!==null&&(e.flags|=4),Ie(e),null);case 4:return gn(),Il(t,e),t===null&&fs(e.stateNode.containerInfo),Ie(e),null;case 10:return Ea(e.type._context),Ie(e),null;case 17:return He(e.type)&&ki(),Ie(e),null;case 19:if(le(ue),i=e.memoizedState,i===null)return Ie(e),null;if(n=(e.flags&128)!==0,o=i.rendering,o===null)if(n)On(i,!1);else{if(ke!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Pi(t),o!==null){for(e.flags|=128,On(i,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)i=r,t=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return ne(ue,ue.current&1|2),e.child}t=t.sibling}i.tail!==null&&ge()>yn&&(e.flags|=128,n=!0,On(i,!1),e.lanes=4194304)}else{if(!n)if(t=Pi(o),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),On(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ae)return Ie(e),null}else 2*ge()-i.renderingStartTime>yn&&r!==1073741824&&(e.flags|=128,n=!0,On(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(r=i.last,r!==null?r.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=ge(),e.sibling=null,r=ue.current,ne(ue,n?r&1|2:r&1),e):(Ie(e),null);case 22:case 23:return Va(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Ye&1073741824&&(Ie(e),e.subtreeFlags&6&&(e.flags|=8192)):Ie(e),null;case 24:return null;case 25:return null}throw Error(N(156,e.tag))}function Fg(t,e){switch(ka(e),e.tag){case 1:return He(e.type)&&ki(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return gn(),le(Ge),le($e),Aa(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ta(e),null;case 13:if(le(ue),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(N(340));pn()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return le(ue),null;case 4:return gn(),null;case 10:return Ea(e.type._context),null;case 22:case 23:return Va(),null;case 24:return null;default:return null}}var Gs=!1,Re=!1,Vg=typeof WeakSet=="function"?WeakSet:Set,R=null;function nn(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){pe(t,e,n)}else r.current=null}function Ol(t,e,r){try{r()}catch(n){pe(t,e,n)}}var pc=!1;function Bg(t,e){if(gl=yi,t=rh(),xa(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,u=-1,c=0,d=0,h=t,f=null;t:for(;;){for(var v;h!==r||s!==0&&h.nodeType!==3||(l=o+s),h!==i||n!==0&&h.nodeType!==3||(u=o+n),h.nodeType===3&&(o+=h.nodeValue.length),(v=h.firstChild)!==null;)f=h,h=v;for(;;){if(h===t)break t;if(f===r&&++c===s&&(l=o),f===i&&++d===n&&(u=o),(v=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=v}r=l===-1||u===-1?null:{start:l,end:u}}else r=null}r=r||{start:0,end:0}}else r=null;for(vl={focusedElem:t,selectionRange:r},yi=!1,R=e;R!==null;)if(e=R,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,R=t;else for(;R!==null;){e=R;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var x=y.memoizedProps,k=y.memoizedState,m=e.stateNode,p=m.getSnapshotBeforeUpdate(e.elementType===e.type?x:yt(e.type,x),k);m.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var g=e.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(N(163))}}catch(w){pe(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,R=t;break}R=e.return}return y=pc,pc=!1,y}function Jn(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Ol(e,r,i)}s=s.next}while(s!==n)}}function Yi(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function Rl(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function Xh(t){var e=t.alternate;e!==null&&(t.alternate=null,Xh(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ct],delete e[ms],delete e[xl],delete e[bg],delete e[Eg])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Zh(t){return t.tag===5||t.tag===3||t.tag===4}function mc(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Zh(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function $l(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=_i));else if(n!==4&&(t=t.child,t!==null))for($l(t,e,r),t=t.sibling;t!==null;)$l(t,e,r),t=t.sibling}function Ll(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(Ll(t,e,r),t=t.sibling;t!==null;)Ll(t,e,r),t=t.sibling}var Ce=null,wt=!1;function Wt(t,e,r){for(r=r.child;r!==null;)ef(t,e,r),r=r.sibling}function ef(t,e,r){if(Nt&&typeof Nt.onCommitFiberUnmount=="function")try{Nt.onCommitFiberUnmount(Bi,r)}catch{}switch(r.tag){case 5:Re||nn(r,e);case 6:var n=Ce,s=wt;Ce=null,Wt(t,e,r),Ce=n,wt=s,Ce!==null&&(wt?(t=Ce,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Ce.removeChild(r.stateNode));break;case 18:Ce!==null&&(wt?(t=Ce,r=r.stateNode,t.nodeType===8?To(t.parentNode,r):t.nodeType===1&&To(t,r),cs(t)):To(Ce,r.stateNode));break;case 4:n=Ce,s=wt,Ce=r.stateNode.containerInfo,wt=!0,Wt(t,e,r),Ce=n,wt=s;break;case 0:case 11:case 14:case 15:if(!Re&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Ol(r,e,o),s=s.next}while(s!==n)}Wt(t,e,r);break;case 1:if(!Re&&(nn(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){pe(r,e,l)}Wt(t,e,r);break;case 21:Wt(t,e,r);break;case 22:r.mode&1?(Re=(n=Re)||r.memoizedState!==null,Wt(t,e,r),Re=n):Wt(t,e,r);break;default:Wt(t,e,r)}}function gc(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new Vg),e.forEach(function(n){var s=Xg.bind(null,t,n);r.has(n)||(r.add(n),n.then(s,s))})}}function mt(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Ce=l.stateNode,wt=!1;break e;case 3:Ce=l.stateNode.containerInfo,wt=!0;break e;case 4:Ce=l.stateNode.containerInfo,wt=!0;break e}l=l.return}if(Ce===null)throw Error(N(160));ef(i,o,s),Ce=null,wt=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(c){pe(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)tf(e,t),e=e.sibling}function tf(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(mt(e,t),bt(t),n&4){try{Jn(3,t,t.return),Yi(3,t)}catch(x){pe(t,t.return,x)}try{Jn(5,t,t.return)}catch(x){pe(t,t.return,x)}}break;case 1:mt(e,t),bt(t),n&512&&r!==null&&nn(r,r.return);break;case 5:if(mt(e,t),bt(t),n&512&&r!==null&&nn(r,r.return),t.flags&32){var s=t.stateNode;try{os(s,"")}catch(x){pe(t,t.return,x)}}if(n&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=r!==null?r.memoizedProps:i,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Sd(s,i),ol(l,o);var c=ol(l,i);for(o=0;o<u.length;o+=2){var d=u[o],h=u[o+1];d==="style"?Nd(s,h):d==="dangerouslySetInnerHTML"?Ed(s,h):d==="children"?os(s,h):la(s,d,h,c)}switch(l){case"input":tl(s,i);break;case"textarea":jd(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var v=i.value;v!=null?on(s,!!i.multiple,v,!1):f!==!!i.multiple&&(i.defaultValue!=null?on(s,!!i.multiple,i.defaultValue,!0):on(s,!!i.multiple,i.multiple?[]:"",!1))}s[ms]=i}catch(x){pe(t,t.return,x)}}break;case 6:if(mt(e,t),bt(t),n&4){if(t.stateNode===null)throw Error(N(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(x){pe(t,t.return,x)}}break;case 3:if(mt(e,t),bt(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{cs(e.containerInfo)}catch(x){pe(t,t.return,x)}break;case 4:mt(e,t),bt(t);break;case 13:mt(e,t),bt(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Da=ge())),n&4&&gc(t);break;case 22:if(d=r!==null&&r.memoizedState!==null,t.mode&1?(Re=(c=Re)||d,mt(e,t),Re=c):mt(e,t),bt(t),n&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(R=t,d=t.child;d!==null;){for(h=R=d;R!==null;){switch(f=R,v=f.child,f.tag){case 0:case 11:case 14:case 15:Jn(4,f,f.return);break;case 1:nn(f,f.return);var y=f.stateNode;if(typeof y.componentWillUnmount=="function"){n=f,r=f.return;try{e=n,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(x){pe(n,r,x)}}break;case 5:nn(f,f.return);break;case 22:if(f.memoizedState!==null){yc(h);continue}}v!==null?(v.return=f,R=v):yc(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,u=h.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=Cd("display",o))}catch(x){pe(t,t.return,x)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(x){pe(t,t.return,x)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:mt(e,t),bt(t),n&4&&gc(t);break;case 21:break;default:mt(e,t),bt(t)}}function bt(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(Zh(r)){var n=r;break e}r=r.return}throw Error(N(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(os(s,""),n.flags&=-33);var i=mc(t);Ll(t,i,s);break;case 3:case 4:var o=n.stateNode.containerInfo,l=mc(t);$l(t,l,o);break;default:throw Error(N(161))}}catch(u){pe(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Wg(t,e,r){R=t,rf(t)}function rf(t,e,r){for(var n=(t.mode&1)!==0;R!==null;){var s=R,i=s.child;if(s.tag===22&&n){var o=s.memoizedState!==null||Gs;if(!o){var l=s.alternate,u=l!==null&&l.memoizedState!==null||Re;l=Gs;var c=Re;if(Gs=o,(Re=u)&&!c)for(R=s;R!==null;)o=R,u=o.child,o.tag===22&&o.memoizedState!==null?wc(s):u!==null?(u.return=o,R=u):wc(s);for(;i!==null;)R=i,rf(i),i=i.sibling;R=s,Gs=l,Re=c}vc(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,R=i):vc(t)}}function vc(t){for(;R!==null;){var e=R;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Re||Yi(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Re)if(r===null)n.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:yt(e.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&tc(e,i,n);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}tc(e,o,r)}break;case 5:var l=e.stateNode;if(r===null&&e.flags&4){r=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&r.focus();break;case"img":u.src&&(r.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&cs(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(N(163))}Re||e.flags&512&&Rl(e)}catch(f){pe(e,e.return,f)}}if(e===t){R=null;break}if(r=e.sibling,r!==null){r.return=e.return,R=r;break}R=e.return}}function yc(t){for(;R!==null;){var e=R;if(e===t){R=null;break}var r=e.sibling;if(r!==null){r.return=e.return,R=r;break}R=e.return}}function wc(t){for(;R!==null;){var e=R;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{Yi(4,e)}catch(u){pe(e,r,u)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var s=e.return;try{n.componentDidMount()}catch(u){pe(e,s,u)}}var i=e.return;try{Rl(e)}catch(u){pe(e,i,u)}break;case 5:var o=e.return;try{Rl(e)}catch(u){pe(e,o,u)}}}catch(u){pe(e,e.return,u)}if(e===t){R=null;break}var l=e.sibling;if(l!==null){l.return=e.return,R=l;break}R=e.return}}var qg=Math.ceil,Ii=Bt.ReactCurrentDispatcher,Ma=Bt.ReactCurrentOwner,ut=Bt.ReactCurrentBatchConfig,Y=0,be=null,xe=null,Ne=0,Ye=0,sn=fr(0),ke=0,_s=null,Ar=0,Xi=0,Ua=0,Yn=null,Be=null,Da=0,yn=1/0,Ot=null,Oi=!1,zl=null,lr=null,Hs=!1,er=null,Ri=0,Xn=0,Ml=null,ci=-1,di=0;function Me(){return Y&6?ge():ci!==-1?ci:ci=ge()}function ar(t){return t.mode&1?Y&2&&Ne!==0?Ne&-Ne:Ng.transition!==null?(di===0&&(di=Dd()),di):(t=X,t!==0||(t=window.event,t=t===void 0?16:Hd(t.type)),t):1}function St(t,e,r,n){if(50<Xn)throw Xn=0,Ml=null,Error(N(185));js(t,r,n),(!(Y&2)||t!==be)&&(t===be&&(!(Y&2)&&(Xi|=r),ke===4&&Yt(t,Ne)),Ke(t,n),r===1&&Y===0&&!(e.mode&1)&&(yn=ge()+500,Ki&&pr()))}function Ke(t,e){var r=t.callbackNode;Nm(t,e);var n=vi(t,t===be?Ne:0);if(n===0)r!==null&&Nu(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&Nu(r),e===1)t.tag===0?Cg(xc.bind(null,t)):hh(xc.bind(null,t)),Sg(function(){!(Y&6)&&pr()}),r=null;else{switch(Fd(n)){case 1:r=ha;break;case 4:r=Md;break;case 16:r=gi;break;case 536870912:r=Ud;break;default:r=gi}r=df(r,nf.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function nf(t,e){if(ci=-1,di=0,Y&6)throw Error(N(327));var r=t.callbackNode;if(dn()&&t.callbackNode!==r)return null;var n=vi(t,t===be?Ne:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=$i(t,n);else{e=n;var s=Y;Y|=2;var i=of();(be!==t||Ne!==e)&&(Ot=null,yn=ge()+500,Er(t,e));do try{Kg();break}catch(l){sf(t,l)}while(!0);ba(),Ii.current=i,Y=s,xe!==null?e=0:(be=null,Ne=0,e=ke)}if(e!==0){if(e===2&&(s=dl(t),s!==0&&(n=s,e=Ul(t,s))),e===1)throw r=_s,Er(t,0),Yt(t,n),Ke(t,ge()),r;if(e===6)Yt(t,n);else{if(s=t.current.alternate,!(n&30)&&!Gg(s)&&(e=$i(t,n),e===2&&(i=dl(t),i!==0&&(n=i,e=Ul(t,i))),e===1))throw r=_s,Er(t,0),Yt(t,n),Ke(t,ge()),r;switch(t.finishedWork=s,t.finishedLanes=n,e){case 0:case 1:throw Error(N(345));case 2:yr(t,Be,Ot);break;case 3:if(Yt(t,n),(n&130023424)===n&&(e=Da+500-ge(),10<e)){if(vi(t,0)!==0)break;if(s=t.suspendedLanes,(s&n)!==n){Me(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=wl(yr.bind(null,t,Be,Ot),e);break}yr(t,Be,Ot);break;case 4:if(Yt(t,n),(n&4194240)===n)break;for(e=t.eventTimes,s=-1;0<n;){var o=31-kt(n);i=1<<o,o=e[o],o>s&&(s=o),n&=~i}if(n=s,n=ge()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*qg(n/1960))-n,10<n){t.timeoutHandle=wl(yr.bind(null,t,Be,Ot),n);break}yr(t,Be,Ot);break;case 5:yr(t,Be,Ot);break;default:throw Error(N(329))}}}return Ke(t,ge()),t.callbackNode===r?nf.bind(null,t):null}function Ul(t,e){var r=Yn;return t.current.memoizedState.isDehydrated&&(Er(t,e).flags|=256),t=$i(t,e),t!==2&&(e=Be,Be=r,e!==null&&Dl(e)),t}function Dl(t){Be===null?Be=t:Be.push.apply(Be,t)}function Gg(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!jt(i(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Yt(t,e){for(e&=~Ua,e&=~Xi,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-kt(e),n=1<<r;t[r]=-1,e&=~n}}function xc(t){if(Y&6)throw Error(N(327));dn();var e=vi(t,0);if(!(e&1))return Ke(t,ge()),null;var r=$i(t,e);if(t.tag!==0&&r===2){var n=dl(t);n!==0&&(e=n,r=Ul(t,n))}if(r===1)throw r=_s,Er(t,0),Yt(t,e),Ke(t,ge()),r;if(r===6)throw Error(N(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,yr(t,Be,Ot),Ke(t,ge()),null}function Fa(t,e){var r=Y;Y|=1;try{return t(e)}finally{Y=r,Y===0&&(yn=ge()+500,Ki&&pr())}}function Ir(t){er!==null&&er.tag===0&&!(Y&6)&&dn();var e=Y;Y|=1;var r=ut.transition,n=X;try{if(ut.transition=null,X=1,t)return t()}finally{X=n,ut.transition=r,Y=e,!(Y&6)&&pr()}}function Va(){Ye=sn.current,le(sn)}function Er(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,kg(r)),xe!==null)for(r=xe.return;r!==null;){var n=r;switch(ka(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&ki();break;case 3:gn(),le(Ge),le($e),Aa();break;case 5:Ta(n);break;case 4:gn();break;case 13:le(ue);break;case 19:le(ue);break;case 10:Ea(n.type._context);break;case 22:case 23:Va()}r=r.return}if(be=t,xe=t=ur(t.current,null),Ne=Ye=e,ke=0,_s=null,Ua=Xi=Ar=0,Be=Yn=null,kr!==null){for(e=0;e<kr.length;e++)if(r=kr[e],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=s,n.next=o}r.pending=n}kr=null}return t}function sf(t,e){do{var r=xe;try{if(ba(),li.current=Ai,Ti){for(var n=he.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Ti=!1}if(Tr=0,je=_e=he=null,Qn=!1,ys=0,Ma.current=null,r===null||r.return===null){ke=1,_s=e,xe=null;break}e:{var i=t,o=r.return,l=r,u=e;if(e=Ne,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var v=lc(o);if(v!==null){v.flags&=-257,ac(v,o,l,i,e),v.mode&1&&oc(i,c,e),e=v,u=c;var y=e.updateQueue;if(y===null){var x=new Set;x.add(u),e.updateQueue=x}else y.add(u);break e}else{if(!(e&1)){oc(i,c,e),Ba();break e}u=Error(N(426))}}else if(ae&&l.mode&1){var k=lc(o);if(k!==null){!(k.flags&65536)&&(k.flags|=256),ac(k,o,l,i,e),Sa(vn(u,l));break e}}i=u=vn(u,l),ke!==4&&(ke=2),Yn===null?Yn=[i]:Yn.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var m=Fh(i,u,e);ec(i,m);break e;case 1:l=u;var p=i.type,g=i.stateNode;if(!(i.flags&128)&&(typeof p.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(lr===null||!lr.has(g)))){i.flags|=65536,e&=-e,i.lanes|=e;var w=Vh(i,l,e);ec(i,w);break e}}i=i.return}while(i!==null)}af(r)}catch(b){e=b,xe===r&&r!==null&&(xe=r=r.return);continue}break}while(!0)}function of(){var t=Ii.current;return Ii.current=Ai,t===null?Ai:t}function Ba(){(ke===0||ke===3||ke===2)&&(ke=4),be===null||!(Ar&268435455)&&!(Xi&268435455)||Yt(be,Ne)}function $i(t,e){var r=Y;Y|=2;var n=of();(be!==t||Ne!==e)&&(Ot=null,Er(t,e));do try{Hg();break}catch(s){sf(t,s)}while(!0);if(ba(),Y=r,Ii.current=n,xe!==null)throw Error(N(261));return be=null,Ne=0,ke}function Hg(){for(;xe!==null;)lf(xe)}function Kg(){for(;xe!==null&&!wm();)lf(xe)}function lf(t){var e=cf(t.alternate,t,Ye);t.memoizedProps=t.pendingProps,e===null?af(t):xe=e,Ma.current=null}function af(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=Fg(r,e),r!==null){r.flags&=32767,xe=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ke=6,xe=null;return}}else if(r=Dg(r,e,Ye),r!==null){xe=r;return}if(e=e.sibling,e!==null){xe=e;return}xe=e=t}while(e!==null);ke===0&&(ke=5)}function yr(t,e,r){var n=X,s=ut.transition;try{ut.transition=null,X=1,Qg(t,e,r,n)}finally{ut.transition=s,X=n}return null}function Qg(t,e,r,n){do dn();while(er!==null);if(Y&6)throw Error(N(327));r=t.finishedWork;var s=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(N(177));t.callbackNode=null,t.callbackPriority=0;var i=r.lanes|r.childLanes;if(Pm(t,i),t===be&&(xe=be=null,Ne=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Hs||(Hs=!0,df(gi,function(){return dn(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=ut.transition,ut.transition=null;var o=X;X=1;var l=Y;Y|=4,Ma.current=null,Bg(t,r),tf(r,t),mg(vl),yi=!!gl,vl=gl=null,t.current=r,Wg(r),xm(),Y=l,X=o,ut.transition=i}else t.current=r;if(Hs&&(Hs=!1,er=t,Ri=s),i=t.pendingLanes,i===0&&(lr=null),Sm(r.stateNode),Ke(t,ge()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)s=e[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(Oi)throw Oi=!1,t=zl,zl=null,t;return Ri&1&&t.tag!==0&&dn(),i=t.pendingLanes,i&1?t===Ml?Xn++:(Xn=0,Ml=t):Xn=0,pr(),null}function dn(){if(er!==null){var t=Fd(Ri),e=ut.transition,r=X;try{if(ut.transition=null,X=16>t?16:t,er===null)var n=!1;else{if(t=er,er=null,Ri=0,Y&6)throw Error(N(331));var s=Y;for(Y|=4,R=t.current;R!==null;){var i=R,o=i.child;if(R.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var c=l[u];for(R=c;R!==null;){var d=R;switch(d.tag){case 0:case 11:case 15:Jn(8,d,i)}var h=d.child;if(h!==null)h.return=d,R=h;else for(;R!==null;){d=R;var f=d.sibling,v=d.return;if(Xh(d),d===c){R=null;break}if(f!==null){f.return=v,R=f;break}R=v}}}var y=i.alternate;if(y!==null){var x=y.child;if(x!==null){y.child=null;do{var k=x.sibling;x.sibling=null,x=k}while(x!==null)}}R=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,R=o;else e:for(;R!==null;){if(i=R,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Jn(9,i,i.return)}var m=i.sibling;if(m!==null){m.return=i.return,R=m;break e}R=i.return}}var p=t.current;for(R=p;R!==null;){o=R;var g=o.child;if(o.subtreeFlags&2064&&g!==null)g.return=o,R=g;else e:for(o=p;R!==null;){if(l=R,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Yi(9,l)}}catch(b){pe(l,l.return,b)}if(l===o){R=null;break e}var w=l.sibling;if(w!==null){w.return=l.return,R=w;break e}R=l.return}}if(Y=s,pr(),Nt&&typeof Nt.onPostCommitFiberRoot=="function")try{Nt.onPostCommitFiberRoot(Bi,t)}catch{}n=!0}return n}finally{X=r,ut.transition=e}}return!1}function _c(t,e,r){e=vn(r,e),e=Fh(t,e,1),t=or(t,e,1),e=Me(),t!==null&&(js(t,1,e),Ke(t,e))}function pe(t,e,r){if(t.tag===3)_c(t,t,r);else for(;e!==null;){if(e.tag===3){_c(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(lr===null||!lr.has(n))){t=vn(r,t),t=Vh(e,t,1),e=or(e,t,1),t=Me(),e!==null&&(js(e,1,t),Ke(e,t));break}}e=e.return}}function Jg(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=Me(),t.pingedLanes|=t.suspendedLanes&r,be===t&&(Ne&r)===r&&(ke===4||ke===3&&(Ne&130023424)===Ne&&500>ge()-Da?Er(t,0):Ua|=r),Ke(t,e)}function uf(t,e){e===0&&(t.mode&1?(e=zs,zs<<=1,!(zs&130023424)&&(zs=4194304)):e=1);var r=Me();t=Ft(t,e),t!==null&&(js(t,e,r),Ke(t,r))}function Yg(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),uf(t,r)}function Xg(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,s=t.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(N(314))}n!==null&&n.delete(e),uf(t,r)}var cf;cf=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ge.current)qe=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return qe=!1,Ug(t,e,r);qe=!!(t.flags&131072)}else qe=!1,ae&&e.flags&1048576&&fh(e,bi,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;ui(t,e),t=e.pendingProps;var s=fn(e,$e.current);cn(e,r),s=Oa(null,e,n,t,s,r);var i=Ra();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,He(n)?(i=!0,Si(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Na(e),s.updater=Ji,e.stateNode=s,s._reactInternals=e,El(e,n,t,r),e=Pl(null,e,n,!0,i,r)):(e.tag=0,ae&&i&&_a(e),ze(null,e,s,r),e=e.child),e;case 16:n=e.elementType;e:{switch(ui(t,e),t=e.pendingProps,s=n._init,n=s(n._payload),e.type=n,s=e.tag=ev(n),t=yt(n,t),s){case 0:e=Nl(null,e,n,t,r);break e;case 1:e=dc(null,e,n,t,r);break e;case 11:e=uc(null,e,n,t,r);break e;case 14:e=cc(null,e,n,yt(n.type,t),r);break e}throw Error(N(306,n,""))}return e;case 0:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:yt(n,s),Nl(t,e,n,s,r);case 1:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:yt(n,s),dc(t,e,n,s,r);case 3:e:{if(Gh(e),t===null)throw Error(N(387));n=e.pendingProps,i=e.memoizedState,s=i.element,wh(t,e),Ni(e,n,null,r);var o=e.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=vn(Error(N(423)),e),e=hc(t,e,n,r,s);break e}else if(n!==s){s=vn(Error(N(424)),e),e=hc(t,e,n,r,s);break e}else for(et=ir(e.stateNode.containerInfo.firstChild),tt=e,ae=!0,_t=null,r=vh(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(pn(),n===s){e=Vt(t,e,r);break e}ze(t,e,n,r)}e=e.child}return e;case 5:return xh(e),t===null&&Sl(e),n=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,yl(n,s)?o=null:i!==null&&yl(n,i)&&(e.flags|=32),qh(t,e),ze(t,e,o,r),e.child;case 6:return t===null&&Sl(e),null;case 13:return Hh(t,e,r);case 4:return Pa(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=mn(e,null,n,r):ze(t,e,n,r),e.child;case 11:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:yt(n,s),uc(t,e,n,s,r);case 7:return ze(t,e,e.pendingProps,r),e.child;case 8:return ze(t,e,e.pendingProps.children,r),e.child;case 12:return ze(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,ne(Ei,n._currentValue),n._currentValue=o,i!==null)if(jt(i.value,o)){if(i.children===s.children&&!Ge.current){e=Vt(t,e,r);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var u=l.firstContext;u!==null;){if(u.context===n){if(i.tag===1){u=Mt(-1,r&-r),u.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?u.next=u:(u.next=d.next,d.next=u),c.pending=u}}i.lanes|=r,u=i.alternate,u!==null&&(u.lanes|=r),jl(i.return,r,e),l.lanes|=r;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(N(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),jl(o,r,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}ze(t,e,s.children,r),e=e.child}return e;case 9:return s=e.type,n=e.pendingProps.children,cn(e,r),s=dt(s),n=n(s),e.flags|=1,ze(t,e,n,r),e.child;case 14:return n=e.type,s=yt(n,e.pendingProps),s=yt(n.type,s),cc(t,e,n,s,r);case 15:return Bh(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:yt(n,s),ui(t,e),e.tag=1,He(n)?(t=!0,Si(e)):t=!1,cn(e,r),Dh(e,n,s),El(e,n,s,r),Pl(null,e,n,!0,t,r);case 19:return Kh(t,e,r);case 22:return Wh(t,e,r)}throw Error(N(156,e.tag))};function df(t,e){return zd(t,e)}function Zg(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function at(t,e,r,n){return new Zg(t,e,r,n)}function Wa(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ev(t){if(typeof t=="function")return Wa(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ua)return 11;if(t===ca)return 14}return 2}function ur(t,e){var r=t.alternate;return r===null?(r=at(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function hi(t,e,r,n,s,i){var o=2;if(n=t,typeof t=="function")Wa(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Kr:return Cr(r.children,s,i,e);case aa:o=8,s|=8;break;case Jo:return t=at(12,r,e,s|2),t.elementType=Jo,t.lanes=i,t;case Yo:return t=at(13,r,e,s),t.elementType=Yo,t.lanes=i,t;case Xo:return t=at(19,r,e,s),t.elementType=Xo,t.lanes=i,t;case xd:return Zi(r,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case yd:o=10;break e;case wd:o=9;break e;case ua:o=11;break e;case ca:o=14;break e;case Ht:o=16,n=null;break e}throw Error(N(130,t==null?t:typeof t,""))}return e=at(o,r,e,s),e.elementType=t,e.type=n,e.lanes=i,e}function Cr(t,e,r,n){return t=at(7,t,n,e),t.lanes=r,t}function Zi(t,e,r,n){return t=at(22,t,n,e),t.elementType=xd,t.lanes=r,t.stateNode={isHidden:!1},t}function Mo(t,e,r){return t=at(6,t,null,e),t.lanes=r,t}function Uo(t,e,r){return e=at(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function tv(t,e,r,n,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=wo(0),this.expirationTimes=wo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wo(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function qa(t,e,r,n,s,i,o,l,u){return t=new tv(t,e,r,l,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=at(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Na(i),t}function rv(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Hr,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function hf(t){if(!t)return dr;t=t._reactInternals;e:{if($r(t)!==t||t.tag!==1)throw Error(N(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(He(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(N(171))}if(t.tag===1){var r=t.type;if(He(r))return dh(t,r,e)}return e}function ff(t,e,r,n,s,i,o,l,u){return t=qa(r,n,!0,t,s,i,o,l,u),t.context=hf(null),r=t.current,n=Me(),s=ar(r),i=Mt(n,s),i.callback=e??null,or(r,i,s),t.current.lanes=s,js(t,s,n),Ke(t,n),t}function eo(t,e,r,n){var s=e.current,i=Me(),o=ar(s);return r=hf(r),e.context===null?e.context=r:e.pendingContext=r,e=Mt(i,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=or(s,e,o),t!==null&&(St(t,s,o,i),oi(t,s,o)),o}function Li(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function kc(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function Ga(t,e){kc(t,e),(t=t.alternate)&&kc(t,e)}function nv(){return null}var pf=typeof reportError=="function"?reportError:function(t){console.error(t)};function Ha(t){this._internalRoot=t}to.prototype.render=Ha.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(N(409));eo(t,e,null,null)};to.prototype.unmount=Ha.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ir(function(){eo(null,t,null,null)}),e[Dt]=null}};function to(t){this._internalRoot=t}to.prototype.unstable_scheduleHydration=function(t){if(t){var e=Wd();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Jt.length&&e!==0&&e<Jt[r].priority;r++);Jt.splice(r,0,t),r===0&&Gd(t)}};function Ka(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ro(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Sc(){}function sv(t,e,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var c=Li(o);i.call(c)}}var o=ff(e,n,t,0,null,!1,!1,"",Sc);return t._reactRootContainer=o,t[Dt]=o.current,fs(t.nodeType===8?t.parentNode:t),Ir(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var c=Li(u);l.call(c)}}var u=qa(t,0,!1,null,null,!1,!1,"",Sc);return t._reactRootContainer=u,t[Dt]=u.current,fs(t.nodeType===8?t.parentNode:t),Ir(function(){eo(e,u,r,n)}),u}function no(t,e,r,n,s){var i=r._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var u=Li(o);l.call(u)}}eo(e,o,t,s)}else o=sv(r,e,t,s,n);return Li(o)}Vd=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Fn(e.pendingLanes);r!==0&&(fa(e,r|1),Ke(e,ge()),!(Y&6)&&(yn=ge()+500,pr()))}break;case 13:Ir(function(){var n=Ft(t,1);if(n!==null){var s=Me();St(n,t,1,s)}}),Ga(t,1)}};pa=function(t){if(t.tag===13){var e=Ft(t,134217728);if(e!==null){var r=Me();St(e,t,134217728,r)}Ga(t,134217728)}};Bd=function(t){if(t.tag===13){var e=ar(t),r=Ft(t,e);if(r!==null){var n=Me();St(r,t,e,n)}Ga(t,e)}};Wd=function(){return X};qd=function(t,e){var r=X;try{return X=t,e()}finally{X=r}};al=function(t,e,r){switch(e){case"input":if(tl(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var s=Hi(n);if(!s)throw Error(N(90));kd(n),tl(n,s)}}}break;case"textarea":jd(t,r);break;case"select":e=r.value,e!=null&&on(t,!!r.multiple,e,!1)}};Ad=Fa;Id=Ir;var iv={usingClientEntryPoint:!1,Events:[Es,Xr,Hi,Pd,Td,Fa]},Rn={findFiberByHostInstance:_r,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ov={bundleType:Rn.bundleType,version:Rn.version,rendererPackageName:Rn.rendererPackageName,rendererConfig:Rn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Bt.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=$d(t),t===null?null:t.stateNode},findFiberByHostInstance:Rn.findFiberByHostInstance||nv,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ks=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ks.isDisabled&&Ks.supportsFiber)try{Bi=Ks.inject(ov),Nt=Ks}catch{}}nt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=iv;nt.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ka(e))throw Error(N(200));return rv(t,e,null,r)};nt.createRoot=function(t,e){if(!Ka(t))throw Error(N(299));var r=!1,n="",s=pf;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=qa(t,1,!1,null,null,r,!1,n,s),t[Dt]=e.current,fs(t.nodeType===8?t.parentNode:t),new Ha(e)};nt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(N(188)):(t=Object.keys(t).join(","),Error(N(268,t)));return t=$d(e),t=t===null?null:t.stateNode,t};nt.flushSync=function(t){return Ir(t)};nt.hydrate=function(t,e,r){if(!ro(e))throw Error(N(200));return no(null,t,e,!0,r)};nt.hydrateRoot=function(t,e,r){if(!Ka(t))throw Error(N(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",o=pf;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=ff(e,null,t,1,r??null,s,!1,i,o),t[Dt]=e.current,fs(t),n)for(t=0;t<n.length;t++)r=n[t],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new to(e)};nt.render=function(t,e,r){if(!ro(e))throw Error(N(200));return no(null,t,e,!1,r)};nt.unmountComponentAtNode=function(t){if(!ro(t))throw Error(N(40));return t._reactRootContainer?(Ir(function(){no(null,null,t,!1,function(){t._reactRootContainer=null,t[Dt]=null})}),!0):!1};nt.unstable_batchedUpdates=Fa;nt.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!ro(r))throw Error(N(200));if(t==null||t._reactInternals===void 0)throw Error(N(38));return no(t,e,r,!1,n)};nt.version="18.3.1-next-f1338f8080-20240426";function mf(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(mf)}catch(t){console.error(t)}}mf(),pd.exports=nt;var lv=pd.exports,jc=lv;Ko.createRoot=jc.createRoot,Ko.hydrateRoot=jc.hydrateRoot;const av="modulepreload",uv=function(t){return"/"+t},bc={},Ns=function(e,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(r.map(u=>{if(u=uv(u),u in bc)return;bc[u]=!0;const c=u.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${d}`))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":av,c||(h.as="script"),h.crossOrigin="",h.href=u,l&&h.setAttribute("nonce",l),document.head.appendChild(h),c)return new Promise((f,v)=>{h.addEventListener("load",f),h.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})};var $n={};const cv=()=>{const[t,e]=j.useState(null),[r,n]=j.useState(!1),[s,i]=j.useState(""),o=async()=>{const u=s||$n.REACT_APP_QWEN_API_KEY;if(!u){e({success:!1,error:"API key not found. Please set REACT_APP_QWEN_API_KEY in .env file or enter it below."});return}n(!0),e(null);try{console.log("Testing Qwen API..."),console.log("API Key (first 8 chars):",u.substring(0,8)+"...");const c=await fetch("https://dashscope.aliyuncs.com/api/v1/services/aigc/text-generation/generation",{method:"POST",headers:{Authorization:`Bearer ${u}`,"Content-Type":"application/json","X-DashScope-SSE":"disable"},body:JSON.stringify({model:"qwen-plus",input:{messages:[{role:"system",content:"你是专业的K12数学老师，请用清晰的中文解释数学概念。"},{role:"user",content:"请解答这个简单的数学问题：2 + 3 = ? 并解释计算过程。"}]},parameters:{temperature:.1,max_tokens:200,top_p:.8}})});console.log("Response status:",c.status),console.log("Response headers:",Object.fromEntries(c.headers.entries()));const d=await c.json();console.log("Response data:",d),c.ok&&d.output?e({success:!0,data:{content:d.output.text,usage:d.usage,model:"qwen-plus",requestId:d.request_id,status:c.status}}):e({success:!1,error:d.message||`HTTP ${c.status}: ${c.statusText}`,code:d.code,requestId:d.request_id,details:d})}catch(c){console.error("API Test Error:",c),e({success:!1,error:c.message,type:c.name})}finally{n(!1)}},l=async()=>{const u=s||$n.REACT_APP_QWEN_API_KEY;if(!u){e({success:!1,error:"API key not configured"});return}n(!0),e(null);try{console.log("Testing math problem solving...");const d=await fetch("https://dashscope.aliyuncs.com/api/v1/services/aigc/text-generation/generation",{method:"POST",headers:{Authorization:`Bearer ${u}`,"Content-Type":"application/json"},body:JSON.stringify({model:"qwen-plus",input:{messages:[{role:"system",content:"你是专业的K12数学老师，请严格按照要求的JSON格式回答数学问题。"},{role:"user",content:`请解答这个K12数学问题，并用JSON格式回答：

题目：解方程 2x + 5 = 15

请按以下格式回答：
{
  "analysis": "问题分析",
  "steps": [
    {"stepNumber": 1, "description": "移项", "operation": "2x = 15 - 5", "result": "2x = 10"},
    {"stepNumber": 2, "description": "系数化1", "operation": "x = 10 ÷ 2", "result": "x = 5"}
  ],
  "finalAnswer": "x = 5",
  "verification": "验证：2×5 + 5 = 15 ✓",
  "concepts": ["一元一次方程", "移项", "系数化1"]
}`}]},parameters:{temperature:.05,max_tokens:1e3,top_p:.9}})}),h=await d.json();if(console.log("Math test response:",h),d.ok&&h.output){let f=null;try{const v=h.output.text.match(/\{[\s\S]*\}/);v&&(f=JSON.parse(v[0]))}catch(v){console.warn("JSON parsing failed:",v)}e({success:!0,data:{rawResponse:h.output.text,parsedSolution:f,usage:h.usage,model:"qwen-plus",testType:"math_solving"}})}else e({success:!1,error:h.message||"Math test failed",code:h.code})}catch(c){console.error("Math test error:",c),e({success:!1,error:c.message})}finally{n(!1)}};return a.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto",padding:"20px",fontFamily:"Arial, sans-serif"},children:[a.jsx("h1",{style:{textAlign:"center",color:"#333",marginBottom:"30px"},children:"Qwen API 连接测试"}),a.jsxs("div",{style:{marginBottom:"20px",padding:"20px",border:"1px solid #ddd",borderRadius:"8px",backgroundColor:"#f9f9f9"},children:[a.jsx("h3",{style:{marginTop:0,color:"#555"},children:"API Key 配置"}),a.jsxs("p",{style:{fontSize:"14px",color:"#666"},children:["环境变量状态: ",$n.REACT_APP_QWEN_API_KEY?`已配置 (${$n.REACT_APP_QWEN_API_KEY.substring(0,8)}...)`:"未配置"]}),!$n.REACT_APP_QWEN_API_KEY&&a.jsxs("div",{style:{marginTop:"10px"},children:[a.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"bold"},children:"临时输入 API Key:"}),a.jsx("input",{type:"password",value:s,onChange:u=>i(u.target.value),placeholder:"sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx",style:{width:"100%",padding:"8px",border:"1px solid #ccc",borderRadius:"4px",fontSize:"14px"}})]})]}),a.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"20px"},children:[a.jsx("button",{onClick:o,disabled:r,style:{flex:1,padding:"12px 20px",backgroundColor:r?"#ccc":"#007bff",color:"white",border:"none",borderRadius:"5px",cursor:r?"not-allowed":"pointer",fontSize:"16px"},children:r?"测试中...":"基础连接测试"}),a.jsx("button",{onClick:l,disabled:r,style:{flex:1,padding:"12px 20px",backgroundColor:r?"#ccc":"#28a745",color:"white",border:"none",borderRadius:"5px",cursor:r?"not-allowed":"pointer",fontSize:"16px"},children:r?"测试中...":"数学解题测试"})]}),r&&a.jsxs("div",{style:{textAlign:"center",padding:"20px",backgroundColor:"#e7f3ff",borderRadius:"8px",marginBottom:"20px"},children:[a.jsx("div",{style:{display:"inline-block",width:"20px",height:"20px",border:"3px solid #f3f3f3",borderTop:"3px solid #007bff",borderRadius:"50%",animation:"spin 1s linear infinite",marginRight:"10px"}}),"正在测试 API 连接..."]}),t&&a.jsxs("div",{style:{padding:"20px",border:"1px solid #ddd",borderRadius:"8px",backgroundColor:t.success?"#d4edda":"#f8d7da",marginBottom:"20px"},children:[a.jsxs("h3",{style:{marginTop:0,color:t.success?"#155724":"#721c24"},children:["测试结果: ",t.success?"✅ 成功":"❌ 失败"]}),t.success?a.jsxs("div",{children:[t.data.content&&a.jsxs("div",{style:{marginBottom:"15px"},children:[a.jsx("strong",{children:"AI 回答:"}),a.jsx("div",{style:{padding:"10px",backgroundColor:"rgba(255,255,255,0.8)",borderRadius:"4px",marginTop:"5px",whiteSpace:"pre-wrap"},children:t.data.content})]}),t.data.parsedSolution&&a.jsxs("div",{style:{marginBottom:"15px"},children:[a.jsx("strong",{children:"解析的数学解答:"}),a.jsxs("div",{style:{padding:"10px",backgroundColor:"rgba(255,255,255,0.8)",borderRadius:"4px",marginTop:"5px"},children:[a.jsxs("div",{children:[a.jsx("strong",{children:"分析:"})," ",t.data.parsedSolution.analysis]}),a.jsxs("div",{children:[a.jsx("strong",{children:"最终答案:"})," ",t.data.parsedSolution.finalAnswer]}),t.data.parsedSolution.steps&&a.jsxs("div",{children:[a.jsx("strong",{children:"解题步骤:"}),t.data.parsedSolution.steps.map((u,c)=>a.jsxs("div",{style:{marginLeft:"20px",marginTop:"5px"},children:["步骤",u.stepNumber,": ",u.description," → ",u.result]},c))]})]})]}),t.data.usage&&a.jsxs("div",{style:{fontSize:"12px",color:"#666"},children:[a.jsx("strong",{children:"Token 使用情况:"}),"输入 ",t.data.usage.input_tokens," + 输出 ",t.data.usage.output_tokens," = 总计 ",t.data.usage.total_tokens," tokens"]})]}):a.jsxs("div",{children:[a.jsx("strong",{children:"错误信息:"})," ",t.error,t.code&&a.jsxs("div",{children:[a.jsx("strong",{children:"错误代码:"})," ",t.code]}),t.details&&a.jsxs("details",{style:{marginTop:"10px"},children:[a.jsx("summary",{children:"详细信息"}),a.jsx("pre",{style:{fontSize:"12px",backgroundColor:"rgba(255,255,255,0.8)",padding:"10px",borderRadius:"4px",overflow:"auto"},children:JSON.stringify(t.details,null,2)})]})]})]}),a.jsxs("div",{style:{padding:"20px",backgroundColor:"#fff3cd",border:"1px solid #ffeaa7",borderRadius:"8px"},children:[a.jsx("h3",{style:{marginTop:0,color:"#856404"},children:"使用说明:"}),a.jsxs("ol",{style:{paddingLeft:"20px",color:"#856404"},children:[a.jsxs("li",{children:["确保在项目根目录有 ",a.jsx("code",{children:".env"})," 文件"]}),a.jsxs("li",{children:["在 ",a.jsx("code",{children:".env"})," 文件中添加: ",a.jsx("code",{children:"REACT_APP_QWEN_API_KEY=你的API密钥"})]}),a.jsx("li",{children:"重启开发服务器"}),a.jsx("li",{children:"或者在上面临时输入API密钥进行测试"})]})]}),a.jsx("style",{jsx:!0,children:`
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
      `})]})};function gf(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(r=gf(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function dv(){for(var t,e,r=0,n="",s=arguments.length;r<s;r++)(t=arguments[r])&&(e=gf(t))&&(n&&(n+=" "),n+=e);return n}function hv(){for(var t=0,e,r,n="";t<arguments.length;)(e=arguments[t++])&&(r=vf(e))&&(n&&(n+=" "),n+=r);return n}function vf(t){if(typeof t=="string")return t;for(var e,r="",n=0;n<t.length;n++)t[n]&&(e=vf(t[n]))&&(r&&(r+=" "),r+=e);return r}var Qa="-";function fv(t){var e=mv(t),r=t.conflictingClassGroups,n=t.conflictingClassGroupModifiers,s=n===void 0?{}:n;function i(l){var u=l.split(Qa);return u[0]===""&&u.length!==1&&u.shift(),yf(u,e)||pv(l)}function o(l,u){var c=r[l]||[];return u&&s[l]?[].concat(c,s[l]):c}return{getClassGroupId:i,getConflictingClassGroupIds:o}}function yf(t,e){var o;if(t.length===0)return e.classGroupId;var r=t[0],n=e.nextPart.get(r),s=n?yf(t.slice(1),n):void 0;if(s)return s;if(e.validators.length!==0){var i=t.join(Qa);return(o=e.validators.find(function(l){var u=l.validator;return u(i)}))==null?void 0:o.classGroupId}}var Ec=/^\[(.+)\]$/;function pv(t){if(Ec.test(t)){var e=Ec.exec(t)[1],r=e==null?void 0:e.substring(0,e.indexOf(":"));if(r)return"arbitrary.."+r}}function mv(t){var e=t.theme,r=t.prefix,n={nextPart:new Map,validators:[]},s=vv(Object.entries(t.classGroups),r);return s.forEach(function(i){var o=i[0],l=i[1];Fl(l,n,o,e)}),n}function Fl(t,e,r,n){t.forEach(function(s){if(typeof s=="string"){var i=s===""?e:Cc(e,s);i.classGroupId=r;return}if(typeof s=="function"){if(gv(s)){Fl(s(n),e,r,n);return}e.validators.push({validator:s,classGroupId:r});return}Object.entries(s).forEach(function(o){var l=o[0],u=o[1];Fl(u,Cc(e,l),r,n)})})}function Cc(t,e){var r=t;return e.split(Qa).forEach(function(n){r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r}function gv(t){return t.isThemeGetter}function vv(t,e){return e?t.map(function(r){var n=r[0],s=r[1],i=s.map(function(o){return typeof o=="string"?e+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(function(l){var u=l[0],c=l[1];return[e+u,c]})):o});return[n,i]}):t}function yv(t){if(t<1)return{get:function(){},set:function(){}};var e=0,r=new Map,n=new Map;function s(i,o){r.set(i,o),e++,e>t&&(e=0,n=r,r=new Map)}return{get:function(o){var l=r.get(o);if(l!==void 0)return l;if((l=n.get(o))!==void 0)return s(o,l),l},set:function(o,l){r.has(o)?r.set(o,l):s(o,l)}}}var wf="!";function wv(t){var e=t.separator||":",r=e.length===1,n=e[0],s=e.length;return function(o){for(var l=[],u=0,c=0,d,h=0;h<o.length;h++){var f=o[h];if(u===0){if(f===n&&(r||o.slice(h,h+s)===e)){l.push(o.slice(c,h)),c=h+s;continue}if(f==="/"){d=h;continue}}f==="["?u++:f==="]"&&u--}var v=l.length===0?o:o.substring(c),y=v.startsWith(wf),x=y?v.substring(1):v,k=d&&d>c?d-c:void 0;return{modifiers:l,hasImportantModifier:y,baseClassName:x,maybePostfixModifierPosition:k}}}function xv(t){if(t.length<=1)return t;var e=[],r=[];return t.forEach(function(n){var s=n[0]==="[";s?(e.push.apply(e,r.sort().concat([n])),r=[]):r.push(n)}),e.push.apply(e,r.sort()),e}function _v(t){return{cache:yv(t.cacheSize),splitModifiers:wv(t),...fv(t)}}var kv=/\s+/;function Sv(t,e){var r=e.splitModifiers,n=e.getClassGroupId,s=e.getConflictingClassGroupIds,i=new Set;return t.trim().split(kv).map(function(o){var l=r(o),u=l.modifiers,c=l.hasImportantModifier,d=l.baseClassName,h=l.maybePostfixModifierPosition,f=n(h?d.substring(0,h):d),v=!!h;if(!f){if(!h)return{isTailwindClass:!1,originalClassName:o};if(f=n(d),!f)return{isTailwindClass:!1,originalClassName:o};v=!1}var y=xv(u).join(":"),x=c?y+wf:y;return{isTailwindClass:!0,modifierId:x,classGroupId:f,originalClassName:o,hasPostfixModifier:v}}).reverse().filter(function(o){if(!o.isTailwindClass)return!0;var l=o.modifierId,u=o.classGroupId,c=o.hasPostfixModifier,d=l+u;return i.has(d)?!1:(i.add(d),s(u,c).forEach(function(h){return i.add(l+h)}),!0)}).reverse().map(function(o){return o.originalClassName}).join(" ")}function jv(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n,s,i,o=l;function l(c){var d=e[0],h=e.slice(1),f=h.reduce(function(v,y){return y(v)},d());return n=_v(f),s=n.cache.get,i=n.cache.set,o=u,u(c)}function u(c){var d=s(c);if(d)return d;var h=Sv(c,n);return i(c,h),h}return function(){return o(hv.apply(null,arguments))}}function ie(t){var e=function(n){return n[t]||[]};return e.isThemeGetter=!0,e}var xf=/^\[(?:([a-z-]+):)?(.+)\]$/i,bv=/^\d+\/\d+$/,Ev=new Set(["px","full","screen"]),Cv=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Nv=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Pv=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function gt(t){return jr(t)||Ev.has(t)||bv.test(t)||Vl(t)}function Vl(t){return Lr(t,"length",$v)}function Tv(t){return Lr(t,"size",_f)}function Av(t){return Lr(t,"position",_f)}function Iv(t){return Lr(t,"url",Lv)}function Qs(t){return Lr(t,"number",jr)}function jr(t){return!Number.isNaN(Number(t))}function Ov(t){return t.endsWith("%")&&jr(t.slice(0,-1))}function Ln(t){return Nc(t)||Lr(t,"number",Nc)}function H(t){return xf.test(t)}function zn(){return!0}function qt(t){return Cv.test(t)}function Rv(t){return Lr(t,"",zv)}function Lr(t,e,r){var n=xf.exec(t);return n?n[1]?n[1]===e:r(n[2]):!1}function $v(t){return Nv.test(t)}function _f(){return!1}function Lv(t){return t.startsWith("url(")}function Nc(t){return Number.isInteger(Number(t))}function zv(t){return Pv.test(t)}function Mv(){var t=ie("colors"),e=ie("spacing"),r=ie("blur"),n=ie("brightness"),s=ie("borderColor"),i=ie("borderRadius"),o=ie("borderSpacing"),l=ie("borderWidth"),u=ie("contrast"),c=ie("grayscale"),d=ie("hueRotate"),h=ie("invert"),f=ie("gap"),v=ie("gradientColorStops"),y=ie("gradientColorStopPositions"),x=ie("inset"),k=ie("margin"),m=ie("opacity"),p=ie("padding"),g=ie("saturate"),w=ie("scale"),b=ie("sepia"),E=ie("skew"),P=ie("space"),O=ie("translate"),J=function(){return["auto","contain","none"]},M=function(){return["auto","hidden","clip","visible","scroll"]},te=function(){return["auto",H,e]},K=function(){return[H,e]},Te=function(){return["",gt]},ft=function(){return["auto",jr,H]},Qe=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},it=function(){return["solid","dashed","dotted","double","none"]},Le=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},A=function(){return["start","end","center","between","around","evenly","stretch"]},z=function(){return["","0",H]},S=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},T=function(){return[jr,Qs]},D=function(){return[jr,H]};return{cacheSize:500,theme:{colors:[zn],spacing:[gt],blur:["none","",qt,H],brightness:T(),borderColor:[t],borderRadius:["none","","full",qt,H],borderSpacing:K(),borderWidth:Te(),contrast:T(),grayscale:z(),hueRotate:D(),invert:z(),gap:K(),gradientColorStops:[t],gradientColorStopPositions:[Ov,Vl],inset:te(),margin:te(),opacity:T(),padding:K(),saturate:T(),scale:T(),sepia:z(),skew:D(),space:K(),translate:K()},classGroups:{aspect:[{aspect:["auto","square","video",H]}],container:["container"],columns:[{columns:[qt]}],"break-after":[{"break-after":S()}],"break-before":[{"break-before":S()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(Qe(),[H])}],overflow:[{overflow:M()}],"overflow-x":[{"overflow-x":M()}],"overflow-y":[{"overflow-y":M()}],overscroll:[{overscroll:J()}],"overscroll-x":[{"overscroll-x":J()}],"overscroll-y":[{"overscroll-y":J()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[x]}],"inset-x":[{"inset-x":[x]}],"inset-y":[{"inset-y":[x]}],start:[{start:[x]}],end:[{end:[x]}],top:[{top:[x]}],right:[{right:[x]}],bottom:[{bottom:[x]}],left:[{left:[x]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Ln]}],basis:[{basis:te()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",H]}],grow:[{grow:z()}],shrink:[{shrink:z()}],order:[{order:["first","last","none",Ln]}],"grid-cols":[{"grid-cols":[zn]}],"col-start-end":[{col:["auto",{span:["full",Ln]},H]}],"col-start":[{"col-start":ft()}],"col-end":[{"col-end":ft()}],"grid-rows":[{"grid-rows":[zn]}],"row-start-end":[{row:["auto",{span:[Ln]},H]}],"row-start":[{"row-start":ft()}],"row-end":[{"row-end":ft()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",H]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",H]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal"].concat(A())}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat(A(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(A(),["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[p]}],px:[{px:[p]}],py:[{py:[p]}],ps:[{ps:[p]}],pe:[{pe:[p]}],pt:[{pt:[p]}],pr:[{pr:[p]}],pb:[{pb:[p]}],pl:[{pl:[p]}],m:[{m:[k]}],mx:[{mx:[k]}],my:[{my:[k]}],ms:[{ms:[k]}],me:[{me:[k]}],mt:[{mt:[k]}],mr:[{mr:[k]}],mb:[{mb:[k]}],ml:[{ml:[k]}],"space-x":[{"space-x":[P]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[P]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",H,e]}],"min-w":[{"min-w":["min","max","fit",H,gt]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[qt]},qt,H]}],h:[{h:[H,e,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",H,gt]}],"max-h":[{"max-h":[H,e,"min","max","fit"]}],"font-size":[{text:["base",qt,Vl]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Qs]}],"font-family":[{font:[zn]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",H]}],"line-clamp":[{"line-clamp":["none",jr,Qs]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",H,gt]}],"list-image":[{"list-image":["none",H]}],"list-style-type":[{list:["none","disc","decimal",H]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[m]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[m]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(it(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",gt]}],"underline-offset":[{"underline-offset":["auto",H,gt]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:K()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",H]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",H]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[m]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(Qe(),[Av])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Tv]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},Iv]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[y]}],"gradient-via-pos":[{via:[y]}],"gradient-to-pos":[{to:[y]}],"gradient-from":[{from:[v]}],"gradient-via":[{via:[v]}],"gradient-to":[{to:[v]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[m]}],"border-style":[{border:[].concat(it(),["hidden"])}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[m]}],"divide-style":[{divide:it()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:[""].concat(it())}],"outline-offset":[{"outline-offset":[H,gt]}],"outline-w":[{outline:[gt]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:Te()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[m]}],"ring-offset-w":[{"ring-offset":[gt]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",qt,Rv]}],"shadow-color":[{shadow:[zn]}],opacity:[{opacity:[m]}],"mix-blend":[{"mix-blend":Le()}],"bg-blend":[{"bg-blend":Le()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[u]}],"drop-shadow":[{"drop-shadow":["","none",qt,H]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[g]}],sepia:[{sepia:[b]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[u]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[m]}],"backdrop-saturate":[{"backdrop-saturate":[g]}],"backdrop-sepia":[{"backdrop-sepia":[b]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",H]}],duration:[{duration:D()}],ease:[{ease:["linear","in","out","in-out",H]}],delay:[{delay:D()}],animate:[{animate:["none","spin","ping","pulse","bounce",H]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[w]}],"scale-x":[{"scale-x":[w]}],"scale-y":[{"scale-y":[w]}],rotate:[{rotate:[Ln,H]}],"translate-x":[{"translate-x":[O]}],"translate-y":[{"translate-y":[O]}],"skew-x":[{"skew-x":[E]}],"skew-y":[{"skew-y":[E]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",H]}],accent:[{accent:["auto",t]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",H]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":K()}],"scroll-mx":[{"scroll-mx":K()}],"scroll-my":[{"scroll-my":K()}],"scroll-ms":[{"scroll-ms":K()}],"scroll-me":[{"scroll-me":K()}],"scroll-mt":[{"scroll-mt":K()}],"scroll-mr":[{"scroll-mr":K()}],"scroll-mb":[{"scroll-mb":K()}],"scroll-ml":[{"scroll-ml":K()}],"scroll-p":[{"scroll-p":K()}],"scroll-px":[{"scroll-px":K()}],"scroll-py":[{"scroll-py":K()}],"scroll-ps":[{"scroll-ps":K()}],"scroll-pe":[{"scroll-pe":K()}],"scroll-pt":[{"scroll-pt":K()}],"scroll-pr":[{"scroll-pr":K()}],"scroll-pb":[{"scroll-pb":K()}],"scroll-pl":[{"scroll-pl":K()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",H]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[gt,Qs]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var Uv=jv(Mv);function Fe(...t){return Uv(dv(t))}const ce=j.forwardRef(({className:t,...e},r)=>a.jsx("div",{ref:r,className:Fe("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));ce.displayName="Card";const Xe=j.forwardRef(({className:t,...e},r)=>a.jsx("div",{ref:r,className:Fe("flex flex-col space-y-1.5 p-6",t),...e}));Xe.displayName="CardHeader";const Ze=j.forwardRef(({className:t,...e},r)=>a.jsx("h3",{ref:r,className:Fe("text-2xl font-semibold leading-none tracking-tight",t),...e}));Ze.displayName="CardTitle";const Dv=j.forwardRef(({className:t,...e},r)=>a.jsx("p",{ref:r,className:Fe("text-sm text-muted-foreground",t),...e}));Dv.displayName="CardDescription";const de=j.forwardRef(({className:t,...e},r)=>a.jsx("div",{ref:r,className:Fe("p-6 pt-0",t),...e}));de.displayName="CardContent";const Fv=j.forwardRef(({className:t,...e},r)=>a.jsx("div",{ref:r,className:Fe("flex items-center p-6 pt-0",t),...e}));Fv.displayName="CardFooter";function V({className:t,variant:e="default",size:r="default",...n}){const s={default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},i={default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"};return a.jsx("button",{className:Fe("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",s[e],i[r],t),...n})}const kf=j.forwardRef(({className:t,...e},r)=>a.jsx("textarea",{className:Fe("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...e}));kf.displayName="Textarea";const tr=j.forwardRef(({className:t,variant:e="default",...r},n)=>{const s={default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"};return a.jsx("div",{ref:n,className:Fe("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",s[e],t),...r})});tr.displayName="Badge";function Vv(t,e=[]){let r=[];function n(i,o){const l=j.createContext(o),u=r.length;r=[...r,o];const c=h=>{var m;const{scope:f,children:v,...y}=h,x=((m=f==null?void 0:f[t])==null?void 0:m[u])||l,k=j.useMemo(()=>y,Object.values(y));return a.jsx(x.Provider,{value:k,children:v})};c.displayName=i+"Provider";function d(h,f){var x;const v=((x=f==null?void 0:f[t])==null?void 0:x[u])||l,y=j.useContext(v);if(y)return y;if(o!==void 0)return o;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[c,d]}const s=()=>{const i=r.map(o=>j.createContext(o));return function(l){const u=(l==null?void 0:l[t])||i;return j.useMemo(()=>({[`__scope${t}`]:{...l,[t]:u}}),[l,u])}};return s.scopeName=t,[n,Bv(s,...e)]}function Bv(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const n=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=n.reduce((l,{useScope:u,scopeName:c})=>{const h=u(i)[`__scope${c}`];return{...l,...h}},{});return j.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return r.scopeName=e.scopeName,r}function Pc(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Wv(...t){return e=>{let r=!1;const n=t.map(s=>{const i=Pc(s,e);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let s=0;s<n.length;s++){const i=n[s];typeof i=="function"?i():Pc(t[s],null)}}}}function qv(t){const e=Gv(t),r=j.forwardRef((n,s)=>{const{children:i,...o}=n,l=j.Children.toArray(i),u=l.find(Kv);if(u){const c=u.props.children,d=l.map(h=>h===u?j.Children.count(c)>1?j.Children.only(null):j.isValidElement(c)?c.props.children:null:h);return a.jsx(e,{...o,ref:s,children:j.isValidElement(c)?j.cloneElement(c,void 0,d):null})}return a.jsx(e,{...o,ref:s,children:i})});return r.displayName=`${t}.Slot`,r}function Gv(t){const e=j.forwardRef((r,n)=>{const{children:s,...i}=r;if(j.isValidElement(s)){const o=Jv(s),l=Qv(i,s.props);return s.type!==j.Fragment&&(l.ref=n?Wv(n,o):o),j.cloneElement(s,l)}return j.Children.count(s)>1?j.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var Hv=Symbol("radix.slottable");function Kv(t){return j.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Hv}function Qv(t,e){const r={...e};for(const n in e){const s=t[n],i=e[n];/^on[A-Z]/.test(n)?s&&i?r[n]=(...l)=>{const u=i(...l);return s(...l),u}:s&&(r[n]=s):n==="style"?r[n]={...s,...i}:n==="className"&&(r[n]=[s,i].filter(Boolean).join(" "))}return{...t,...r}}function Jv(t){var n,s;let e=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}var Yv=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Sf=Yv.reduce((t,e)=>{const r=qv(`Primitive.${e}`),n=j.forwardRef((s,i)=>{const{asChild:o,...l}=s,u=o?r:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),a.jsx(u,{...l,ref:i})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{}),Ja="Progress",Ya=100,[Xv,dx]=Vv(Ja),[Zv,ey]=Xv(Ja),jf=j.forwardRef((t,e)=>{const{__scopeProgress:r,value:n=null,max:s,getValueLabel:i=ty,...o}=t;(s||s===0)&&!Tc(s)&&console.error(ry(`${s}`,"Progress"));const l=Tc(s)?s:Ya;n!==null&&!Ac(n,l)&&console.error(ny(`${n}`,"Progress"));const u=Ac(n,l)?n:null,c=zi(u)?i(u,l):void 0;return a.jsx(Zv,{scope:r,value:u,max:l,children:a.jsx(Sf.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":zi(u)?u:void 0,"aria-valuetext":c,role:"progressbar","data-state":Cf(u,l),"data-value":u??void 0,"data-max":l,...o,ref:e})})});jf.displayName=Ja;var bf="ProgressIndicator",Ef=j.forwardRef((t,e)=>{const{__scopeProgress:r,...n}=t,s=ey(bf,r);return a.jsx(Sf.div,{"data-state":Cf(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...n,ref:e})});Ef.displayName=bf;function ty(t,e){return`${Math.round(t/e*100)}%`}function Cf(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function zi(t){return typeof t=="number"}function Tc(t){return zi(t)&&!isNaN(t)&&t>0}function Ac(t,e){return zi(t)&&!isNaN(t)&&t<=e&&t>=0}function ry(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Ya}\`.`}function ny(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Ya} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var Nf=jf,sy=Ef;const Pf=j.forwardRef(({className:t,value:e,...r},n)=>a.jsx(Nf,{ref:n,className:Fe("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...r,children:a.jsx(sy,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));Pf.displayName=Nf.displayName;var iy={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const oy=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ly=(t,e)=>{const r=j.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,children:l,...u},c)=>j.createElement("svg",{ref:c,...iy,width:s,height:s,stroke:n,strokeWidth:o?Number(i)*24/Number(s):i,className:`lucide lucide-${oy(t)}`,...u},[...e.map(([d,h])=>j.createElement(d,h)),...(Array.isArray(l)?l:[l])||[]]));return r.displayName=`${t}`,r};var Z=ly;const ay=Z("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),uy=Z("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),Bl=Z("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]),cy=Z("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),Ic=Z("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),dy=Z("Chrome",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["line",{x1:"21.17",x2:"12",y1:"8",y2:"8",key:"a0cw5f"}],["line",{x1:"3.95",x2:"8.54",y1:"6.06",y2:"14",key:"1kftof"}],["line",{x1:"10.88",x2:"15.46",y1:"21.94",y2:"14",key:"1ymyh8"}]]),hy=Z("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Tf=Z("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),fy=Z("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),py=Z("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),my=Z("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),Oc=Z("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),gy=Z("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),vy=Z("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),yy=Z("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]),wy=Z("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]),Zn=Z("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),Af=Z("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),xy=Z("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),_y=Z("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),ky=Z("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),If=Z("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),Sy=Z("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5h0c-1.4 0-2.5-1.1-2.5-2.5V2",key:"187lwq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]),Of=Z("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),jy=Z("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),by=Z("UserCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]),Wl=Z("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Mi=Z("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]),Do=Z("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function Ey(t,e="MathSolutionScene"){console.log("🎬 开始构建Manim脚本，原始步骤:",t);const r=8;let n=t.filter(u=>u&&u.trim()).map((u,c)=>({content:u.trim(),originalIndex:c})).filter(u=>u.content.length>0).slice(0,r);const s=[],i=new Set;for(const u of n){const c=u.content.substring(0,50).trim();i.has(c)||(s.push(u),i.add(c))}n=s.map(u=>Cy(u.content)),console.log("🧹 清理后的步骤（去重后顺序）:",n),console.log("📊 步骤数量:",n.length);for(let u=0;u<n.length;u++)console.log(`Manim步骤 ${u+1}: ${n[u].substring(0,100)}${n[u].length>100?"...":""}`),console.log(`步骤 ${u+1} 完整内容长度: ${n[u].length} 字符`);n.length<2&&(n=["分析题目条件","列出方程","移项求解","计算得出结果","验证答案"].slice(0,r),console.log("🔄 使用默认步骤:",n));const o=JSON.stringify(n);return`from manim import *
import warnings
warnings.filterwarnings("ignore")

class ${e}(Scene):
    def construct(self):
        self.camera.background_color = WHITE
        
        # 标题
        title = Text("AI数学解答", font_size=36, color=BLUE).to_edge(UP)
        self.play(Write(title), run_time=1)
        self.wait(0.5)
        
        # 显示步骤
        steps = ${o}
        print(f"Manim渲染步骤数量: {len(steps)}")
        
        previous_text = None
        for i, step_text in enumerate(steps):
            try:
                print(f"渲染步骤 {i+1}: {step_text[:50]}...")
                
                # 步骤编号
                step_num = Text(f"步骤 {i+1}", font_size=24, color=RED)
                step_num.next_to(title, DOWN, buff=1)
                
                # 步骤内容 - 智能处理长文本
                if len(step_text) > 80:
                    # 按标点符号分句
                    import re
                    sentences = re.split(r'[。！？；;.!?]', step_text)
                    sentences = [s.strip() for s in sentences if s.strip()]
                    
                    # 创建多行文本组
                    step_content = VGroup()
                    current_y = 0
                    
                    for j, sentence in enumerate(sentences):
                        if len(sentence) > 40:
                            # 长句子按字数分行
                            words = []
                            while len(sentence) > 40:
                                words.append(sentence[:40])
                                sentence = sentence[40:]
                            if sentence:
                                words.append(sentence)
                        else:
                            words = [sentence]
                        
                        for k, word in enumerate(words):
                            line_text = Text(word, font_size=14, color=BLACK)
                            line_text.next_to(step_num, DOWN, buff=0.5 + current_y * 0.35)
                            step_content.add(line_text)
                            current_y += 1
                else:
                    # 短文本正常显示
                    step_content = Text(step_text, font_size=16, color=BLACK, line_spacing=1.2)
                    step_content.next_to(step_num, DOWN, buff=0.5)
                
                # 淡出前一个步骤
                if previous_text:
                    self.play(FadeOut(previous_text), run_time=0.8)
                
                # 显示新步骤
                self.play(Write(step_num), run_time=1.2)
                self.play(Write(step_content), run_time=1.5)
                
                # 根据内容长度调整等待时间
                wait_time = max(6.0, len(step_text) * 0.08)  # 至少6秒，每字符0.08秒
                self.wait(wait_time)  # 动态等待时间，让用户看清完整步骤
                
                previous_text = VGroup(step_num, step_content)
                
            except Exception as e:
                print(f"跳过步骤 {i+1}: {e}")
                continue
        
        # 结束文本
        end_text = Text("解答完成!", font_size=32, color=GREEN)
        if previous_text:
            self.play(FadeOut(previous_text), run_time=0.5)
        self.play(Write(end_text), run_time=1)
        self.wait(2)
`}function Cy(t){return t=t.replace(/[#*`]/g,""),t=t.replace(/[^ - - - \w\s\u4e00-\u9fff,.，。！？()（）=+\-*/÷×²³√π∞≤≥≠≈±∑∏∫∂∇∆∈∉⊂⊃∪∩∅∀∃]/g,""),t=t.replace(/\s+/g," ").trim(),t.length>500&&(t=t.substring(0,497)+"..."),t}async function Ny(t,e="qwen_video1"){const r=Ey(t),n=new AbortController,s=setTimeout(()=>n.abort(),3e5);try{console.log(`🎬 开始生成Manim视频: ${e}`);const i=await fetch("http://127.0.0.1:5001/api/manim_render",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({script:r,output_name:e,scene_name:"MathSolutionScene"}),signal:n.signal});if(clearTimeout(s),!i.ok)throw new Error(`HTTP错误: ${i.status} ${i.statusText}`);const o=await i.json();if(console.log("📄 Manim API响应:",o),o.success)return console.log(`✅ Manim视频生成成功: ${o.video_url}`),o.video_url;throw new Error(o.error||"Manim渲染失败")}catch(i){if(clearTimeout(s),console.error("❌ Manim渲染失败:",i),i.name==="AbortError")throw new Error("Manim渲染超时，请简化问题或稍后重试");if(i.message.includes("fetch")||i.message.includes("Connection refused"))return console.log("🔄 Manim服务器不可用，返回模拟视频"),"/rendered_videos/fallback_video.mp4";throw new Error(i.message)}}const Py=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Ns(async()=>{const{default:n}=await Promise.resolve().then(()=>Sn);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)};class Xa extends Error{constructor(e,r="FunctionsError",n){super(e),this.name=r,this.context=n}}class Ty extends Xa{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Rc extends Xa{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class $c extends Xa{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var ql;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(ql||(ql={}));var Ay=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{c(n.next(d))}catch(h){o(h)}}function u(d){try{c(n.throw(d))}catch(h){o(h)}}function c(d){d.done?i(d.value):s(d.value).then(l,u)}c((n=n.apply(t,e||[])).next())})};class Iy{constructor(e,{headers:r={},customFetch:n,region:s=ql.Any}={}){this.url=e,this.headers=r,this.region=s,this.fetch=Py(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,r={}){var n;return Ay(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o}=r;let l={},{region:u}=r;u||(u=this.region);const c=new URL(`${this.url}/${e}`);u&&u!=="any"&&(l["x-region"]=u,c.searchParams.set("forceFunctionRegion",u));let d;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",d=o):typeof o=="string"?(l["Content-Type"]="text/plain",d=o):typeof FormData<"u"&&o instanceof FormData?d=o:(l["Content-Type"]="application/json",d=JSON.stringify(o)));const h=yield this.fetch(c.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),s),body:d}).catch(x=>{throw new Ty(x)}),f=h.headers.get("x-relay-error");if(f&&f==="true")throw new Rc(h);if(!h.ok)throw new $c(h);let v=((n=h.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),y;return v==="application/json"?y=yield h.json():v==="application/octet-stream"?y=yield h.blob():v==="text/event-stream"?y=h:v==="multipart/form-data"?y=yield h.formData():y=yield h.text(),{data:y,error:null,response:h}}catch(s){return{data:null,error:s,response:s instanceof $c||s instanceof Rc?s.context:void 0}}})}}var We={},Za={},so={},Ps={},io={},oo={},Oy=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},wn=Oy();const Ry=wn.fetch,Rf=wn.fetch.bind(wn),$f=wn.Headers,$y=wn.Request,Ly=wn.Response,Sn=Object.freeze(Object.defineProperty({__proto__:null,Headers:$f,Request:$y,Response:Ly,default:Rf,fetch:Ry},Symbol.toStringTag,{value:"Module"})),zy=Rp(Sn);var lo={};Object.defineProperty(lo,"__esModule",{value:!0});let My=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};lo.default=My;var Lf=ct&&ct.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(oo,"__esModule",{value:!0});const Uy=Lf(zy),Dy=Lf(lo);let Fy=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Uy.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,r){return this.headers=Object.assign({},this.headers),this.headers[e]=r,this}then(e,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,u;let c=null,d=null,h=null,f=i.status,v=i.statusText;if(i.ok){if(this.method!=="HEAD"){const m=await i.text();m===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=m:d=JSON.parse(m))}const x=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),k=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");x&&k&&k.length>1&&(h=parseInt(k[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(c={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,h=null,f=406,v="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const x=await i.text();try{c=JSON.parse(x),Array.isArray(c)&&i.status===404&&(d=[],c=null,f=200,v="OK")}catch{i.status===404&&x===""?(f=204,v="No Content"):c={message:x}}if(c&&this.isMaybeSingle&&(!((u=c==null?void 0:c.details)===null||u===void 0)&&u.includes("0 rows"))&&(c=null,f=200,v="OK"),c&&this.shouldThrowOnError)throw new Dy.default(c)}return{error:c,data:d,count:h,status:f,statusText:v}});return this.shouldThrowOnError||(s=s.catch(i=>{var o,l,u;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(u=i==null?void 0:i.code)!==null&&u!==void 0?u:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,r)}returns(){return this}overrideTypes(){return this}};oo.default=Fy;var Vy=ct&&ct.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(io,"__esModule",{value:!0});const By=Vy(oo);let Wy=class extends By.default{select(e){let r=!1;const n=(e??"*").split("").map(s=>/\s/.test(s)&&!r?"":(s==='"'&&(r=!r),s)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:r=!0,nullsFirst:n,foreignTable:s,referencedTable:i=s}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${e}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,r,{foreignTable:n,referencedTable:s=n}={}){const i=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${r-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:r=!1,settings:n=!1,buffers:s=!1,wal:i=!1,format:o="text"}={}){var l;const u=[e?"analyze":null,r?"verbose":null,n?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),c=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${c}"; options=${u};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};io.default=Wy;var qy=ct&&ct.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ps,"__esModule",{value:!0});const Gy=qy(io);let Hy=class extends Gy.default{eq(e,r){return this.url.searchParams.append(e,`eq.${r}`),this}neq(e,r){return this.url.searchParams.append(e,`neq.${r}`),this}gt(e,r){return this.url.searchParams.append(e,`gt.${r}`),this}gte(e,r){return this.url.searchParams.append(e,`gte.${r}`),this}lt(e,r){return this.url.searchParams.append(e,`lt.${r}`),this}lte(e,r){return this.url.searchParams.append(e,`lte.${r}`),this}like(e,r){return this.url.searchParams.append(e,`like.${r}`),this}likeAllOf(e,r){return this.url.searchParams.append(e,`like(all).{${r.join(",")}}`),this}likeAnyOf(e,r){return this.url.searchParams.append(e,`like(any).{${r.join(",")}}`),this}ilike(e,r){return this.url.searchParams.append(e,`ilike.${r}`),this}ilikeAllOf(e,r){return this.url.searchParams.append(e,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(e,r){return this.url.searchParams.append(e,`ilike(any).{${r.join(",")}}`),this}is(e,r){return this.url.searchParams.append(e,`is.${r}`),this}in(e,r){const n=Array.from(new Set(r)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cs.{${r.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(r)}`),this}containedBy(e,r){return typeof r=="string"?this.url.searchParams.append(e,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(e,`cd.{${r.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(r)}`),this}rangeGt(e,r){return this.url.searchParams.append(e,`sr.${r}`),this}rangeGte(e,r){return this.url.searchParams.append(e,`nxl.${r}`),this}rangeLt(e,r){return this.url.searchParams.append(e,`sl.${r}`),this}rangeLte(e,r){return this.url.searchParams.append(e,`nxr.${r}`),this}rangeAdjacent(e,r){return this.url.searchParams.append(e,`adj.${r}`),this}overlaps(e,r){return typeof r=="string"?this.url.searchParams.append(e,`ov.${r}`):this.url.searchParams.append(e,`ov.{${r.join(",")}}`),this}textSearch(e,r,{config:n,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${i}fts${o}.${r}`),this}match(e){return Object.entries(e).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(e,r,n){return this.url.searchParams.append(e,`not.${r}.${n}`),this}or(e,{foreignTable:r,referencedTable:n=r}={}){const s=n?`${n}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,r,n){return this.url.searchParams.append(e,`${r}.${n}`),this}};Ps.default=Hy;var Ky=ct&&ct.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(so,"__esModule",{value:!0});const Mn=Ky(Ps);let Qy=class{constructor(e,{headers:r={},schema:n,fetch:s}){this.url=e,this.headers=r,this.schema=n,this.fetch=s}select(e,{head:r=!1,count:n}={}){const s=r?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),n&&(this.headers.Prefer=`count=${n}`),new Mn.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:r,defaultToNull:n=!0}={}){const s="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),r&&i.push(`count=${r}`),n||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const o=e.reduce((l,u)=>l.concat(Object.keys(u)),[]);if(o.length>0){const l=[...new Set(o)].map(u=>`"${u}"`);this.url.searchParams.set("columns",l.join(","))}}return new Mn.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:r,ignoreDuplicates:n=!1,count:s,defaultToNull:i=!0}={}){const o="POST",l=[`resolution=${n?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&l.push(this.headers.Prefer),s&&l.push(`count=${s}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(e)){const u=e.reduce((c,d)=>c.concat(Object.keys(d)),[]);if(u.length>0){const c=[...new Set(u)].map(d=>`"${d}"`);this.url.searchParams.set("columns",c.join(","))}}return new Mn.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:r}={}){const n="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),r&&s.push(`count=${r}`),this.headers.Prefer=s.join(","),new Mn.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const r="DELETE",n=[];return e&&n.push(`count=${e}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new Mn.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};so.default=Qy;var ao={},uo={};Object.defineProperty(uo,"__esModule",{value:!0});uo.version=void 0;uo.version="0.0.0-automated";Object.defineProperty(ao,"__esModule",{value:!0});ao.DEFAULT_HEADERS=void 0;const Jy=uo;ao.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${Jy.version}`};var zf=ct&&ct.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Za,"__esModule",{value:!0});const Yy=zf(so),Xy=zf(Ps),Zy=ao;let e0=class Mf{constructor(e,{headers:r={},schema:n,fetch:s}={}){this.url=e,this.headers=Object.assign(Object.assign({},Zy.DEFAULT_HEADERS),r),this.schemaName=n,this.fetch=s}from(e){const r=new URL(`${this.url}/${e}`);return new Yy.default(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Mf(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,r={},{head:n=!1,get:s=!1,count:i}={}){let o;const l=new URL(`${this.url}/rpc/${e}`);let u;n||s?(o=n?"HEAD":"GET",Object.entries(r).filter(([d,h])=>h!==void 0).map(([d,h])=>[d,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([d,h])=>{l.searchParams.append(d,h)})):(o="POST",u=r);const c=Object.assign({},this.headers);return i&&(c.Prefer=`count=${i}`),new Xy.default({method:o,url:l,headers:c,schema:this.schemaName,body:u,fetch:this.fetch,allowEmpty:!1})}};Za.default=e0;var jn=ct&&ct.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(We,"__esModule",{value:!0});We.PostgrestError=We.PostgrestBuilder=We.PostgrestTransformBuilder=We.PostgrestFilterBuilder=We.PostgrestQueryBuilder=We.PostgrestClient=void 0;const Uf=jn(Za);We.PostgrestClient=Uf.default;const Df=jn(so);We.PostgrestQueryBuilder=Df.default;const Ff=jn(Ps);We.PostgrestFilterBuilder=Ff.default;const Vf=jn(io);We.PostgrestTransformBuilder=Vf.default;const Bf=jn(oo);We.PostgrestBuilder=Bf.default;const Wf=jn(lo);We.PostgrestError=Wf.default;var t0=We.default={PostgrestClient:Uf.default,PostgrestQueryBuilder:Df.default,PostgrestFilterBuilder:Ff.default,PostgrestTransformBuilder:Vf.default,PostgrestBuilder:Bf.default,PostgrestError:Wf.default};const{PostgrestClient:r0,PostgrestQueryBuilder:vx,PostgrestFilterBuilder:yx,PostgrestTransformBuilder:wx,PostgrestBuilder:xx,PostgrestError:_x}=t0;function n0(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const s0=n0(),i0="2.11.15",o0=`realtime-js/${i0}`,l0="1.0.0",qf=1e4,a0=1e3;var es;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(es||(es={}));var Oe;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Oe||(Oe={}));var xt;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(xt||(xt={}));var Gl;(function(t){t.websocket="websocket"})(Gl||(Gl={}));var xr;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(xr||(xr={}));class u0{constructor(){this.HEADER_LENGTH=1}decode(e,r){return e.constructor===ArrayBuffer?r(this._binaryDecode(e)):r(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const r=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,r,n)}_decodeBroadcast(e,r,n){const s=r.getUint8(1),i=r.getUint8(2);let o=this.HEADER_LENGTH+2;const l=n.decode(e.slice(o,o+s));o=o+s;const u=n.decode(e.slice(o,o+i));o=o+i;const c=JSON.parse(n.decode(e.slice(o,e.byteLength)));return{ref:null,topic:l,event:u,payload:c}}}class Gf{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var re;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(re||(re={}));const Lc=(t,e,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((i,o)=>(i[o]=c0(o,t,e,s),i),{})},c0=(t,e,r,n)=>{const s=e.find(l=>l.name===t),i=s==null?void 0:s.type,o=r[t];return i&&!n.includes(i)?Hf(i,o):Hl(o)},Hf=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return p0(e,r)}switch(t){case re.bool:return d0(e);case re.float4:case re.float8:case re.int2:case re.int4:case re.int8:case re.numeric:case re.oid:return h0(e);case re.json:case re.jsonb:return f0(e);case re.timestamp:return m0(e);case re.abstime:case re.date:case re.daterange:case re.int4range:case re.int8range:case re.money:case re.reltime:case re.text:case re.time:case re.timestamptz:case re.timetz:case re.tsrange:case re.tstzrange:return Hl(e);default:return Hl(e)}},Hl=t=>t,d0=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},h0=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},f0=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},p0=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,n=t[r];if(t[0]==="{"&&n==="}"){let i;const o=t.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>Hf(e,l))}return t},m0=t=>typeof t=="string"?t.replace(" ","T"):t,Kf=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class Fo{constructor(e,r,n={},s=qf){this.channel=e,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var n;return this._hasReceived(e)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var zc;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(zc||(zc={}));class ts{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ts.syncState(this.state,s,i,o),this.pendingDiffs.forEach(u=>{this.state=ts.syncDiff(this.state,u,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=ts.syncDiff(this.state,s,i,o),l())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,n,s){const i=this.cloneDeep(e),o=this.transformState(r),l={},u={};return this.map(i,(c,d)=>{o[c]||(u[c]=d)}),this.map(o,(c,d)=>{const h=i[c];if(h){const f=d.map(k=>k.presence_ref),v=h.map(k=>k.presence_ref),y=d.filter(k=>v.indexOf(k.presence_ref)<0),x=h.filter(k=>f.indexOf(k.presence_ref)<0);y.length>0&&(l[c]=y),x.length>0&&(u[c]=x)}else l[c]=d}),this.syncDiff(i,{joins:l,leaves:u},n,s)}static syncDiff(e,r,n,s){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(l,u)=>{var c;const d=(c=e[l])!==null&&c!==void 0?c:[];if(e[l]=this.cloneDeep(u),d.length>0){const h=e[l].map(v=>v.presence_ref),f=d.filter(v=>h.indexOf(v.presence_ref)<0);e[l].unshift(...f)}n(l,d,u)}),this.map(o,(l,u)=>{let c=e[l];if(!c)return;const d=u.map(h=>h.presence_ref);c=c.filter(h=>d.indexOf(h.presence_ref)<0),e[l]=c,s(l,c,u),c.length===0&&delete e[l]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(n=>r(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,n)=>{const s=e[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Mc;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Mc||(Mc={}));var Uc;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Uc||(Uc={}));var Rt;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Rt||(Rt={}));class eu{constructor(e,r={config:{}},n){this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=Oe.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Fo(this,xt.join,this.params,this.timeout),this.rejoinTimer=new Gf(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Oe.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Oe.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Oe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Oe.errored,this.rejoinTimer.scheduleTimeout())}),this._on(xt.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new ts(this),this.broadcastEndpointURL=Kf(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,r=this.timeout){var n,s;if(this.socket.isConnected()||this.socket.connect(),this.state==Oe.closed){const{config:{broadcast:i,presence:o,private:l}}=this.params;this._onError(d=>e==null?void 0:e(Rt.CHANNEL_ERROR,d)),this._onClose(()=>e==null?void 0:e(Rt.CLOSED));const u={},c={broadcast:i,presence:o,postgres_changes:(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(d=>d.filter))!==null&&s!==void 0?s:[],private:l};this.socket.accessTokenValue&&(u.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:c},u)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:d})=>{var h;if(this.socket.setAuth(),d===void 0){e==null||e(Rt.SUBSCRIBED);return}else{const f=this.bindings.postgres_changes,v=(h=f==null?void 0:f.length)!==null&&h!==void 0?h:0,y=[];for(let x=0;x<v;x++){const k=f[x],{filter:{event:m,schema:p,table:g,filter:w}}=k,b=d&&d[x];if(b&&b.event===m&&b.schema===p&&b.table===g&&b.filter===w)y.push(Object.assign(Object.assign({},k),{id:b.id}));else{this.unsubscribe(),this.state=Oe.errored,e==null||e(Rt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,e&&e(Rt.SUBSCRIBED);return}}).receive("error",d=>{this.state=Oe.errored,e==null||e(Rt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Rt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,n){return this._on(e,r,n)}async send(e,r={}){var n,s;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,u={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=c.body)===null||s===void 0?void 0:s.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,u;const c=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((u=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||u===void 0)&&u.ack)&&i("ok"),c.receive("ok",()=>i("ok")),c.receive("error",()=>i("error")),c.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Oe.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(xt.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new Fo(this,xt.leave,{},e),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),o}_push(e,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Fo(this,e,r,n);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,r,n){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,n){var s,i;const o=e.toLocaleLowerCase(),{close:l,error:u,leave:c,join:d}=xt;if(n&&[l,u,c,d].indexOf(o)>=0&&n!==this._joinRef())return;let f=this._onMessage(o,r,n);if(r&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(v=>{var y,x,k;return((y=v.filter)===null||y===void 0?void 0:y.event)==="*"||((k=(x=v.filter)===null||x===void 0?void 0:x.event)===null||k===void 0?void 0:k.toLocaleLowerCase())===o}).map(v=>v.callback(f,n)):(i=this.bindings[o])===null||i===void 0||i.filter(v=>{var y,x,k,m,p,g;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in v){const w=v.id,b=(y=v.filter)===null||y===void 0?void 0:y.event;return w&&((x=r.ids)===null||x===void 0?void 0:x.includes(w))&&(b==="*"||(b==null?void 0:b.toLocaleLowerCase())===((k=r.data)===null||k===void 0?void 0:k.type.toLocaleLowerCase()))}else{const w=(p=(m=v==null?void 0:v.filter)===null||m===void 0?void 0:m.event)===null||p===void 0?void 0:p.toLocaleLowerCase();return w==="*"||w===((g=r==null?void 0:r.event)===null||g===void 0?void 0:g.toLocaleLowerCase())}else return v.type.toLocaleLowerCase()===o}).map(v=>{if(typeof f=="object"&&"ids"in f){const y=f.data,{schema:x,table:k,commit_timestamp:m,type:p,errors:g}=y;f=Object.assign(Object.assign({},{schema:x,table:k,commit_timestamp:m,eventType:p,new:{},old:{},errors:g}),this._getPayloadRecords(y))}v.callback(f,n)})}_isClosed(){return this.state===Oe.closed}_isJoined(){return this.state===Oe.joined}_isJoining(){return this.state===Oe.joining}_isLeaving(){return this.state===Oe.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,n){const s=e.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,r){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&eu.isEqual(s.filter,r))}),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(e[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(xt.close,{},e)}_onError(e){this._on(xt.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Oe.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=Lc(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=Lc(e.columns,e.old_record)),r}}const Dc=()=>{},g0=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class v0{constructor(e,r){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=qf,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Dc,this.ref=0,this.logger=Dc,this.conn=null,this.sendBuffer=[],this.serializer=new u0,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...l)=>Ns(async()=>{const{default:u}=await Promise.resolve().then(()=>Sn);return{default:u}},void 0).then(({default:u})=>u(...l)):o=fetch,(...l)=>o(...l)},this.endPoint=`${e}/${Gl.websocket}`,this.httpEndpoint=Kf(e),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),(r!=null&&r.logLevel||r!=null&&r.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const s=(n=r==null?void 0:r.params)===null||n===void 0?void 0:n.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(i,o)=>o(JSON.stringify(i)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Gf(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}this.accessToken=(r==null?void 0:r.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=s0),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:l0}))}disconnect(e,r){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(n=>n.teardown()))}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,n){this.logger(e,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case es.connecting:return xr.Connecting;case es.open:return xr.Open;case es.closing:return xr.Closing;default:return xr.Closed}}isConnected(){return this.connectionState()===xr.Open}channel(e,r={config:{}}){const n=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===n);if(s)return s;{const i=new eu(`realtime:${e}`,r,this);return this.channels.push(i),i}}push(e){const{topic:r,event:n,payload:s,ref:i}=e,o=()=>{this.encode(e,l=>{var u;(u=this.conn)===null||u===void 0||u.send(l)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let r=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const s={access_token:r,version:o0};r&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(xt.access_token,{access_token:r})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(a0,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,r=>{let{topic:n,event:s,payload:i,ref:o}=r;n==="phoenix"&&s==="phx_reply"&&this.heartbeatCallback(r.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${n} ${s} ${o&&"("+o+")"||""}`,i),Array.from(this.channels).filter(l=>l._isMember(n)).forEach(l=>l._trigger(s,i,o)),this.stateChangeCallbacks.message.forEach(l=>l(r))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(xt.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const n=e.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${e}${n}${s}`}_workerObjectUrl(e){let r;if(e)r=e;else{const n=new Blob([g0],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}}class tu extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Se(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class y0 extends tu{constructor(e,r){super(e),this.name="StorageApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Kl extends tu{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}var w0=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{c(n.next(d))}catch(h){o(h)}}function u(d){try{c(n.throw(d))}catch(h){o(h)}}function c(d){d.done?i(d.value):s(d.value).then(l,u)}c((n=n.apply(t,e||[])).next())})};const Qf=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Ns(async()=>{const{default:n}=await Promise.resolve().then(()=>Sn);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},x0=()=>w0(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Ns(()=>Promise.resolve().then(()=>Sn),void 0)).Response:Response}),Ql=t=>{if(Array.isArray(t))return t.map(r=>Ql(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=Ql(n)}),e};var zr=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{c(n.next(d))}catch(h){o(h)}}function u(d){try{c(n.throw(d))}catch(h){o(h)}}function c(d){d.done?i(d.value):s(d.value).then(l,u)}c((n=n.apply(t,e||[])).next())})};const Vo=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),_0=(t,e,r)=>zr(void 0,void 0,void 0,function*(){const n=yield x0();t instanceof n&&!(r!=null&&r.noResolveJson)?t.json().then(s=>{e(new y0(Vo(s),t.status||500))}).catch(s=>{e(new Kl(Vo(s),s))}):e(new Kl(Vo(t),t))}),k0=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),n&&(s.body=JSON.stringify(n)),Object.assign(Object.assign({},s),r))};function Ts(t,e,r,n,s,i){return zr(this,void 0,void 0,function*(){return new Promise((o,l)=>{t(r,k0(e,n,s,i)).then(u=>{if(!u.ok)throw u;return n!=null&&n.noResolveJson?u:u.json()}).then(u=>o(u)).catch(u=>_0(u,l,n))})})}function Ui(t,e,r,n){return zr(this,void 0,void 0,function*(){return Ts(t,"GET",e,r,n)})}function Qt(t,e,r,n,s){return zr(this,void 0,void 0,function*(){return Ts(t,"POST",e,n,s,r)})}function S0(t,e,r,n,s){return zr(this,void 0,void 0,function*(){return Ts(t,"PUT",e,n,s,r)})}function j0(t,e,r,n){return zr(this,void 0,void 0,function*(){return Ts(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function Jf(t,e,r,n,s){return zr(this,void 0,void 0,function*(){return Ts(t,"DELETE",e,n,s,r)})}var Ve=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{c(n.next(d))}catch(h){o(h)}}function u(d){try{c(n.throw(d))}catch(h){o(h)}}function c(d){d.done?i(d.value):s(d.value).then(l,u)}c((n=n.apply(t,e||[])).next())})};const b0={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Fc={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class E0{constructor(e,r={},n,s){this.url=e,this.headers=r,this.bucketId=n,this.fetch=Qf(s)}uploadOrUpdate(e,r,n,s){return Ve(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},Fc),s);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const u=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),u&&i.append("metadata",this.encodeMetadata(u)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",o.cacheControl),u&&i.append("metadata",this.encodeMetadata(u))):(i=n,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,u&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(u)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const c=this._removeEmptyFolders(r),d=this._getFinalPath(c),h=yield this.fetch(`${this.url}/object/${d}`,Object.assign({method:e,body:i,headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{})),f=yield h.json();return h.ok?{data:{path:c,id:f.Id,fullPath:f.Key},error:null}:{data:null,error:f}}catch(i){if(Se(i))return{data:null,error:i};throw i}})}upload(e,r,n){return Ve(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,n)})}uploadToSignedUrl(e,r,n,s){return Ve(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",r);try{let u;const c=Object.assign({upsert:Fc.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&n instanceof Blob?(u=new FormData,u.append("cacheControl",c.cacheControl),u.append("",n)):typeof FormData<"u"&&n instanceof FormData?(u=n,u.append("cacheControl",c.cacheControl)):(u=n,d["cache-control"]=`max-age=${c.cacheControl}`,d["content-type"]=c.contentType);const h=yield this.fetch(l.toString(),{method:"PUT",body:u,headers:d}),f=yield h.json();return h.ok?{data:{path:i,fullPath:f.Key},error:null}:{data:null,error:f}}catch(u){if(Se(u))return{data:null,error:u};throw u}})}createSignedUploadUrl(e,r){return Ve(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const i=yield Qt(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new tu("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:l},error:null}}catch(n){if(Se(n))return{data:null,error:n};throw n}})}update(e,r,n){return Ve(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,n)})}move(e,r,n){return Ve(this,void 0,void 0,function*(){try{return{data:yield Qt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(Se(s))return{data:null,error:s};throw s}})}copy(e,r,n){return Ve(this,void 0,void 0,function*(){try{return{data:{path:(yield Qt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(Se(s))return{data:null,error:s};throw s}})}createSignedUrl(e,r,n){return Ve(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield Qt(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(Se(s))return{data:null,error:s};throw s}})}createSignedUrls(e,r,n){return Ve(this,void 0,void 0,function*(){try{const s=yield Qt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(Se(s))return{data:null,error:s};throw s}})}download(e,r){return Ve(this,void 0,void 0,function*(){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield Ui(this.fetch,`${this.url}/${s}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(Se(l))return{data:null,error:l};throw l}})}info(e){return Ve(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const n=yield Ui(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Ql(n),error:null}}catch(n){if(Se(n))return{data:null,error:n};throw n}})}exists(e){return Ve(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield j0(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(Se(n)&&n instanceof Kl){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,r){const n=this._getFinalPath(e),s=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&s.push(i);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",u=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});u!==""&&s.push(u);let c=s.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${c}`)}}}remove(e){return Ve(this,void 0,void 0,function*(){try{return{data:yield Jf(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(Se(r))return{data:null,error:r};throw r}})}list(e,r,n){return Ve(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},b0),r),{prefix:e||""});return{data:yield Qt(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(Se(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const C0="2.7.1",N0={"X-Client-Info":`storage-js/${C0}`};var Fr=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{c(n.next(d))}catch(h){o(h)}}function u(d){try{c(n.throw(d))}catch(h){o(h)}}function c(d){d.done?i(d.value):s(d.value).then(l,u)}c((n=n.apply(t,e||[])).next())})};class P0{constructor(e,r={},n){this.url=e,this.headers=Object.assign(Object.assign({},N0),r),this.fetch=Qf(n)}listBuckets(){return Fr(this,void 0,void 0,function*(){try{return{data:yield Ui(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Se(e))return{data:null,error:e};throw e}})}getBucket(e){return Fr(this,void 0,void 0,function*(){try{return{data:yield Ui(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(Se(r))return{data:null,error:r};throw r}})}createBucket(e,r={public:!1}){return Fr(this,void 0,void 0,function*(){try{return{data:yield Qt(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Se(n))return{data:null,error:n};throw n}})}updateBucket(e,r){return Fr(this,void 0,void 0,function*(){try{return{data:yield S0(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Se(n))return{data:null,error:n};throw n}})}emptyBucket(e){return Fr(this,void 0,void 0,function*(){try{return{data:yield Qt(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(Se(r))return{data:null,error:r};throw r}})}deleteBucket(e){return Fr(this,void 0,void 0,function*(){try{return{data:yield Jf(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(Se(r))return{data:null,error:r};throw r}})}}class T0 extends P0{constructor(e,r={},n){super(e,r,n)}from(e){return new E0(this.url,this.headers,e,this.fetch)}}const A0="2.50.5";let Bn="";typeof Deno<"u"?Bn="deno":typeof document<"u"?Bn="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Bn="react-native":Bn="node";const I0={"X-Client-Info":`supabase-js-${Bn}/${A0}`},O0={headers:I0},R0={schema:"public"},$0={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},L0={};var z0=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{c(n.next(d))}catch(h){o(h)}}function u(d){try{c(n.throw(d))}catch(h){o(h)}}function c(d){d.done?i(d.value):s(d.value).then(l,u)}c((n=n.apply(t,e||[])).next())})};const M0=t=>{let e;return t?e=t:typeof fetch>"u"?e=Rf:e=fetch,(...r)=>e(...r)},U0=()=>typeof Headers>"u"?$f:Headers,D0=(t,e,r)=>{const n=M0(r),s=U0();return(i,o)=>z0(void 0,void 0,void 0,function*(){var l;const u=(l=yield e())!==null&&l!==void 0?l:t;let c=new s(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${u}`),n(i,Object.assign(Object.assign({},o),{headers:c}))})};var F0=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{c(n.next(d))}catch(h){o(h)}}function u(d){try{c(n.throw(d))}catch(h){o(h)}}function c(d){d.done?i(d.value):s(d.value).then(l,u)}c((n=n.apply(t,e||[])).next())})};function V0(t){return t.endsWith("/")?t:t+"/"}function B0(t,e){var r,n;const{db:s,auth:i,realtime:o,global:l}=t,{db:u,auth:c,realtime:d,global:h}=e,f={db:Object.assign(Object.assign({},u),s),auth:Object.assign(Object.assign({},c),i),realtime:Object.assign(Object.assign({},d),o),global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>F0(this,void 0,void 0,function*(){return""})};return t.accessToken?f.accessToken=t.accessToken:delete f.accessToken,f}const Yf="2.70.0",qr=30*1e3,Jl=3,Bo=Jl*qr,W0="http://localhost:9999",q0="supabase.auth.token",G0={"X-Client-Info":`gotrue-js/${Yf}`},Yl="X-Supabase-Api-Version",Xf={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},H0=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,K0=6e5;class ru extends Error{constructor(e,r,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function F(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class Q0 extends ru{constructor(e,r,n){super(e,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function J0(t){return F(t)&&t.name==="AuthApiError"}class Zf extends ru{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class mr extends ru{constructor(e,r,n,s){super(e,n,s),this.name=r,this.status=n}}class Gt extends mr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Y0(t){return F(t)&&t.name==="AuthSessionMissingError"}class Js extends mr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ys extends mr{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Xs extends mr{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function X0(t){return F(t)&&t.name==="AuthImplicitGrantRedirectError"}class Vc extends mr{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Xl extends mr{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function Wo(t){return F(t)&&t.name==="AuthRetryableFetchError"}class Bc extends mr{constructor(e,r,n){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class rs extends mr{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Di="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Wc=` 	
\r=`.split(""),Z0=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Wc.length;e+=1)t[Wc[e].charCodeAt(0)]=-2;for(let e=0;e<Di.length;e+=1)t[Di[e].charCodeAt(0)]=e;return t})();function qc(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(Di[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(Di[n]),e.queuedBits-=6}}function ep(t,e,r){const n=Z0[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Gc(t){const e=[],r=o=>{e.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{rw(o,n,r)};for(let o=0;o<t.length;o+=1)ep(t.charCodeAt(o),s,i);return e.join("")}function ew(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function tw(t,e){for(let r=0;r<t.length;r+=1){let n=t.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(t.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}ew(n,e)}}function rw(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let n=1;n<6;n+=1)if(!(t>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function nw(t){const e=[],r={queue:0,queuedBits:0},n=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)ep(t.charCodeAt(s),r,n);return new Uint8Array(e)}function sw(t){const e=[];return tw(t,r=>e.push(r)),new Uint8Array(e)}function iw(t){const e=[],r={queue:0,queuedBits:0},n=s=>{e.push(s)};return t.forEach(s=>qc(s,r,n)),qc(null,r,n),e.join("")}function ow(t){return Math.round(Date.now()/1e3)+t}function lw(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const vt=()=>typeof window<"u"&&typeof document<"u",gr={tested:!1,writable:!1},ns=()=>{if(!vt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(gr.tested)return gr.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),gr.tested=!0,gr.writable=!0}catch{gr.tested=!0,gr.writable=!1}return gr.writable};function aw(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return r.searchParams.forEach((n,s)=>{e[s]=n}),e}const tp=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>Ns(async()=>{const{default:n}=await Promise.resolve().then(()=>Sn);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},uw=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",rp=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},Zs=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},ei=async(t,e)=>{await t.removeItem(e)};class co{constructor(){this.promise=new co.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}co.promiseConstructor=Promise;function qo(t){const e=t.split(".");if(e.length!==3)throw new rs("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!H0.test(e[n]))throw new rs("JWT not in base64url format");return{header:JSON.parse(Gc(e[0])),payload:JSON.parse(Gc(e[1])),signature:nw(e[2]),raw:{header:e[0],payload:e[1]}}}async function cw(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function dw(t,e){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){n(o);return}}catch(o){if(!e(i,o)){s(o);return}}})()})}function hw(t){return("0"+t.toString(16)).substr(-2)}function fw(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(e),Array.from(e,hw).join("")}async function pw(t){const r=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function mw(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await pw(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Vr(t,e,r=!1){const n=fw();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await rp(t,`${e}-code-verifier`,s);const i=await mw(n);return[i,n===i?"plain":"s256"]}const gw=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function vw(t){const e=t.headers.get(Yl);if(!e||!e.match(gw))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function yw(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function ww(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const xw=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Br(t){if(!xw.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var _w=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r};const wr=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),kw=[502,503,504];async function Hc(t){var e;if(!uw(t))throw new Xl(wr(t),0);if(kw.includes(t.status))throw new Xl(wr(t),t.status);let r;try{r=await t.json()}catch(i){throw new Zf(wr(i),i)}let n;const s=vw(t);if(s&&s.getTime()>=Xf["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new Bc(wr(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new Gt}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Bc(wr(r),t.status,r.weak_password.reasons);throw new Q0(wr(r),t.status||500,n)}const Sw=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function W(t,e,r,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[Yl]||(i[Yl]=Xf["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",u=await jw(t,e,r+l,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(u):{data:Object.assign({},u),error:null}}async function jw(t,e,r,n,s,i){const o=Sw(e,n,s,i);let l;try{l=await t(r,Object.assign({},o))}catch(u){throw console.error(u),new Xl(wr(u),0)}if(l.ok||await Hc(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(u){await Hc(u)}}function It(t){var e;let r=null;Nw(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=ow(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:n},error:null}}function Kc(t){const e=It(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Xt(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function bw(t){return{data:t,error:null}}function Ew(t){const{action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=t,o=_w(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},u=Object.assign({},o);return{data:{properties:l,user:u},error:null}}function Cw(t){return t}function Nw(t){return t.access_token&&t.refresh_token&&t.expires_in}const Go=["global","local","others"];var Pw=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r};class Tw{constructor({url:e="",headers:r={},fetch:n}){this.url=e,this.headers=r,this.fetch=tp(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,r=Go[0]){if(Go.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Go.join(", ")}`);try{return await W(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(F(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,r={}){try{return await W(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Xt})}catch(n){if(F(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:r}=e,n=Pw(e,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await W(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:Ew,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(F(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await W(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Xt})}catch(r){if(F(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,n,s,i,o,l,u;try{const c={nextPage:null,lastPage:0,total:0},d=await W(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:Cw});if(d.error)throw d.error;const h=await d.json(),f=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,v=(u=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&u!==void 0?u:[];return v.length>0&&(v.forEach(y=>{const x=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(y.split(";")[1].split("=")[1]);c[`${k}Page`]=x}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(F(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){Br(e);try{return await W(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Xt})}catch(r){if(F(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){Br(e);try{return await W(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:Xt})}catch(n){if(F(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,r=!1){Br(e);try{return await W(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:Xt})}catch(n){if(F(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){Br(e.userId);try{const{data:r,error:n}=await W(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(F(r))return{data:null,error:r};throw r}}async _deleteFactor(e){Br(e.userId),Br(e.id);try{return{data:await W(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(F(r))return{data:null,error:r};throw r}}}const Aw={getItem:t=>ns()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{ns()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{ns()&&globalThis.localStorage.removeItem(t)}};function Qc(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}function Iw(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Wr={debug:!!(globalThis&&ns()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class np extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Ow extends np{}async function Rw(t,e,r){Wr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),Wr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){Wr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await r()}finally{Wr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw Wr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Ow(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Wr.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}Iw();const $w={url:W0,storageKey:q0,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:G0,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Jc(t,e,r){return await r()}class ks{constructor(e){var r,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ks.nextInstanceID,ks.nextInstanceID+=1,this.instanceID>0&&vt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},$w),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new Tw({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=tp(s.fetch),this.lock=s.lock||Jc,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:vt()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=Rw:this.lock=Jc,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:ns()?this.storage=Aw:(this.memoryStorage={},this.storage=Qc(this.memoryStorage)):(this.memoryStorage={},this.storage=Qc(this.memoryStorage)),vt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Yf}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const r=aw(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),vt()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),X0(i)){const u=(e=i.details)===null||e===void 0?void 0:e.code;if(u==="identity_already_exists"||u==="identity_not_found"||u==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return F(r)?{error:r}:{error:new Zf("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,n,s;try{const i=await W(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:It}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const u=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",u)),{data:{user:c,session:u},error:null}}catch(i){if(F(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var r,n,s;try{let i;if("email"in e){const{email:d,password:h,options:f}=e;let v=null,y=null;this.flowType==="pkce"&&([v,y]=await Vr(this.storage,this.storageKey)),i=await W(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:v,code_challenge_method:y},xform:It})}else if("phone"in e){const{phone:d,password:h,options:f}=e;i=await W(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:It})}else throw new Ys("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const u=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",u)),{data:{user:c,session:u},error:null}}catch(i){if(F(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let r;if("email"in e){const{email:i,password:o,options:l}=e;r=await W(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Kc})}else if("phone"in e){const{phone:i,password:o,options:l}=e;r=await W(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Kc})}else throw new Ys("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Js}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(F(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(e){var r,n,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;if(r==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(e){var r,n,s,i,o,l,u,c,d,h,f,v;let y,x;if("message"in e)y=e.message,x=e.signature;else{const{chain:k,wallet:m,statement:p,options:g}=e;let w;if(vt())if(typeof m=="object")w=m;else{const E=window;if("solana"in E&&typeof E.solana=="object"&&("signIn"in E.solana&&typeof E.solana.signIn=="function"||"signMessage"in E.solana&&typeof E.solana.signMessage=="function"))w=E.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof m!="object"||!(g!=null&&g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=m}const b=new URL((r=g==null?void 0:g.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in w&&w.signIn){const E=await w.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},g==null?void 0:g.signInWithSolana),{version:"1",domain:b.host,uri:b.href}),p?{statement:p}:null));let P;if(Array.isArray(E)&&E[0]&&typeof E[0]=="object")P=E[0];else if(E&&typeof E=="object"&&"signedMessage"in E&&"signature"in E)P=E;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in P&&"signature"in P&&(typeof P.signedMessage=="string"||P.signedMessage instanceof Uint8Array)&&P.signature instanceof Uint8Array)y=typeof P.signedMessage=="string"?P.signedMessage:new TextDecoder().decode(P.signedMessage),x=P.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in w)||typeof w.signMessage!="function"||!("publicKey"in w)||typeof w!="object"||!w.publicKey||!("toBase58"in w.publicKey)||typeof w.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${b.host} wants you to sign in with your Solana account:`,w.publicKey.toBase58(),...p?["",p,""]:[""],"Version: 1",`URI: ${b.href}`,`Issued At: ${(s=(n=g==null?void 0:g.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=g==null?void 0:g.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${g.signInWithSolana.notBefore}`]:[],...!((o=g==null?void 0:g.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${g.signInWithSolana.expirationTime}`]:[],...!((l=g==null?void 0:g.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${g.signInWithSolana.chainId}`]:[],...!((u=g==null?void 0:g.signInWithSolana)===null||u===void 0)&&u.nonce?[`Nonce: ${g.signInWithSolana.nonce}`]:[],...!((c=g==null?void 0:g.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${g.signInWithSolana.requestId}`]:[],...!((h=(d=g==null?void 0:g.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...g.signInWithSolana.resources.map(P=>`- ${P}`)]:[]].join(`
`);const E=await w.signMessage(new TextEncoder().encode(y),"utf8");if(!E||!(E instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");x=E}}try{const{data:k,error:m}=await W(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:iw(x)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(v=e.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:It});if(m)throw m;return!k||!k.session||!k.user?{data:{user:null,session:null},error:new Js}:(k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("SIGNED_IN",k.session)),{data:Object.assign({},k),error:m})}catch(k){if(F(k))return{data:{user:null,session:null},error:k};throw k}}async _exchangeCodeForSession(e){const r=await Zs(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:i,error:o}=await W(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:It});if(await ei(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Js}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(F(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:r,provider:n,token:s,access_token:i,nonce:o}=e,l=await W(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:It}),{data:u,error:c}=l;return c?{data:{user:null,session:null},error:c}:!u||!u.session||!u.user?{data:{user:null,session:null},error:new Js}:(u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),{data:u,error:c})}catch(r){if(F(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(e){var r,n,s,i,o;try{if("email"in e){const{email:l,options:u}=e;let c=null,d=null;this.flowType==="pkce"&&([c,d]=await Vr(this.storage,this.storageKey));const{error:h}=await W(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=u==null?void 0:u.data)!==null&&r!==void 0?r:{},create_user:(n=u==null?void 0:u.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken},code_challenge:c,code_challenge_method:d},redirectTo:u==null?void 0:u.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:l,options:u}=e,{data:c,error:d}=await W(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=u==null?void 0:u.data)!==null&&s!==void 0?s:{},create_user:(i=u==null?void 0:u.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken},channel:(o=u==null?void 0:u.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:d}}throw new Ys("You must provide either an email or phone number.")}catch(l){if(F(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var r,n;try{let s,i;"options"in e&&(s=(r=e.options)===null||r===void 0?void 0:r.redirectTo,i=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await W(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:It});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const u=o.session,c=o.user;return u!=null&&u.access_token&&(await this._saveSession(u),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",u)),{data:{user:c,session:u},error:null}}catch(s){if(F(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var r,n,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Vr(this.storage,this.storageKey)),await W(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:bw})}catch(i){if(F(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;if(n)throw n;if(!r)throw new Gt;const{error:s}=await W(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(F(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:n,type:s,options:i}=e,{error:o}=await W(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:n,type:s,options:i}=e,{data:o,error:l}=await W(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new Ys("You must provide either an email or phone number and a type")}catch(r){if(F(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await Zs(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<Bo:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(u,c,d)=>(!o&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(u,c,d))})}return{data:{session:e},error:null}}const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await W(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Xt}):await this._useSession(async r=>{var n,s,i;const{data:o,error:l}=r;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Gt}:await W(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Xt})})}catch(r){if(F(r))return Y0(r)&&(await this._removeSession(),await ei(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new Gt;const o=s.session;let l=null,u=null;this.flowType==="pkce"&&e.email!=null&&([l,u]=await Vr(this.storage,this.storageKey));const{data:c,error:d}=await W(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:u}),jwt:o.access_token,xform:Xt});if(d)throw d;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(F(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Gt;const r=Date.now()/1e3;let n=r,s=!0,i=null;const{payload:o}=qo(e.access_token);if(o.exp&&(n=o.exp,s=n<=r),s){const{session:l,error:u}=await this._callRefreshToken(e.refresh_token);if(u)return{data:{user:null,session:null},error:u};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:u}=await this._getUser(e.access_token);if(u)throw u;i={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(F(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var n;if(!e){const{data:o,error:l}=r;if(l)throw l;e=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new Gt;const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(F(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(e,r){try{if(!vt())throw new Xs("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Xs(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Vc("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Xs("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Vc("No code detected.");const{data:p,error:g}=await this._exchangeCodeForSession(e.code);if(g)throw g;const w=new URL(window.location.href);return w.searchParams.delete("code"),window.history.replaceState(window.history.state,"",w.toString()),{data:{session:p.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:l,expires_at:u,token_type:c}=e;if(!i||!l||!o||!c)throw new Xs("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(l);let f=d+h;u&&(f=parseInt(u));const v=f-d;v*1e3<=qr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${v}s, should have been closer to ${h}s`);const y=f-h;d-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,f,d):d-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,f,d);const{data:x,error:k}=await this._getUser(i);if(k)throw k;const m={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:f,refresh_token:o,token_type:c,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:m,redirectType:e.type},error:null}}catch(n){if(F(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await Zs(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{error:i};const o=(n=s.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,e);if(l&&!(J0(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await ei(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const r=lw(),n={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await Vr(this.storage,this.storageKey,!0));try{return await W(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(F(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(r){if(F(r))return{data:null,error:r};throw r}}async linkIdentity(e){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var o,l,u,c,d;const{data:h,error:f}=i;if(f)throw f;const v=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(u=e.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:!0});return await W(this.fetch,"GET",v,{headers:this.headers,jwt:(d=(c=h.session)===null||c===void 0?void 0:c.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return vt()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(F(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)throw o;return await W(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(F(r))return{data:null,error:r};throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await dw(async s=>(s>0&&await cw(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await W(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:It})),(s,i)=>{const o=200*Math.pow(2,s);return i&&Wo(i)&&Date.now()+o-n<qr})}catch(n){if(this._debug(r,"error",n),F(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",n),vt()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const n=await Zs(this.storage,this.storageKey);if(this._debug(r,"session from storage",n),!this._isValidSession(n)){this._debug(r,"session is not valid"),n!==null&&await this._removeSession();return}const s=((e=n.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<Bo;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${Bo}s`),s){if(this.autoRefreshToken&&n.refresh_token){const{error:i}=await this._callRefreshToken(n.refresh_token);i&&(console.error(i),Wo(i)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(r,"error",n),console.error(n);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var r,n;if(!e)throw new Gt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new co;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new Gt;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),F(i)){const o={session:null,error:i};return Wo(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,r,n=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,r)}catch(u){i.push(u)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await rp(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await ei(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&vt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),qr);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-e)/qr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${qr}ms, refresh threshold is ${Jl} ticks`),s<=Jl&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof np)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!vt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await Vr(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(l.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await W(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(F(r))return{data:null,error:r};throw r}}async _enroll(e){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:u,error:c}=await W(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return c?{data:null,error:c}:(e.factorType==="totp"&&(!((s=u==null?void 0:u.totp)===null||s===void 0)&&s.qr_code)&&(u.totp.qr_code=`data:image/svg+xml;utf-8,${u.totp.qr_code}`),{data:u,error:null})})}catch(r){if(F(r))return{data:null,error:r};throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{data:null,error:i};const{data:o,error:l}=await W(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(r){if(F(r))return{data:null,error:r};throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await W(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(F(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(e){const{data:r,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){const{data:{user:e},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(e==null?void 0:e.factors)||[],s=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var r,n;const{data:{session:s},error:i}=e;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=qo(s.access_token);let l=null;o.aal&&(l=o.aal);let u=l;((n=(r=s.user.factors)===null||r===void 0?void 0:r.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(u="aal2");const d=o.amr||[];return{data:{currentLevel:l,nextLevel:u,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(e,r={keys:[]}){let n=r.keys.find(o=>o.kid===e);if(n||(n=this.jwks.keys.find(o=>o.kid===e),n&&this.jwks_cached_at+K0>Date.now()))return n;const{data:s,error:i}=await W(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!s.keys||s.keys.length===0)throw new rs("JWKS is empty");if(this.jwks=s,this.jwks_cached_at=Date.now(),n=s.keys.find(o=>o.kid===e),!n)throw new rs("No matching signing key found in JWKS");return n}async getClaims(e,r={keys:[]}){try{let n=e;if(!n){const{data:v,error:y}=await this.getSession();if(y||!v.session)return{data:null,error:y};n=v.session.access_token}const{header:s,payload:i,signature:o,raw:{header:l,payload:u}}=qo(n);if(yw(i.exp),!s.kid||s.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:v}=await this.getUser(n);if(v)throw v;return{data:{claims:i,header:s,signature:o},error:null}}const c=ww(s.alg),d=await this.fetchJwk(s.kid,r),h=await crypto.subtle.importKey("jwk",d,c,!0,["verify"]);if(!await crypto.subtle.verify(c,h,o,sw(`${l}.${u}`)))throw new rs("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(n){if(F(n))return{data:null,error:n};throw n}}}ks.nextInstanceID=0;const Lw=ks;class zw extends Lw{constructor(e){super(e)}}var Mw=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{c(n.next(d))}catch(h){o(h)}}function u(d){try{c(n.throw(d))}catch(h){o(h)}}function c(d){d.done?i(d.value):s(d.value).then(l,u)}c((n=n.apply(t,e||[])).next())})};class Uw{constructor(e,r,n){var s,i,o;if(this.supabaseUrl=e,this.supabaseKey=r,!e)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const l=V0(e),u=new URL(l);this.realtimeUrl=new URL("realtime/v1",u),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",u),this.storageUrl=new URL("storage/v1",u),this.functionsUrl=new URL("functions/v1",u);const c=`sb-${u.hostname.split(".")[0]}-auth-token`,d={db:R0,realtime:L0,auth:Object.assign(Object.assign({},$0),{storageKey:c}),global:O0},h=B0(n??{},d);this.storageKey=(s=h.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=h.global.headers)!==null&&i!==void 0?i:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(f,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=D0(r,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new r0(new URL("rest/v1",u).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),h.accessToken||this._listenForAuthEvents()}get functions(){return new Iy(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new T0(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},n={}){return this.rest.rpc(e,r,n)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,r;return Mw(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:s,storageKey:i,flowType:o,lock:l,debug:u},c,d){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new zw({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),c),storageKey:i,autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:s,flowType:o,lock:l,debug:u,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new v0(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,r,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Dw=(t,e,r)=>new Uw(t,e,r),Fw="https://ufwhcuyjejlcrclnigdi.supabase.co",Vw="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVmd2hjdXlqZWpsY3JjbG5pZ2RpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTIyMTQxMTgsImV4cCI6MjA2Nzc5MDExOH0.yvR8hghfWQfFDeYvx-19Zx0OMPQPnickYVivKmWAXEc",B=Dw(Fw,Vw);let Ho=null;class Bw{constructor(){if(Ho)return Ho;this.user=null,this.session=null,this.initialized=!1,this.authSubscription=null,this.onAuthChange=null,this.initPromise=null,Ho=this}async initialize(){return this.initialized?(console.log("Auth service already initialized"),!0):this.initPromise?(console.log("Auth service initialization in progress, waiting..."),this.initPromise):(this.initPromise=this._doInitialize(),this.initPromise)}async _doInitialize(){var e;try{console.log("Initializing auth service...");const{data:{session:r},error:n}=await B.auth.getSession();if(n)return console.error("Error getting session:",n),!1;if(this.session=r,this.user=(r==null?void 0:r.user)||null,this.initialized=!0,console.log("Auth service initialized:",{hasSession:!!r,hasUser:!!this.user,userEmail:(e=this.user)==null?void 0:e.email}),!this.authSubscription){const{data:{subscription:s}}=B.auth.onAuthStateChange(async(i,o)=>{var l;console.log("Auth state changed:",i,((l=o==null?void 0:o.user)==null?void 0:l.email)||"no user"),this.session=o,this.user=(o==null?void 0:o.user)||null,this.onAuthChange&&this.onAuthChange(this.user),i==="SIGNED_IN"?await this.onSignIn(o.user):i==="SIGNED_OUT"&&this.onSignOut()});this.authSubscription=s}return!0}catch(r){return console.error("Error initializing auth:",r),!1}}async signUp(e,r,n={}){try{const{data:s,error:i}=await B.auth.signUp({email:e,password:r,options:{data:{full_name:n.fullName||"",role:n.role||"student",grade_level:n.gradeLevel||""}}});if(i)throw i;return{success:!0,user:s.user,session:s.session,message:"Account created successfully! Please check your email to verify your account."}}catch(s){return console.error("Sign up error:",s),{success:!1,error:s.message}}}async signIn(e,r){try{const{data:n,error:s}=await B.auth.signInWithPassword({email:e,password:r});if(s)throw s;return{success:!0,user:n.user,session:n.session}}catch(n){return console.error("Sign in error:",n),{success:!1,error:n.message}}}async signInWithGoogle(){try{const{data:e,error:r}=await B.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}`,queryParams:{access_type:"offline",prompt:"consent"}}});if(r)throw r;return console.log("Google OAuth initiated successfully"),{success:!0,data:e}}catch(e){return console.error("Google sign in error:",e),{success:!1,error:e.message}}}async signOut(){try{const{error:e}=await B.auth.signOut();if(e)throw e;return{success:!0}}catch(e){return console.error("Sign out error:",e),{success:!1,error:e.message}}}async resetPassword(e){try{const{error:r}=await B.auth.resetPasswordForEmail(e,{redirectTo:`${window.location.origin}/reset-password`});if(r)throw r;return{success:!0,message:"Password reset email sent! Please check your inbox."}}catch(r){return console.error("Reset password error:",r),{success:!1,error:r.message}}}async updatePassword(e){try{const{error:r}=await B.auth.updateUser({password:e});if(r)throw r;return{success:!0,message:"Password updated successfully!"}}catch(r){return console.error("Update password error:",r),{success:!1,error:r.message}}}getCurrentUser(){return this.user}getCurrentSession(){return this.session}isAuthenticated(){return!!this.user}async getUserProfile(){if(!this.user)return null;try{const{data:e,error:r}=await B.from("profiles").select("*").eq("id",this.user.id).single();if(r)throw r;return e}catch(e){return console.error("Error getting user profile:",e),null}}async updateUserProfile(e){if(!this.user)return{success:!1,error:"Not authenticated"};try{const{error:r}=await B.from("profiles").update({...e,updated_at:new Date().toISOString()}).eq("id",this.user.id);if(r)throw r;return{success:!0,message:"Profile updated successfully!"}}catch(r){return console.error("Error updating profile:",r),{success:!1,error:r.message}}}async onSignIn(e){var r,n,s,i;try{const{error:o}=await B.from("profiles").upsert({id:e.id,email:e.email,full_name:((r=e.user_metadata)==null?void 0:r.full_name)||"",role:((n=e.user_metadata)==null?void 0:n.role)||"student",grade_level:((s=e.user_metadata)==null?void 0:s.grade_level)||"",avatar_url:((i=e.user_metadata)==null?void 0:i.avatar_url)||""},{onConflict:["id"]});o&&console.error("Error upserting profile:",o);const{data:l,error:u}=await B.from("user_preferences").select("*").eq("user_id",e.id).single();if(u&&u.code==="PGRST116"){const{error:c}=await B.from("user_preferences").insert([{user_id:e.id,preferred_language:"zh",difficulty_preference:"intermediate",favorite_topics:[]}]);c&&console.error("Error creating preferences:",c)}}catch(o){console.error("Error in onSignIn:",o)}}onSignOut(){this.user=null,this.session=null,localStorage.removeItem("supabase.auth.token"),console.log("User signed out successfully")}getAuthHeaders(){var e;return(e=this.session)!=null&&e.access_token?{Authorization:`Bearer ${this.session.access_token}`}:{}}async checkSession(){var e;try{const{data:{session:r},error:n}=await B.auth.getSession();return console.log("Manual session check:",{session:r,error:n,hasUser:!!(r!=null&&r.user),userEmail:(e=r==null?void 0:r.user)==null?void 0:e.email}),{session:r,error:n}}catch(r){return console.error("Error checking session:",r),{session:null,error:r}}}async refreshSession(){try{const{data:{session:e},error:r}=await B.auth.refreshSession();return console.log("Session refresh result:",{session:e,error:r}),e!=null&&e.user&&(this.session=e,this.user=e.user,this.onAuthChange&&this.onAuthChange(this.user)),{session:e,error:r}}catch(e){return console.error("Error refreshing session:",e),{session:null,error:e}}}}const Q=new Bw;class Ww{constructor(){this.currentUser=null}async getCurrentUserProfile(){try{const e=Q.getCurrentUser();if(!e)return null;const{data:r,error:n}=await B.from("profiles").select("*").eq("id",e.id).single();return n?(console.error("Error getting user profile:",n),null):r}catch(e){return console.error("Error in getCurrentUserProfile:",e),null}}async updateProfile(e){try{const r=Q.getCurrentUser();if(!r)throw new Error("User not authenticated");const{data:n,error:s}=await B.from("profiles").update({...e,updated_at:new Date().toISOString()}).eq("id",r.id).select().single();if(s)throw s;return{success:!0,data:n,message:"Profile updated successfully!"}}catch(r){return console.error("Error updating profile:",r),{success:!1,error:r.message}}}async getUserPreferences(){try{const e=Q.getCurrentUser();if(!e)return null;const{data:r,error:n}=await B.from("user_preferences").select("*").eq("user_id",e.id).single();return n?(console.error("Error getting user preferences:",n),null):r}catch(e){return console.error("Error in getUserPreferences:",e),null}}async updatePreferences(e){try{const r=Q.getCurrentUser();if(!r)throw new Error("User not authenticated");const{data:n,error:s}=await B.from("user_preferences").update({...e,updated_at:new Date().toISOString()}).eq("user_id",r.id).select().single();if(s)throw s;return{success:!0,data:n,message:"Preferences updated successfully!"}}catch(r){return console.error("Error updating preferences:",r),{success:!1,error:r.message}}}async saveVideo(e){try{const r=Q.getCurrentUser();if(!r)throw new Error("User not authenticated");const n={user_id:r.id,title:e.title||`Math Video - ${new Date().toLocaleString()}`,description:e.description||"AI-generated math teaching video",question:e.question,video_url:e.videoUrl,thumbnail_url:e.thumbnailUrl||null,duration:e.duration||0,language:e.language||"zh",math_topics:e.mathTopics||[],difficulty_level:e.difficultyLevel||"intermediate",solution_data:e.solutionData||null,processing_status:"completed"},{data:s,error:i}=await B.from("videos").insert([n]).select().single();if(i)throw i;return{success:!0,data:s,message:"Video saved successfully!"}}catch(r){return console.error("Error saving video:",r),{success:!1,error:r.message}}}async getUserVideos(e=50,r=0){try{console.log("🔍 userService.getUserVideos 开始...");const n=Q.getCurrentUser();if(!n)throw console.error("❌ 用户未认证"),new Error("User not authenticated");console.log("👤 当前用户:",n.email);const{data:s,error:i}=await B.from("videos").select("*").eq("user_id",n.id).order("created_at",{ascending:!1}).range(r,r+e-1);if(console.log("📊 Supabase查询结果:",{data:s,error:i}),i)throw console.error("❌ Supabase查询错误:",i),i;return console.log("✅ 成功获取视频数据，数量:",(s==null?void 0:s.length)||0),{success:!0,data:s||[],count:(s==null?void 0:s.length)||0}}catch(n){return console.error("❌ getUserVideos异常:",n),{success:!1,error:n.message,data:[]}}}async getVideoById(e){try{const r=Q.getCurrentUser();if(!r)throw new Error("User not authenticated");const{data:n,error:s}=await B.from("videos").select("*").eq("id",e).eq("user_id",r.id).single();if(s)throw s;return{success:!0,data:n}}catch(r){return console.error("Error getting video:",r),{success:!1,error:r.message}}}async updateVideo(e,r){try{const n=Q.getCurrentUser();if(!n)throw new Error("User not authenticated");const{data:s,error:i}=await B.from("videos").update({...r,updated_at:new Date().toISOString()}).eq("id",e).eq("user_id",n.id).select().single();if(i)throw i;return{success:!0,data:s,message:"Video updated successfully!"}}catch(n){return console.error("Error updating video:",n),{success:!1,error:n.message}}}async deleteVideo(e){try{const r=Q.getCurrentUser();if(!r)throw new Error("User not authenticated");const{error:n}=await B.from("videos").delete().eq("id",e).eq("user_id",r.id);if(n)throw n;return{success:!0,message:"Video deleted successfully!"}}catch(r){return console.error("Error deleting video:",r),{success:!1,error:r.message}}}async getUserStats(){try{const e=Q.getCurrentUser();if(!e)throw new Error("User not authenticated");const{data:r,error:n}=await B.from("videos").select("id, created_at, math_topics, difficulty_level").eq("user_id",e.id);if(n)throw n;const s={totalVideos:r.length,videosThisWeek:r.filter(i=>{const o=new Date;return o.setDate(o.getDate()-7),new Date(i.created_at)>o}).length,videosThisMonth:r.filter(i=>{const o=new Date;return o.setMonth(o.getMonth()-1),new Date(i.created_at)>o}).length,topicCounts:{},difficultyLevels:{}};return r.forEach(i=>{i.math_topics&&i.math_topics.forEach(o=>{s.topicCounts[o]=(s.topicCounts[o]||0)+1}),i.difficulty_level&&(s.difficultyLevels[i.difficulty_level]=(s.difficultyLevels[i.difficulty_level]||0)+1)}),{success:!0,data:s}}catch(e){return console.error("Error getting user stats:",e),{success:!1,error:e.message}}}async searchUserVideos(e,r={}){try{const n=Q.getCurrentUser();if(!n)throw new Error("User not authenticated");let s=B.from("videos").select("*").eq("user_id",n.id);e&&(s=s.or(`title.ilike.%${e}%,question.ilike.%${e}%,description.ilike.%${e}%`)),r.language&&(s=s.eq("language",r.language)),r.difficulty_level&&(s=s.eq("difficulty_level",r.difficulty_level)),r.math_topics&&r.math_topics.length>0&&(s=s.contains("math_topics",r.math_topics)),s=s.order("created_at",{ascending:!1});const{data:i,error:o}=await s;if(o)throw o;return{success:!0,data:i,count:i.length}}catch(n){return console.error("Error searching videos:",n),{success:!1,error:n.message}}}async canGenerateVideo(){try{console.log("🔍 userService.canGenerateVideo 开始...");const e=Q.getCurrentUser();if(!e)return console.log("❌ 用户未认证"),{canGenerate:!1,reason:"Not authenticated"};console.log("👤 当前用户:",e.email);const r=new Promise((i,o)=>{setTimeout(()=>o(new Error("Rate limit check timeout")),5e3)}),n=(async()=>{const i=new Date;i.setHours(i.getHours()-1);const{data:o,error:l}=await B.from("videos").select("id").eq("user_id",e.id).gte("created_at",i.toISOString());if(l)throw console.error("❌ Supabase查询错误:",l),l;const u=o.length,c=10;return console.log("✅ 速率限制检查完成，过去1小时视频数:",u),{canGenerate:u<c,reason:u>=c?`Rate limit exceeded. You can generate ${c} videos per hour.`:null,videosRemaining:Math.max(0,c-u)}})();return await Promise.race([n,r])}catch(e){return console.error("❌ canGenerateVideo异常:",e),{canGenerate:!0,reason:null,videosRemaining:10,error:e.message}}}}const ss=new Ww,qw={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_DEBUG_MODE:"true",VITE_MANIM_API_ENDPOINT:"http://127.0.0.1:5001",VITE_QWEN_API_KEY:"sk-1899f80e08854bdcbe0b3bc64b661ef4",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVmd2hjdXlqZWpsY3JjbG5pZ2RpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTIyMTQxMTgsImV4cCI6MjA2Nzc5MDExOH0.yvR8hghfWQfFDeYvx-19Zx0OMPQPnickYVivKmWAXEc",VITE_SUPABASE_URL:"https://ufwhcuyjejlcrclnigdi.supabase.co"};function Gw({user:t,onLoginRequired:e}){var lu,au,uu,cu,du,hu,fu,pu,mu;const[r,n]=j.useState(""),[s,i]=j.useState("zh"),[o,l]=j.useState(!1),[u,c]=j.useState(0),[d,h]=j.useState(""),[f,v]=j.useState(null),[y,x]=j.useState(null),[k,m]=j.useState(!1),[p,g]=j.useState(!1),[w,b]=j.useState(null),[E,P]=j.useState(null),[O,J]=j.useState(null),[M,te]=j.useState(!1),[K,Te]=j.useState(0),[ft,Qe]=j.useState(0),[it,Le]=j.useState(0),[A,z]=j.useState([]),[S,T]=j.useState(!1),D={zh:["解方程：2x + 5 = 15","求底边为8，高为6的三角形面积","化简：(3x + 2)(x - 4)","什么是一元一次方程？","解不等式：3x - 7 > 14"],en:["Solve for x: 2x + 5 = 15","Find the area of a triangle with base 8 and height 6","Simplify: (3x + 2)(x - 4)","What is a linear equation?","Solve the inequality: 3x - 7 > 14"]},ve=_=>{n(_)},Tt=async()=>{var _,I;if(o){console.warn("生成流程正在进行中，忽略重复点击");return}if(l(!0),console.log("🎬 生成视频按钮被点击"),console.log("当前问题:",r),console.log("当前用户:",t),!r.trim()){console.log("❌ 问题为空，不执行生成"),l(!1);return}if(!t){console.log("❌ 用户未登录，显示登录提示"),m(!0),l(!1);return}console.log("✅ 开始生成视频流程");try{console.log("🔍 开始检查速率限制...");const C=await Promise.race([ss.canGenerateVideo(),new Promise(($,L)=>setTimeout(()=>L(new Error("Rate limit check timeout")),3e3))]);if(console.log("✅ 速率限制检查结果:",C),C.error)console.warn("⚠️ 速率限制检查出错，跳过检查:",C.error);else if(!C.canGenerate){console.log("❌ 速率限制，显示限制提示"),P(C),l(!1);return}}catch(C){console.warn("⚠️ 速率限制检查超时或失败，跳过检查:",C.message)}c(0),h("准备开始..."),v(null),x(null),m(!1),P(null),b(null);try{console.log("🔍 步骤1: 分析数学问题"),h("🔍 分析数学问题..."),c(10),await Ur(1e3),console.log("🤖 步骤2: 调用通义千问API解题"),h("🤖 AI解题分析中..."),c(25),console.log("📡 开始调用QWEN API...");let C;try{C=await bn(r,s)}catch{h("AI接口超时或出错，请重试"),c(0),l(!1),v({success:!1,error:"AI接口超时或出错，请重试"});return}if(console.log("✅ QWEN API调用结果:",C),!C.success){h("AI解题失败，请重试"),c(0),l(!1),v({success:!1,error:C.error||"AI解题失败，请重试"});return}console.log("📝 步骤3: 生成教学脚本"),h("📝 生成教学脚本..."),c(40),await Ur(1500),console.log("🎬 步骤4: 创建数学动画"),h("🎬 创建数学动画..."),c(60),await Ur(2e3),console.log("🎤 步骤5: 生成多语言语音"),h("🎤 合成多语言语音..."),c(80),await Ur(1500),console.log("🎥 步骤6: 渲染最终视频"),h("🎥 渲染最终视频..."),c(95),await Ur(2e3),console.log("🧮 步骤7: Manim动画生成"),h("🧮 Manim动画生成中..."),c(98);let $="";if(C.data&&C.data.content)$=C.data.content;else if(C.output&&C.output.text)$=C.output.text;else if(C.data&&C.data.output&&C.data.output.text)$=C.data.output.text;else throw console.error("❌ 无法解析AI响应内容:",C),new Error("AI响应格式错误");console.log("📝 原始AI解答内容:",$);let L=[];const se=[/\*\*详细解题步骤\*\*[\s\S]*?(?=\*\*|$)/,/详细解题步骤[\s\S]*?(?=(\*\*|最终答案|验证过程|相关数学概念|常见错误|$))/,/\*\*解题步骤\*\*[\s\S]*?(?=\*\*|$)/,/解题步骤[\s\S]*?(?=(\*\*|最终答案|验证过程|相关数学概念|常见错误|$))/];let Je="";for(const me of se){const U=$.match(me);if(U){Je=U[0],console.log("✅ 找到详细解题步骤块:",Je.substring(0,100)+"...");break}}if(Je){const me=[/(\d+)[.、\)]\s*([^\n]+(?:\n(?!\d+[.、\)])[^\n]*)*)/g,/(\d+)\s*[.、\)]\s*([^\n]+)/g];for(const U of me){const we=[...Je.matchAll(U)];if(we&&we.length>0){const ee=new Map;we.forEach(G=>{const pt=parseInt(G[1]),En=G[2].trim();(!ee.has(pt)||En.length>ee.get(pt).length)&&ee.set(pt,En)}),L=Array.from(ee.keys()).sort((G,pt)=>G-pt).map(G=>ee.get(G)),console.log("✅ 提取编号步骤（保持顺序）:",L);break}}if(L.length===0){const U=Je.split(`
`).map(G=>G.trim()).filter(G=>G.length>10&&!G.startsWith("**")&&!G.startsWith("详细解题步骤")&&!G.startsWith("解题步骤")&&!G.startsWith("步骤")&&!G.startsWith("问题分析")&&!G.startsWith("最终答案")&&!G.startsWith("验证过程")),we=[];let ee="";for(const G of U)G.length>20?(ee&&we.push(ee.trim()),ee=G):ee&&(ee+=" "+G);ee&&we.push(ee.trim()),L=we.slice(0,8),console.log("✅ 按段落提取步骤（保持顺序）:",L)}}if(L.length===0){const me=[/(\d+)[.、\)]\s*([^\n]+(?:\n(?!\d+[.、\)])[^\n]*)*)/g,/(\d+)\s*[.、\)]\s*([^\n]+)/g];for(const U of me){const we=[...$.matchAll(U)];if(we&&we.length>0){const ee=new Map;we.forEach(G=>{const pt=parseInt(G[1]),En=G[2].trim();(!ee.has(pt)||En.length>ee.get(pt).length)&&ee.set(pt,En)}),L=Array.from(ee.keys()).sort((G,pt)=>G-pt).map(G=>ee.get(G)),console.log("✅ 全局编号提取（保持顺序）:",L);break}}}if(L.length===0&&(L=$.split(`
`).map(U=>U.trim()).filter(U=>U&&U.length>15&&!U.startsWith("**")&&!U.startsWith("题目：")&&!U.startsWith("问题分析：")&&!U.startsWith("最终答案：")&&!U.startsWith("验证过程：")&&!U.startsWith("相关数学概念：")&&!U.startsWith("常见错误")).slice(0,8),console.log("✅ 兜底段落提取:",L)),L.length<2&&(L=["分析题目条件","列出方程","移项求解","计算得出结果","验证答案"],console.log("🔄 使用备用步骤:",L)),L.length>0){const me=[],U=new Set;for(const ee of L){const G=ee.trim();G&&G.length>5&&!U.has(G)&&(me.push(G),U.add(G))}L=me;const we=`题目：${r.trim()}`;L[0].includes(r.trim().substring(0,10))||L.unshift(we),console.log("✅ 最终提取的步骤（保持顺序）:",L),console.log("📊 步骤数量:",L.length);for(let ee=0;ee<L.length;ee++)console.log(`步骤 ${ee+1}: ${L[ee]}`)}let Ee="";try{console.log("🎬 准备调用Manim生成视频，步骤顺序:"),L.forEach((me,U)=>{console.log(`  ${U+1}. ${me}`)}),Ee=await Ny(L,`qwen_video_${Date.now()}`),console.log("✅ Manim视频生成结果:",Ee)}catch(me){console.error("❌ Manim渲染失败:",me)}console.log("✅ 步骤8: 完成"),h("✅ 完成!"),c(100),await Ur(500);const ye={success:!0,video:{videoUrl:Ee||"/videos/sample-math-explanation.mp4",thumbnailUrl:"/images/video-thumbnail.jpg",duration:180,processingTime:45},mathSolution:C.data,metadata:{language:s,difficulty:"intermediate",mathTopics:cp(C.data),actualCost:dp(((_=C.data)==null?void 0:_.usage)||C.usage)},script:fp(C.data,s,r),question:r.trim()};console.log("🎉 设置最终结果:",ye),v(ye),x(hp((I=C.data)==null?void 0:I.usage)),console.log("💾 保存视频到数据库"),await pp(ye)}catch(C){console.error("❌ 视频生成失败:",C),v({success:!1,error:C.message})}finally{console.log("🏁 生成流程结束"),l(!1)}},bn=async(_,I)=>{var Je;console.log("🔑 检查API密钥...");const C="sk-1899f80e08854bdcbe0b3bc64b661ef4";console.log("🔍 环境变量检查:",{VITE_QWEN_API_KEY:"***已配置***",import_meta_env:Object.keys(qw).filter(Ee=>Ee.includes("QWEN"))}),console.log("✅ API密钥已配置"),console.log("🌐 测试SDK服务器连接...");try{const Ee=await fetch("http://127.0.0.1:8002/api/qwen",{method:"OPTIONS",headers:{"Content-Type":"application/json"}});console.log("✅ SDK服务器连接正常，状态码:",Ee.status)}catch(Ee){throw console.error("❌ SDK服务器连接失败:",Ee),console.error("请确保SDK服务器正在运行: python qwen_sdk_server.py"),new Error(`SDK服务器连接失败: ${Ee.message}`)}console.log("📝 构建数学提示...");const $=Mr(_,I);console.log("✅ 提示构建完成，长度:",$.length);let L=null;for(let Ee=0;Ee<3;Ee++)try{console.log(`🔄 尝试第 ${Ee+1} 次API调用...`),console.log("📡 请求地址:","http://127.0.0.1:8002/api/qwen"),console.log("📄 请求数据:",{api_key:C?"***已配置***":"未配置",messages:[{role:"system",content:I==="zh"?"你是专业的K12数学老师，请用清晰的中文解释数学概念和解题步骤。":"You are a professional K12 math teacher. Please explain math concepts and solution steps clearly in English."},{role:"user",content:$.substring(0,100)+"..."}],temperature:.1,max_tokens:1e3,top_p:.8});const ye=new AbortController,me=setTimeout(()=>{console.log("⏰ 请求超时，正在中断..."),ye.abort()},3e4);try{const U=await fetch("http://127.0.0.1:8002/api/qwen",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({api_key:C,messages:[{role:"system",content:I==="zh"?"你是专业的K12数学老师，请用清晰的中文解释数学概念和解题步骤。":"You are a professional K12 math teacher. Please explain math concepts and solution steps clearly in English."},{role:"user",content:$}],temperature:.1,max_tokens:1e3,top_p:.8}),signal:ye.signal});if(clearTimeout(me),console.log("📊 响应状态:",U.status,U.statusText),console.log("📊 响应头:",Object.fromEntries(U.headers.entries())),!U.ok){const G=await U.text();throw console.error("❌ 服务器错误响应:",G),new Error(`服务器错误: ${U.status} ${U.statusText}`)}const we=await U.json();return console.log("✅ API调用成功，响应数据:",we),{success:!0,data:{content:((Je=we.output)==null?void 0:Je.text)||"",usage:we.usage||{},model:"qwen-plus",requestId:we.request_id}}}catch(U){throw clearTimeout(me),console.error("🔍 详细错误信息:",{name:U.name,message:U.message,stack:U.stack}),U.name==="AbortError"?(console.error("❌ 请求超时被中断"),new Error("请求超时，请稍后重试")):U.name==="TypeError"&&U.message.includes("Failed to fetch")?(console.error("❌ 网络连接失败"),new Error("网络连接失败，请检查SDK服务器是否运行")):(console.error("❌ API调用异常:",U),U)}}catch(ye){if(console.error(`❌ 第 ${Ee+1} 次API调用失败:`,ye),L=`网络连接失败: ${ye.message}`,ye.name==="AbortError"||ye.message.includes("超时")){console.log("🔄 超时错误，将重试...");continue}else if(ye.name==="TypeError"&&ye.message.includes("Failed to fetch")){console.log("🔄 网络连接错误，将重试...");continue}else{console.log("❌ 非重试错误，停止重试");break}}console.log("🔄 所有重试失败，使用客户端备用响应"),console.log("❌ 最终错误:",L);const se=At(_,I);return{success:!0,data:{content:se,usage:{input_tokens:_.length,output_tokens:se.length},model:"client-fallback",requestId:`client_${Date.now()}`}}},At=(_,I)=>I==="zh"?_.includes("2x + 5 = 15")||_.includes("2x+5=15")?`**数学问题解答**

**题目：** 解方程 2x + 5 = 15

**问题分析：**
这是一个一元一次方程，需要通过移项和化简来求解未知数x的值。

**详细解题步骤：**
1. **移项** - 将常数项移到等号右边
   2x + 5 = 15
   2x = 15 - 5
   2x = 10

2. **系数化1** - 两边同时除以x的系数
   x = 10 ÷ 2
   x = 5

**最终答案：** x = 5

**验证过程：**
将 x = 5 代入原方程：
2×5 + 5 = 10 + 5 = 15 ✓
验证正确！

**相关数学概念：**
- 一元一次方程
- 移项法则
- 等式性质

**常见错误提醒：**
- 移项时要变号
- 系数化1时要注意除法运算
- 最后要验证答案的正确性

*注：由于网络连接问题，此为本地解答。完整的AI解答请稍后重试。*`:`**数学问题解答**

**题目：** ${_}

**解题思路：**
1. 仔细阅读题目，理解题意
2. 找出已知条件和未知量
3. 选择合适的数学方法
4. 逐步计算求解
5. 检验答案的合理性

**建议：**
由于当前网络连接问题，建议：
- 确认题目是否完整
- 检查是否包含所有必要的数字和条件
- 稍后重试获取完整的AI解答

*注：这是简化的本地解答，完整的AI解答请稍后重试。*`:`**Math Problem Solution**

**Question:** ${_}

**Solution Approach:**
1. Read the problem carefully
2. Identify known values and unknowns
3. Choose appropriate mathematical method
4. Solve step by step
5. Verify the answer

**Note:** Due to network connectivity issues, this is a simplified local response. Please try again later for a complete AI-powered solution.`,Mr=(_,I)=>I==="zh"?`请详细解答这个K12数学问题：

题目：${_}

请严格按照以下结构回答，确保每个步骤都详细且按顺序：

**问题分析**
简要分析题目类型和解题思路

**详细解题步骤**
请按顺序列出每个解题步骤，每个步骤都要包含：
1. 步骤编号（1、2、3...）
2. 具体操作（如：移项、化简、代入等）
3. 详细解释（为什么要这样做）
4. 中间结果（显示计算过程）

例如：
1. 首先，我们需要将方程中的常数项移到等号右边
   2x + 5 = 15
   2x = 15 - 5
   2x = 10
   解释：通过移项，我们将未知数项和常数项分离

2. 然后，我们通过除以系数来求解x
   2x = 10
   x = 10 ÷ 2
   x = 5
   解释：为了求解x，我们需要消除x的系数2

**最终答案**
明确给出最终答案

**验证过程**
将答案代入原方程验证

**相关数学概念**
涉及的核心数学概念

**常见错误提醒**
学生容易犯的错误

请确保每个步骤都详细完整，适合K12学生理解。`:`Please solve this K12 math problem in detail:

Question: ${_}

Please structure your answer exactly as follows, ensuring each step is detailed and in order:

**Problem Analysis**
Briefly analyze the problem type and solution approach

**Detailed Solution Steps**
Please list each solution step in order, each step should include:
1. Step number (1, 2, 3...)
2. Specific operation (e.g., move terms, simplify, substitute, etc.)
3. Detailed explanation (why we do this)
4. Intermediate results (show calculation process)

For example:
1. First, we need to move the constant term to the right side of the equation
   2x + 5 = 15
   2x = 15 - 5
   2x = 10
   Explanation: By moving terms, we separate the unknown term from the constant term

2. Then, we solve for x by dividing by the coefficient
   2x = 10
   x = 10 ÷ 2
   x = 5
   Explanation: To solve for x, we need to eliminate the coefficient 2 of x

**Final Answer**
Clearly state the final answer

**Verification Process**
Substitute the answer back into the original equation to verify

**Related Math Concepts**
Core mathematical concepts involved

**Common Mistakes to Avoid**
Mistakes students commonly make

Please ensure each step is detailed and complete, suitable for K12 students to understand.`,cp=_=>{const I=[];let C="";if(_&&_.content)C=_.content;else if(_&&_.data&&_.data.content)C=_.data.content;else if(_&&_.output&&_.output.text)C=_.output.text;else if(_&&typeof _=="string")C=_;else return console.warn("⚠️ extractMathTopics: solution参数无效，使用默认主题",_),["代数"];const $=C.toLowerCase();return($.includes("方程")||$.includes("equation"))&&I.push("方程"),($.includes("几何")||$.includes("geometry"))&&I.push("几何"),($.includes("函数")||$.includes("function"))&&I.push("函数"),($.includes("不等式")||$.includes("inequality"))&&I.push("不等式"),I.length>0?I:["代数"]},dp=_=>_?`¥${((_.total_tokens||0)*.004/1e3).toFixed(4)}`:"$0.002",hp=_=>{if(!_)return null;const C=(_.total_tokens||0)*.004/1e3;return{llm:C,tts:.002,video:.3,animation:.1,total:()=>C+.002+.3+.1}},ho=_=>{if(!_)return"";let I=_.replace(/\$([^$]+)\$/g,"$1");return I=I.replace(/\$\$([^$]+)\$\$/g,"$1"),I=I.replace(/\\[a-zA-Z]+/g,""),I=I.replace(/\{[^}]*\}/g,""),I=I.replace(/\\\(/g,"").replace(/\\\)/g,""),I=I.replace(/\\\[/g,"").replace(/\\\]/g,""),I=I.replace(/\s+/g," ").trim(),I},fp=(_,I,C)=>{let $="";_&&_.content?$=_.content:_&&_.data&&_.data.content?$=_.data.content:_&&_.output&&_.output.text?$=_.output.text:_&&typeof _=="string"?$=_:$=I==="zh"?"数学解题步骤":"Math solution steps";const L=ho($);return{title:I==="zh"?`数学解题：${C||"数学问题"}`:`Math Solution: ${C||"Math Problem"}`,scenes:[{sceneNumber:1,text:I==="zh"?"让我们一步步解决这个数学问题":"Let's solve this math problem step by step",duration:30},{sceneNumber:2,text:L.substring(0,200)+(L.length>200?"...":""),duration:60}]}},Ur=_=>new Promise(I=>setTimeout(I,_)),pp=async _=>{var I,C,$;try{g(!0),b(null);const L={title:`Math Solution: ${_.question.substring(0,50)}...`,description:`AI-generated math teaching video for: ${_.question}`,question:_.question,videoUrl:_.video.videoUrl,thumbnailUrl:_.video.thumbnailUrl,duration:_.video.duration,language:_.metadata.language,mathTopics:_.metadata.mathTopics,difficultyLevel:_.metadata.difficulty,solutionData:{content:((I=_.mathSolution)==null?void 0:I.content)||"",usage:((C=_.mathSolution)==null?void 0:C.usage)||{},model:(($=_.mathSolution)==null?void 0:$.model)||"qwen-plus",script:_.script}},se=await ss.saveVideo(L);se.success?b({type:"success",message:s==="zh"?"视频已保存到您的账户":"Video saved to your account",videoId:se.data.id}):b({type:"error",message:se.error})}catch(L){console.error("保存视频失败:",L),b({type:"error",message:s==="zh"?"保存失败，请重试":"Save failed, please try again"})}finally{g(!1)}},mp=()=>a.jsx(ce,{className:"border-red-200 bg-red-50",children:a.jsx(de,{className:"p-6",children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center",children:a.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-lg font-medium text-red-800",children:s==="zh"?"生成限制":"Generation Limit"}),a.jsx("p",{className:"mt-2 text-sm text-red-700",children:E==null?void 0:E.reason}),a.jsx("p",{className:"mt-1 text-sm text-red-600",children:s==="zh"?`剩余次数: ${(E==null?void 0:E.videosRemaining)||0}`:`Remaining: ${(E==null?void 0:E.videosRemaining)||0}`}),a.jsx("div",{className:"mt-4",children:a.jsx(V,{variant:"outline",onClick:()=>P(null),className:"border-red-300 text-red-700 hover:bg-red-100",children:s==="zh"?"我知道了":"I Understand"})})]})]})})}),gp=()=>{var _,I;if(!f||!f.success){alert("请先生成视频内容");return}if(T(!0),Te(0),Qe(0),Le(0),te(!1),(_=f.video)!=null&&_.videoUrl&&f.video.videoUrl.startsWith("/rendered_videos/"))console.log("🎬 准备播放真实视频:",f.video.videoUrl),setTimeout(()=>{const C=document.querySelector("video");C&&(C.scrollIntoView({behavior:"smooth",block:"center"}),console.log("📺 视频元素已找到，准备播放"))},100);else{const C=((I=f.mathSolution)==null?void 0:I.content)||"",$=vp(C);z($)}},vp=_=>{if(!_)return[];const C=ho(_).split(`
`).filter(L=>L.trim()&&L.length>10),$=[];$.push({title:s==="zh"?"欢迎观看AI数学教学":"Welcome to AI Math Teaching",content:s==="zh"?"今天我们来解决这个数学问题，让我们一步步分析。":"Today we will solve this math problem step by step.",duration:3e3});for(let L=0;L<Math.min(C.length,6);L++){const se=C[L].trim();se&&!se.startsWith("**")&&$.push({title:s==="zh"?`步骤 ${$.length}`:`Step ${$.length}`,content:se,duration:4e3})}return $.push({title:s==="zh"?"解题完成":"Solution Complete",content:s==="zh"?"通过以上步骤，我们成功解决了这个数学问题。希望这个AI教学视频对您有帮助！":"Through these steps, we successfully solved this math problem. Hope this AI teaching video helps you!",duration:3e3}),$},yp=()=>{M?xp():wp()},wp=()=>{A.length!==0&&(te(!0),iu(K))},xp=()=>{te(!1)},iu=_=>{if(!M||_>=A.length){kp();return}const I=A[_];Te(_);const C=(_+1)/A.length*100;Qe(C);const $=Math.floor(_*180/A.length);Le($);const L=setTimeout(()=>{M&&iu(_+1)},I.duration);J(L)},_p=()=>{O&&(clearTimeout(O),J(null)),te(!1),Te(0),Qe(0),Le(0)},kp=()=>{te(!1),Qe(100),Le(180),O&&(clearTimeout(O),J(null))},Sp=()=>{O&&(clearTimeout(O),J(null)),T(!1),te(!1),Te(0),Qe(0),Le(0)},ou=_=>{const I=Math.floor(_/60),C=_%60;return`${I.toString().padStart(2,"0")}:${C.toString().padStart(2,"0")}`},jp=()=>{var _;if((_=f==null?void 0:f.video)!=null&&_.videoUrl&&f.video.videoUrl.startsWith("/rendered_videos/")){const I=`${fo}${f.video.videoUrl}`,C=document.createElement("a");C.href=I,C.download=f.video.videoUrl.split("/").pop(),document.body.appendChild(C),C.click(),document.body.removeChild(C),alert(s==="zh"?`📥 视频下载开始！

• 文件: ${C.download}
• 类型: MP4视频
• 来源: Manim生成的AI数学教学动画
• 内容: 基于通义千问AI解题步骤`:`📥 Video download started!

• File: ${C.download}
• Type: MP4 Video
• Source: Manim-generated AI math teaching animation
• Content: Based on Qwen AI solution steps`)}else alert(s==="zh"?"⚠️ 只有生成的视频才能下载，请先生成有效视频。":"⚠️ Only generated videos can be downloaded. Please generate a valid video first.")},bp=()=>{const _=`${window.location.origin}/video/share/${Math.random().toString(36).substr(2,9)}`;navigator.share?navigator.share({title:s==="zh"?"AI数学教学视频":"AI Math Teaching Video",text:s==="zh"?"看看这个AI生成的数学教学视频！":"Check out this AI-generated math teaching video!",url:_}):navigator.clipboard.writeText(_).then(()=>{alert(s==="zh"?`🔗 分享链接已复制到剪贴板！

${_}

在实际应用中，这个链接会指向真实的视频资源。`:`🔗 Share link copied to clipboard!

${_}

In the actual application, this link will point to real video resources.`)}).catch(()=>{alert(s==="zh"?`🔗 分享链接：

${_}

请手动复制此链接进行分享。`:`🔗 Share link:

${_}

Please manually copy this link to share.`)})},Ep=()=>{var Je;if(!f||!f.success){alert(s==="zh"?"请先生成视频内容":"Please generate video content first");return}const _=((Je=f.mathSolution)==null?void 0:Je.content)||"",I=ho(_),C=Cp(I),$=new Blob([C],{type:"text/plain;charset=utf-8"}),L=URL.createObjectURL($),se=document.createElement("a");se.href=L,se.download="math_video_subtitles.srt",document.body.appendChild(se),se.click(),document.body.removeChild(se),URL.revokeObjectURL(L),alert(s==="zh"?`📄 字幕文件已生成并下载！

• 格式：SRT（通用字幕格式）
• 内容：基于AI解题步骤
• 时间轴：自动同步
• 支持多语言`:`📄 Subtitle file generated and downloaded!

• Format: SRT (universal subtitle format)
• Content: Based on AI solution steps
• Timeline: Auto-synchronized
• Multi-language support`)},Cp=_=>{const C=_.replace(/\*\*/g,"").replace(/\*/g,"").replace(/^[0-9]+\.\s*/gm,"").replace(/^[一二三四五六七八九十]+\.\s*/gm,"").replace(/^[a-zA-Z]+\.\s*/gm,"").split(`
`).filter(ye=>ye.trim()&&ye.length>5);let $="",L=1,se=0;$+=`${L}
`,$+=`00:00:00,000 --> 00:00:03,000
`,$+=`${s==="zh"?"欢迎观看AI数学教学视频":"Welcome to AI Math Teaching Video"}

`,L++,se=3;for(let ye=0;ye<Math.min(C.length,8);ye++){const me=C[ye].trim();if(me&&me.length>5){const U=As(se),we=As(se+4);$+=`${L}
`,$+=`${U} --> ${we}
`,$+=`${me}

`,L++,se+=4}}const Je=As(se),Ee=As(se+3);return $+=`${L}
`,$+=`${Je} --> ${Ee}
`,$+=`${s==="zh"?"解题完成，感谢观看！":"Solution complete, thanks for watching!"}

`,$},As=_=>{const I=Math.floor(_/3600),C=Math.floor(_%3600/60),$=_%60;return`${I.toString().padStart(2,"0")}:${C.toString().padStart(2,"0")}:${$.toString().padStart(2,"0")},${0 .toString().padStart(3,"0")}`},Np=()=>{const _=document.createElement("input");_.type="file",_.accept="image/*",_.onchange=I=>{const C=I.target.files[0];C&&(n(`[${s==="zh"?"已上传图片":"Image uploaded"}: ${C.name}]

${s==="zh"?`在实际应用中，这里会使用OCR识别图片中的数学公式。

请手动输入数学问题以继续演示。`:`In the actual application, OCR will be used to recognize math formulas in the image.

Please manually enter a math question to continue the demo.`}`),alert(s==="zh"?`📸 图片上传成功！

文件名: ${C.name}
大小: ${(C.size/1024).toFixed(2)} KB
类型: ${C.type}

在实际应用中，系统会自动识别图片中的数学公式并转换为文本。`:`📸 Image uploaded successfully!

Filename: ${C.name}
Size: ${(C.size/1024).toFixed(2)} KB
Type: ${C.type}

In the actual application, the system will automatically recognize math formulas in the image and convert them to text.`))},_.click()},Pp=()=>{if(!("webkitSpeechRecognition"in window)&&!("SpeechRecognition"in window)){alert(s==="zh"?`🎤 语音输入功能

您的浏览器不支持语音识别功能。

在实际应用中，这里会：
• 实时语音转文字
• 支持多种语言
• 智能识别数学术语
• 自动标点符号`:`🎤 Voice Input Feature

Your browser does not support speech recognition.

In the actual application, this will:
• Real-time speech-to-text
• Support multiple languages
• Intelligent recognition of math terms
• Automatic punctuation`);return}const _=window.SpeechRecognition||window.webkitSpeechRecognition,I=new _;I.lang=s==="zh"?"zh-CN":"en-US",I.continuous=!1,I.interimResults=!1,I.onstart=()=>{alert(s==="zh"?`🎤 开始录音...

请说出您的数学问题
点击"确定"后开始录音`:`🎤 Starting recording...

Please speak your math question
Click "OK" to start recording`)},I.onresult=C=>{const $=C.results[0][0].transcript;n($),alert(s==="zh"?`🎤 语音识别完成！

识别结果: ${$}`:`🎤 Speech recognition complete!

Recognition result: ${$}`)},I.onerror=C=>{alert(s==="zh"?`🎤 语音识别错误: ${C.error}`:`🎤 Speech recognition error: ${C.error}`)};try{I.start()}catch{alert(s==="zh"?`🎤 语音输入功能

启动语音识别时出现错误。`:`🎤 Voice Input Feature

Error starting speech recognition.`)}},Tp=()=>{n(""),v(null),x(null),T(!1),te(!1),Te(0),Qe(0),Le(0),m(!1)},Ap=()=>a.jsx(ce,{className:"border-orange-200 bg-orange-50",children:a.jsx(de,{className:"p-6",children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center",children:a.jsx("svg",{className:"w-6 h-6 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})})}),a.jsxs("div",{children:[a.jsx("div",{className:"font-bold text-orange-700 mb-2",children:s==="zh"?"需要登录":"Login Required"}),a.jsx("div",{className:"text-gray-700",children:s==="zh"?"请先登录后再生成视频。":"Please log in before generating videos."}),a.jsxs("div",{className:"mt-4 flex space-x-3",children:[a.jsx(V,{onClick:()=>{e?e():alert(s==="zh"?"请在首页登录后再试。":"Please log in on the home page and try again.")},className:"bg-orange-600 hover:bg-orange-700 text-white",children:s==="zh"?"立即登录":"Login Now"}),a.jsx(V,{variant:"outline",onClick:()=>m(!1),className:"border-orange-300 text-orange-700 hover:bg-orange-100",children:s==="zh"?"取消":"Cancel"})]})]})]})})}),fo="http://localhost:5001";return a.jsxs("div",{className:"max-w-4xl mx-auto p-6 space-y-8",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"🎬 AI数学视频生成演示"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"体验完整的AI驱动数学教学视频生成流程"}),t?a.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6",children:a.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[a.jsx("div",{className:"w-6 h-6 bg-green-100 rounded-full flex items-center justify-center",children:a.jsx("svg",{className:"w-4 h-4 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),a.jsxs("div",{children:[a.jsxs("span",{className:"text-green-800 font-medium",children:[s==="zh"?"已登录":"Logged In",": ",t.email]}),a.jsx("span",{className:"text-green-600 text-sm ml-2",children:s==="zh"?"可以生成视频":"Ready to generate videos"})]})]})}):a.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4 mb-6",children:a.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[a.jsx("div",{className:"w-6 h-6 bg-orange-100 rounded-full flex items-center justify-center",children:a.jsx("svg",{className:"w-4 h-4 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),a.jsxs("div",{children:[a.jsx("span",{className:"text-orange-800 font-medium",children:s==="zh"?"未登录":"Not Logged In"}),a.jsx("span",{className:"text-orange-600 text-sm ml-2",children:s==="zh"?"需要登录后才能生成视频":"Login required to generate videos"})]})]})}),a.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 mb-6",children:[a.jsx("h3",{className:"font-semibold text-blue-800 mb-2",children:"实时成本分析"}),a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-blue-700",children:"AI解题"}),a.jsx("div",{className:"text-blue-600",children:"~¥0.004"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-blue-700",children:"语音合成"}),a.jsx("div",{className:"text-blue-600",children:"~¥0.002"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-blue-700",children:"视频生成"}),a.jsx("div",{className:"text-blue-600",children:"~¥0.30"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-blue-700",children:"总成本"}),a.jsx("div",{className:"text-blue-600",children:"~¥0.31"})]})]})]})]}),a.jsxs(ce,{children:[a.jsx(Xe,{children:a.jsx(Ze,{children:"选择语言 / Select Language"})}),a.jsx(de,{children:a.jsx("div",{className:"flex flex-wrap gap-3",children:Object.entries({zh:"🇨🇳 中文",en:"🇺🇸 English"}).map(([_,I])=>a.jsx(V,{variant:s===_?"default":"outline",onClick:()=>i(_),className:"text-sm",children:I},_))})})]}),a.jsxs(ce,{children:[a.jsx(Xe,{children:a.jsx(Ze,{children:"示例问题 / Example Questions"})}),a.jsx(de,{children:a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:(D[s]||D.zh).map((_,I)=>a.jsx(V,{variant:"outline",className:"text-left p-3 h-auto",onClick:()=>ve(_),children:_},I))})})]}),a.jsxs(ce,{children:[a.jsx(Xe,{children:a.jsx(Ze,{children:"输入数学问题 / Enter Math Question"})}),a.jsx(de,{children:a.jsxs("div",{className:"space-y-4",children:[a.jsx(kf,{placeholder:s==="zh"?"输入您的数学问题，例如：解方程 2x + 5 = 15":"Enter your math question, e.g.: Solve 2x + 5 = 15",value:r,onChange:_=>n(_.target.value),className:"min-h-[100px] text-lg"}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{className:"flex space-x-2",children:[a.jsxs(V,{variant:"outline",size:"sm",onClick:Np,children:[a.jsx(jy,{className:"h-4 w-4 mr-2"}),s==="zh"?"上传图片":"Upload Image"]}),a.jsxs(V,{variant:"outline",size:"sm",onClick:Pp,children:[a.jsx(yy,{className:"h-4 w-4 mr-2"}),s==="zh"?"语音输入":"Voice Input"]}),a.jsxs(V,{variant:"outline",size:"sm",onClick:Tp,children:[a.jsx(Of,{className:"h-4 w-4 mr-2"}),s==="zh"?"清除":"Clear"]})]}),a.jsx(V,{onClick:Tt,disabled:!r.trim()||o,className:"bg-blue-600 hover:bg-blue-700",children:o?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),s==="zh"?"生成中...":"Generating..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Zn,{className:"h-4 w-4 mr-2"}),s==="zh"?"生成AI教学视频":"Generate AI Teaching Video"]})})]})]})})]}),k&&a.jsx(Ap,{}),E&&a.jsx(mp,{}),o&&a.jsx(ce,{children:a.jsx(de,{className:"p-6",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"font-semibold",children:d}),a.jsxs("span",{className:"text-sm text-gray-600",children:[u,"%"]})]}),a.jsx(Pf,{value:u,className:"w-full"}),a.jsx("p",{className:"text-sm text-gray-600",children:u<30?"正在分析您的数学问题...":u<50?"正在生成解题步骤...":u<80?"正在创建教学动画...":"正在渲染最终视频..."}),y&&a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mt-4",children:[a.jsx("h4",{className:"font-medium mb-2",children:"实时成本分析:"}),a.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[a.jsxs("div",{children:["AI解题: ¥",y.llm.toFixed(4)]}),a.jsxs("div",{children:["语音合成: ¥",y.tts.toFixed(3)]}),a.jsxs("div",{children:["视频生成: ¥",y.video.toFixed(2)]}),a.jsxs("div",{children:["数学动画: ¥",y.animation.toFixed(2)]}),a.jsxs("div",{className:"col-span-2 font-medium border-t pt-2",children:["总计: ¥",y.total().toFixed(4)]})]})]})]})})}),f&&a.jsxs(ce,{children:[a.jsx(Xe,{children:a.jsx(Ze,{className:"flex items-center",children:f.success?a.jsxs(a.Fragment,{children:[a.jsx(Ic,{className:"h-5 w-5 text-green-500 mr-2"}),s==="zh"?"🎉 视频生成成功!":"🎉 Video Generated Successfully!"]}):a.jsxs(a.Fragment,{children:[a.jsx(Do,{className:"h-5 w-5 text-red-500 mr-2"}),s==="zh"?"❌ 生成失败":"❌ Generation Failed"]})})}),a.jsx(de,{children:f.success?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[a.jsx("h4",{className:"font-semibold text-green-800 mb-2",children:"🤖 AI解题结果"}),a.jsx("div",{className:"text-sm text-green-700 whitespace-pre-wrap",children:((lu=f.mathSolution)==null?void 0:lu.content)||""}),a.jsxs("div",{className:"mt-3 text-xs text-green-600",children:["Token使用: ",((uu=(au=f.mathSolution)==null?void 0:au.usage)==null?void 0:uu.total_tokens)||0," | 成本: ",f.metadata.actualCost]})]}),(p||w)&&a.jsx("div",{className:`rounded-lg p-4 ${(w==null?void 0:w.type)==="success"?"bg-green-50 border border-green-200":(w==null?void 0:w.type)==="error"?"bg-red-50 border border-red-200":"bg-blue-50 border border-blue-200"}`,children:a.jsx("div",{className:"flex items-center space-x-2",children:p?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"}),a.jsx("span",{className:"text-blue-700",children:s==="zh"?"正在保存到您的账户...":"Saving to your account..."})]}):(w==null?void 0:w.type)==="success"?a.jsxs(a.Fragment,{children:[a.jsx(Ic,{className:"h-4 w-4 text-green-600"}),a.jsx("span",{className:"text-green-700",children:w.message})]}):(w==null?void 0:w.type)==="error"?a.jsxs(a.Fragment,{children:[a.jsx(Do,{className:"h-4 w-4 text-red-600"}),a.jsx("span",{className:"text-red-700",children:w.message})]}):null})}),S?a.jsxs("div",{className:"bg-black rounded-lg overflow-hidden",children:[a.jsx("div",{className:"bg-gray-900 text-white p-4 min-h-[400px] flex flex-col justify-center",children:(cu=f.video)!=null&&cu.videoUrl&&f.video.videoUrl.startsWith("/rendered_videos/")?a.jsxs("div",{className:"text-center mb-4",children:[a.jsxs("h3",{className:"text-xl font-bold mb-4",children:["🎬 ",s==="zh"?"AI数学教学视频":"AI Math Teaching Video"]}),a.jsx("video",{src:`${fo}${f.video.videoUrl}`,controls:!0,autoPlay:!1,style:{margin:"0 auto",maxWidth:"100%",width:"100%",maxHeight:"320px",background:"#000",borderRadius:"8px"},poster:f.video.thumbnailUrl,onError:_=>{console.error("视频加载失败:",_),console.log("尝试的视频URL:",`${fo}${f.video.videoUrl}`)},onLoadedData:()=>{console.log("✅ 视频加载成功:",f.video.videoUrl)},children:s==="zh"?"您的浏览器不支持视频播放。":"Your browser does not support the video tag."}),a.jsx("p",{className:"text-gray-300 mt-2 text-sm",children:s==="zh"?"点击播放按钮开始观看AI生成的数学教学动画":"Click play button to watch AI-generated math teaching animation"})]}):a.jsxs("div",{className:"text-center mb-4",children:[a.jsxs("h3",{className:"text-xl font-bold mb-4",children:["🎬 ",s==="zh"?"AI数学教学视频":"AI Math Teaching Video"]}),a.jsx("div",{className:"text-red-500 text-lg font-bold mb-2",children:s==="zh"?"⚠️ 视频生成失败，请重试！":"⚠️ Video generation failed, please try again!"}),a.jsx("p",{className:"text-gray-400 text-sm",children:s==="zh"?"未能生成有效视频文件，请重新生成。":"No valid video file generated, please try again."})]})}),a.jsxs("div",{className:"bg-gray-800 text-white p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[!((du=f.video)!=null&&du.videoUrl&&f.video.videoUrl.startsWith("/rendered_videos/"))&&a.jsxs(a.Fragment,{children:[a.jsxs(V,{variant:"outline",size:"sm",onClick:yp,className:"bg-blue-600 hover:bg-blue-700 text-white",children:[M?a.jsx(wy,{className:"h-4 w-4 mr-2"}):a.jsx(Zn,{className:"h-4 w-4 mr-2"}),M?s==="zh"?"暂停":"Pause":s==="zh"?"播放":"Play"]}),a.jsxs(V,{variant:"outline",size:"sm",onClick:_p,className:"bg-gray-600 hover:bg-gray-700 text-white",children:[a.jsx(xy,{className:"h-4 w-4 mr-2"}),s==="zh"?"重播":"Replay"]})]}),a.jsxs(V,{variant:"outline",size:"sm",onClick:Sp,className:"bg-red-600 hover:bg-red-700 text-white",children:[a.jsx(Do,{className:"h-4 w-4 mr-2"}),s==="zh"?"关闭":"Close"]})]}),a.jsx("div",{className:"text-sm text-gray-300",children:(hu=f.video)!=null&&hu.videoUrl&&f.video.videoUrl.startsWith("/rendered_videos/")?a.jsx("span",{children:s==="zh"?"真实AI数学动画视频":"Real AI Math Animation Video"}):a.jsxs("span",{children:[ou(it)," / ",ou(180)]})})]}),!((fu=f.video)!=null&&fu.videoUrl&&f.video.videoUrl.startsWith("/rendered_videos/"))&&a.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:a.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${ft}%`}})}),a.jsx("div",{className:"mt-2 text-xs text-gray-400 text-center",children:(pu=f.video)!=null&&pu.videoUrl&&f.video.videoUrl.startsWith("/rendered_videos/")?a.jsx("span",{children:s==="zh"?"🎬 由Manim生成的专业数学教学动画 - 基于通义千问AI解题内容":"🎬 Professional math teaching animation generated by Manim - Based on Qwen AI solution content"}):a.jsx("span",{children:s==="zh"?"AI数学教学演示 - 基于通义千问解题内容生成":"AI Math Teaching Demo - Generated based on Qwen solution content"})})]})]}):a.jsxs("div",{className:"bg-gray-100 rounded-lg p-8 text-center",children:[a.jsx(Zn,{className:"h-16 w-16 text-blue-600 mx-auto mb-4"}),a.jsxs("p",{className:"text-gray-600 mb-2",children:[s==="zh"?"视频时长":"Duration",": ",Math.floor(f.video.duration/60),":",(f.video.duration%60).toString().padStart(2,"0")]}),a.jsx(V,{variant:"outline",onClick:gp,children:s==="zh"?"▶️ 播放视频":"▶️ Play Video"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[a.jsx("h4",{className:"font-medium text-blue-800 mb-2",children:"📊 技术信息"}),a.jsxs("div",{className:"text-sm space-y-1",children:[a.jsxs("div",{children:["语言: ",f.metadata.language]}),a.jsxs("div",{children:["难度: ",f.metadata.difficulty]}),a.jsxs("div",{children:["数学主题: ",(mu=f.metadata.mathTopics)==null?void 0:mu.join(", ")]}),a.jsxs("div",{children:["处理时间: ",f.video.processingTime,"秒"]})]})]}),a.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[a.jsx("h4",{className:"font-medium text-green-800 mb-2",children:"💰 成本信息"}),a.jsxs("div",{className:"text-sm space-y-1",children:[a.jsxs("div",{children:["实际成本: ",f.metadata.actualCost]}),a.jsx("div",{children:"相比人工讲师: 节省98%+"}),a.jsx("div",{children:"相比专业制作: 节省99%+"}),a.jsx("div",{children:"质量: 专业级AI教学"})]})]})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.jsx("h4",{className:"font-medium mb-2",children:"📝 生成的教学脚本:"}),a.jsx("div",{className:"text-sm space-y-2",children:f.script.scenes.map((_,I)=>a.jsxs("div",{className:"border-l-2 border-blue-300 pl-3",children:[a.jsxs("div",{className:"font-medium",children:["场景 ",_.sceneNumber," (",_.duration,"秒)"]}),a.jsx("div",{className:"text-gray-600",children:_.text})]},I))})]}),a.jsxs("div",{className:"flex flex-wrap gap-4",children:[a.jsxs(V,{onClick:jp,children:[a.jsx(Tf,{className:"h-4 w-4 mr-2"}),s==="zh"?"下载视频":"Download Video"]}),a.jsxs(V,{variant:"outline",onClick:bp,children:[a.jsx(If,{className:"h-4 w-4 mr-2"}),s==="zh"?"分享链接":"Share Link"]}),a.jsxs(V,{variant:"outline",onClick:Ep,children:[a.jsx(my,{className:"h-4 w-4 mr-2"}),s==="zh"?"生成字幕":"Generate Subtitles"]}),a.jsxs(V,{variant:"outline",onClick:()=>v(null),children:[a.jsx(Af,{className:"h-4 w-4 mr-2"}),s==="zh"?"重新生成":"Regenerate"]})]})]}):a.jsxs("div",{className:"text-center text-red-600",children:[a.jsx("p",{className:"mb-4",children:f.error}),a.jsx(V,{variant:"outline",onClick:()=>v(null),children:s==="zh"?"🔄 重试":"🔄 Try Again"})]})})]})]})}const nu=Or.forwardRef(({className:t,variant:e,...r},n)=>a.jsx("div",{ref:n,role:"alert",className:Fe("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{"border-red-500 text-red-900 bg-red-50":e==="destructive","border-border bg-background text-foreground":!e},t),...r}));nu.displayName="Alert";const su=Or.forwardRef(({className:t,...e},r)=>a.jsx("div",{ref:r,className:Fe("text-sm [&_p]:leading-relaxed",t),...e}));su.displayName="AlertDescription";const Hw=Or.forwardRef(({className:t,...e},r)=>a.jsx("h5",{ref:r,className:Fe("mb-1 font-medium leading-none tracking-tight",t),...e}));Hw.displayName="AlertTitle";function Kw({onAuthSuccess:t,onClose:e}){const[r,n]=j.useState(!0),[s,i]=j.useState(!1),[o,l]=j.useState(!1),[u,c]=j.useState({type:"",text:""}),[d,h]=j.useState({name:"",email:"",password:"",confirmPassword:"",grade:"",role:"student"}),f=p=>{h({...d,[p.target.name]:p.target.value}),u.text&&c({type:"",text:""})},v=()=>{const{email:p,password:g,confirmPassword:w,name:b}=d;if(!p||!g)return c({type:"error",text:"请填写邮箱和密码"}),!1;if(!/\S+@\S+\.\S+/.test(p))return c({type:"error",text:"请输入有效的邮箱地址"}),!1;if(g.length<6)return c({type:"error",text:"密码长度至少6位"}),!1;if(!r){if(!b.trim())return c({type:"error",text:"请输入姓名"}),!1;if(g!==w)return c({type:"error",text:"两次输入的密码不一致"}),!1}return!0},y=async p=>{if(p.preventDefault(),!!v()){l(!0),c({type:"",text:""});try{let g;r?g=await Q.signIn(d.email,d.password):g=await Q.signUp(d.email,d.password,{fullName:d.name,role:d.role,gradeLevel:d.grade}),g.success?(c({type:"success",text:g.message||(r?"登录成功！":"注册成功！")}),setTimeout(()=>{t==null||t(g.user)},1e3)):c({type:"error",text:g.error})}catch{c({type:"error",text:"操作失败，请重试"})}finally{l(!1)}}},x=()=>{n(!r),h({name:"",email:"",password:"",confirmPassword:"",grade:"",role:"student"}),c({type:"",text:""})},k=async()=>{l(!0),c({type:"",text:""});try{const p=await Q.signInWithGoogle();p.success?c({type:"success",text:"正在跳转到Google登录..."}):c({type:"error",text:p.error})}catch{c({type:"error",text:"Google登录失败，请重试"})}finally{l(!1)}},m=async()=>{if(!d.email){c({type:"error",text:"请先输入邮箱地址"});return}l(!0),c({type:"",text:""});try{const p=await Q.resetPassword(d.email);p.success?c({type:"success",text:p.message}):c({type:"error",text:p.error})}catch{c({type:"error",text:"重置密码失败，请重试"})}finally{l(!1)}};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"w-full max-w-md",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsxs("div",{className:"flex items-center justify-center mb-4",children:[a.jsx(Bl,{className:"h-12 w-12 text-blue-600"}),a.jsx("span",{className:"text-3xl font-bold text-white ml-2",children:"MathTutor AI"})]}),a.jsx("p",{className:"text-gray-200",children:"Your AI-powered math learning companion"})]}),a.jsxs(ce,{children:[a.jsxs(Xe,{children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx(Ze,{className:"text-center",children:r?"Welcome Back!":"Join MathTutor AI"}),e&&a.jsx(V,{variant:"ghost",size:"sm",onClick:e,className:"text-gray-500 hover:text-gray-700",children:"✕"})]}),a.jsx("p",{className:"text-center text-gray-600 text-sm",children:r?"Sign in to continue your learning journey":"Create your account to start learning"})]}),a.jsxs(de,{children:[u.text&&a.jsx(nu,{className:`mb-4 ${u.type==="error"?"border-red-500":"border-green-500"}`,children:a.jsx(su,{className:u.type==="error"?"text-red-600":"text-green-600",children:u.text})}),a.jsxs("form",{onSubmit:y,className:"space-y-4",children:[!r&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),a.jsxs("div",{className:"relative",children:[a.jsx(Wl,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),a.jsx("input",{type:"text",name:"name",value:d.name,onChange:f,className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter your full name",required:!r})]})]}),!r&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm Password"}),a.jsxs("div",{className:"relative",children:[a.jsx(Oc,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),a.jsx("input",{type:"password",name:"confirmPassword",value:d.confirmPassword,onChange:f,className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Confirm your password",required:!r})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),a.jsxs("div",{className:"relative",children:[a.jsx(vy,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),a.jsx("input",{type:"email",name:"email",value:d.email,onChange:f,className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter your email",required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),a.jsxs("div",{className:"relative",children:[a.jsx(Oc,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),a.jsx("input",{type:s?"text":"password",name:"password",value:d.password,onChange:f,className:"w-full pl-10 pr-10 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter your password",required:!0}),a.jsx("button",{type:"button",onClick:()=>i(!s),className:"absolute right-3 top-3 text-gray-400 hover:text-gray-600",children:s?a.jsx(fy,{className:"h-4 w-4"}):a.jsx(py,{className:"h-4 w-4"})})]})]}),!r&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Grade Level"}),a.jsxs("select",{name:"grade",value:d.grade,onChange:f,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!r,children:[a.jsx("option",{value:"",children:"Select your grade"}),a.jsx("option",{value:"K",children:"Kindergarten"}),a.jsx("option",{value:"1",children:"1st Grade"}),a.jsx("option",{value:"2",children:"2nd Grade"}),a.jsx("option",{value:"3",children:"3rd Grade"}),a.jsx("option",{value:"4",children:"4th Grade"}),a.jsx("option",{value:"5",children:"5th Grade"}),a.jsx("option",{value:"6",children:"6th Grade"}),a.jsx("option",{value:"7",children:"7th Grade"}),a.jsx("option",{value:"8",children:"8th Grade"}),a.jsx("option",{value:"9",children:"9th Grade"}),a.jsx("option",{value:"10",children:"10th Grade"}),a.jsx("option",{value:"11",children:"11th Grade"}),a.jsx("option",{value:"12",children:"12th Grade"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"I am a:"}),a.jsxs("div",{className:"flex space-x-4",children:[a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"radio",name:"role",value:"student",checked:d.role==="student",onChange:f,className:"mr-2"}),"Student"]}),a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"radio",name:"role",value:"parent",checked:d.role==="parent",onChange:f,className:"mr-2"}),"Parent"]}),a.jsxs("label",{className:"flex items-center",children:[a.jsx("input",{type:"radio",name:"role",value:"teacher",checked:d.role==="teacher",onChange:f,className:"mr-2"}),"Teacher"]})]})]})]}),a.jsx(V,{type:"submit",className:"w-full",disabled:o,children:o?r?"Signing In...":"Creating Account...":r?"Sign In":"Create Account"}),r&&a.jsx("div",{className:"text-center",children:a.jsx("button",{type:"button",onClick:m,className:"text-sm text-blue-600 hover:underline",disabled:o,children:"Forgot your password?"})})]}),a.jsxs("div",{className:"relative mt-6",children:[a.jsx("div",{className:"absolute inset-0 flex items-center",children:a.jsx("span",{className:"w-full border-t"})}),a.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:a.jsx("span",{className:"bg-white px-2 text-gray-500",children:"Or"})})]}),a.jsxs(V,{type:"button",variant:"outline",className:"w-full mt-4",onClick:k,disabled:o,children:[a.jsx(dy,{className:"h-4 w-4 mr-2"}),"Continue with Google"]}),a.jsx("div",{className:"mt-6 text-center",children:a.jsxs("p",{className:"text-sm text-gray-600",children:[r?"Don't have an account?":"Already have an account?",a.jsx("button",{onClick:x,className:"ml-1 text-blue-600 hover:underline font-medium",children:r?"Sign up":"Sign in"})]})}),!r&&a.jsx("div",{className:"mt-4 p-3 bg-blue-50 rounded-md",children:a.jsx("p",{className:"text-xs text-blue-800",children:"By creating an account, you agree to our Terms of Service and Privacy Policy. We're committed to protecting your privacy and providing a safe learning environment."})})]})]}),a.jsxs("div",{className:"mt-8 text-center",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Why Choose MathTutor AI?"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[a.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-lg p-3",children:[a.jsx("div",{className:"font-medium text-blue-300",children:"AI-Powered"}),a.jsx("div",{className:"text-gray-200",children:"Personalized explanations"})]}),a.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-lg p-3",children:[a.jsx("div",{className:"font-medium text-green-300",children:"Progress Tracking"}),a.jsx("div",{className:"text-gray-200",children:"Monitor improvement"})]}),a.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-lg p-3",children:[a.jsx("div",{className:"font-medium text-purple-300",children:"Gamified"}),a.jsx("div",{className:"text-gray-200",children:"Fun and engaging"})]})]})]})]})})}const sp=Or.forwardRef(({className:t,type:e,...r},n)=>a.jsx("input",{type:e,className:Fe("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...r}));sp.displayName="Input";const Gr=Or.forwardRef(({className:t,...e},r)=>a.jsx("label",{ref:r,className:Fe("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",t),...e}));Gr.displayName="Label";class Qw{constructor(){this.storagePolicy={maxFileSize:100*1024*1024,allowedTypes:["video/mp4","video/webm","video/quicktime"],bucketName:"videos"}}async saveVideoMetadata(e){const r=Q.getCurrentUser();if(!r)throw new Error("User not authenticated");try{const{data:n,error:s}=await B.from("videos").insert([{user_id:r.id,title:e.title||this.generateVideoTitle(e.question),description:e.description||"",question:e.question,video_url:e.videoUrl,thumbnail_url:e.thumbnailUrl||"",duration:e.duration||0,language:e.language||"zh",math_topics:e.mathTopics||[],difficulty_level:e.difficultyLevel||"intermediate",solution_data:e.solutionData||{},processing_status:e.processingStatus||"completed"}]).select().single();if(s)throw s;return{success:!0,video:n}}catch(n){return console.error("Error saving video metadata:",n),{success:!1,error:n.message}}}async getUserVideos(e={}){const r=Q.getCurrentUser();if(!r)throw new Error("User not authenticated");try{let n=B.from("videos").select("*").eq("user_id",r.id).order("created_at",{ascending:!1});e.language&&(n=n.eq("language",e.language)),e.mathTopics&&e.mathTopics.length>0&&(n=n.contains("math_topics",e.mathTopics)),e.difficultyLevel&&(n=n.eq("difficulty_level",e.difficultyLevel)),e.search&&(n=n.or(`title.ilike.%${e.search}%,question.ilike.%${e.search}%`)),e.limit&&(n=n.limit(e.limit)),e.offset&&(n=n.range(e.offset,e.offset+(e.limit||10)-1));const{data:s,error:i}=await n;if(i)throw i;return{success:!0,videos:s}}catch(n){return console.error("Error getting user videos:",n),{success:!1,error:n.message}}}async getVideoById(e){const r=Q.getCurrentUser();if(!r)throw new Error("User not authenticated");try{const{data:n,error:s}=await B.from("videos").select("*").eq("id",e).eq("user_id",r.id).single();if(s)throw s;return{success:!0,video:n}}catch(n){return console.error("Error getting video:",n),{success:!1,error:n.message}}}async updateVideo(e,r){const n=Q.getCurrentUser();if(!n)throw new Error("User not authenticated");try{const{data:s,error:i}=await B.from("videos").update({...r,updated_at:new Date().toISOString()}).eq("id",e).eq("user_id",n.id).select().single();if(i)throw i;return{success:!0,video:s}}catch(s){return console.error("Error updating video:",s),{success:!1,error:s.message}}}async deleteVideo(e){const r=Q.getCurrentUser();if(!r)throw new Error("User not authenticated");try{const{data:n,error:s}=await B.from("videos").select("*").eq("id",e).eq("user_id",r.id).single();if(s)throw s;if(n.video_url){const o=this.extractFileNameFromUrl(n.video_url);if(o){const{error:l}=await B.storage.from(this.storagePolicy.bucketName).remove([o]);l&&console.warn("Error deleting video file:",l)}}if(n.thumbnail_url){const o=this.extractFileNameFromUrl(n.thumbnail_url);if(o){const{error:l}=await B.storage.from(this.storagePolicy.bucketName).remove([o]);l&&console.warn("Error deleting thumbnail file:",l)}}const{error:i}=await B.from("videos").delete().eq("id",e).eq("user_id",r.id);if(i)throw i;return{success:!0,message:"Video deleted successfully"}}catch(n){return console.error("Error deleting video:",n),{success:!1,error:n.message}}}async uploadVideoFile(e,r){const n=Q.getCurrentUser();if(!n)throw new Error("User not authenticated");try{const s=this.validateVideoFile(e);if(!s.valid)throw new Error(s.error);const i=`${n.id}/${r}/${Date.now()}_${e.name}`,{data:o,error:l}=await B.storage.from(this.storagePolicy.bucketName).upload(i,e,{cacheControl:"3600",upsert:!1});if(l)throw l;const{data:u}=B.storage.from(this.storagePolicy.bucketName).getPublicUrl(i);return{success:!0,fileName:i,publicUrl:u.publicUrl}}catch(s){return console.error("Error uploading video file:",s),{success:!1,error:s.message}}}async generateShareLink(e){const r=Q.getCurrentUser();if(!r)throw new Error("User not authenticated");try{const{data:n,error:s}=await B.from("videos").select("*").eq("id",e).eq("user_id",r.id).single();if(s)throw s;const i=this.generateShareToken(e,r.id);return{success:!0,shareUrl:`${window.location.origin}/share/${i}`,video:n}}catch(n){return console.error("Error generating share link:",n),{success:!1,error:n.message}}}async getVideoStats(){const e=Q.getCurrentUser();if(!e)throw new Error("User not authenticated");try{const{data:r,error:n}=await B.from("videos").select("*").eq("user_id",e.id);if(n)throw n;return{success:!0,stats:{totalVideos:r.length,totalDuration:r.reduce((i,o)=>i+(o.duration||0),0),languageBreakdown:this.calculateLanguageBreakdown(r),topicBreakdown:this.calculateTopicBreakdown(r),difficultyBreakdown:this.calculateDifficultyBreakdown(r),createdThisWeek:this.countVideosThisWeek(r),createdThisMonth:this.countVideosThisMonth(r)}}}catch(r){return console.error("Error getting video stats:",r),{success:!1,error:r.message}}}generateVideoTitle(e){return e?`Math: ${e.length>50?e.substring(0,50)+"...":e}`:"Math Problem Solution"}validateVideoFile(e){return e?e.size>this.storagePolicy.maxFileSize?{valid:!1,error:"File too large. Maximum size is 100MB."}:this.storagePolicy.allowedTypes.includes(e.type)?{valid:!0}:{valid:!1,error:"Invalid file type. Only MP4, WebM, and QuickTime files are allowed."}:{valid:!1,error:"No file provided"}}extractFileNameFromUrl(e){if(!e)return null;try{const n=new URL(e).pathname.split("/");return n[n.length-1]}catch(r){return console.error("Error extracting filename from URL:",r),null}}generateShareToken(e,r){const n=Date.now(),s=`${e}:${r}:${n}`;return btoa(s).replace(/[+=]/g,"").substring(0,12)}calculateLanguageBreakdown(e){const r={};return e.forEach(n=>{const s=n.language||"unknown";r[s]=(r[s]||0)+1}),r}calculateTopicBreakdown(e){const r={};return e.forEach(n=>{(n.math_topics||[]).forEach(i=>{r[i]=(r[i]||0)+1})}),r}calculateDifficultyBreakdown(e){const r={};return e.forEach(n=>{const s=n.difficulty_level||"unknown";r[s]=(r[s]||0)+1}),r}countVideosThisWeek(e){const r=new Date;return r.setDate(r.getDate()-7),e.filter(n=>new Date(n.created_at)>=r).length}countVideosThisMonth(e){const r=new Date;return r.setMonth(r.getMonth()-1),e.filter(n=>new Date(n.created_at)>=r).length}}const Jw=new Qw,Yw=()=>{const[t,e]=j.useState([]),[r,n]=j.useState([]),[s,i]=j.useState(null),[o,l]=j.useState(!0),[u,c]=j.useState(""),[d,h]=j.useState(""),[f,v]=j.useState("all"),[y,x]=j.useState("all"),[k,m]=j.useState("newest"),[p,g]=j.useState("grid"),[w,b]=j.useState(null),[E,P]=j.useState(null),[O,J]=j.useState(!1);j.useEffect(()=>{M(),te()},[]),j.useEffect(()=>{K()},[t,d,f,y,k]);const M=async()=>{var S;try{console.log("🔄 开始加载用户视频..."),l(!0),c("");const T=await ss.getUserVideos();console.log("📊 getUserVideos结果:",T),T.success?(console.log("✅ 成功加载视频，数量:",((S=T.data)==null?void 0:S.length)||0),e(T.data||[])):(console.error("❌ 加载视频失败:",T.error),c(T.error||"Failed to load videos"))}catch(T){console.error("❌ loadVideos异常:",T),c("Failed to load videos. Please try again.")}finally{console.log("🏁 loadVideos完成，设置loading为false"),l(!1)}},te=async()=>{try{console.log("📈 开始加载用户统计...");const S=await ss.getUserStats();console.log("📊 getUserStats结果:",S),S.success?i(S.data):console.error("❌ 加载统计失败:",S.error)}catch(S){console.error("❌ loadStats异常:",S)}},K=()=>{let S=[...t];switch(d&&(S=S.filter(T=>T.title.toLowerCase().includes(d.toLowerCase())||T.question.toLowerCase().includes(d.toLowerCase())||T.math_topics&&T.math_topics.some(D=>D.toLowerCase().includes(d.toLowerCase())))),f!=="all"&&(S=S.filter(T=>T.language===f)),y!=="all"&&(S=S.filter(T=>T.difficulty_level===y)),k){case"newest":S.sort((T,D)=>new Date(D.created_at)-new Date(T.created_at));break;case"oldest":S.sort((T,D)=>new Date(T.created_at)-new Date(D.created_at));break;case"duration":S.sort((T,D)=>(D.duration||0)-(T.duration||0));break;case"title":S.sort((T,D)=>T.title.localeCompare(D.title));break}n(S)},Te=async S=>{try{J(!0);const T=await ss.deleteVideo(S);T.success?(e(t.filter(D=>D.id!==S)),P(null),te()):c(T.error||"Failed to delete video")}catch(T){c("Failed to delete video. Please try again."),console.error("Error deleting video:",T)}finally{J(!1)}},ft=async S=>{try{const T=await Jw.generateShareLink(S);T.success?navigator.share?await navigator.share({title:"AI Math Teaching Video",text:"Check out this AI-generated math teaching video!",url:T.shareUrl}):(await navigator.clipboard.writeText(T.shareUrl),alert("Share link copied to clipboard!")):c(T.error||"Failed to generate share link")}catch(T){c("Failed to share video. Please try again."),console.error("Error sharing video:",T)}},Qe=S=>{const T=document.createElement("a");T.href=S.video_url,T.download=`${S.title}.mp4`,document.body.appendChild(T),T.click(),document.body.removeChild(T)},it=S=>{if(!S)return"0:00";const T=Math.floor(S/60),D=S%60;return`${T}:${D.toString().padStart(2,"0")}`},Le=S=>new Date(S).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),A=S=>{switch(S){case"beginner":return"bg-green-100 text-green-800";case"intermediate":return"bg-yellow-100 text-yellow-800";case"advanced":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},z=S=>{switch(S){case"zh":return"🇨🇳";case"en":return"🇺🇸";default:return"🌐"}};return o?a.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading your videos..."})]})}):a.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"My Videos"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your AI-generated math teaching videos"})]}),a.jsxs(V,{onClick:M,variant:"outline",className:"flex items-center gap-2",children:[a.jsx(Af,{className:"h-4 w-4"}),"Refresh"]})]}),u&&a.jsxs(nu,{className:"border-red-500",children:[a.jsx(ay,{className:"h-4 w-4"}),a.jsx(su,{className:"text-red-600",children:u})]}),s&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[a.jsx(ce,{children:a.jsx(de,{className:"p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Total Videos"}),a.jsx("p",{className:"text-2xl font-bold text-blue-600",children:s.totalVideos})]}),a.jsx(Mi,{className:"h-8 w-8 text-blue-600"})]})})}),a.jsx(ce,{children:a.jsx(de,{className:"p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Languages"}),a.jsx("p",{className:"text-2xl font-bold text-green-600",children:Object.keys(s.topicCounts||{}).length})]}),a.jsx(hy,{className:"h-8 w-8 text-green-600"})]})})}),a.jsx(ce,{children:a.jsx(de,{className:"p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"This Week"}),a.jsx("p",{className:"text-2xl font-bold text-purple-600",children:s.videosThisWeek})]}),a.jsx(cy,{className:"h-8 w-8 text-purple-600"})]})})}),a.jsx(ce,{children:a.jsx(de,{className:"p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"This Month"}),a.jsx("p",{className:"text-2xl font-bold text-orange-600",children:s.videosThisMonth})]}),a.jsx(uy,{className:"h-8 w-8 text-orange-600"})]})})})]}),a.jsx(ce,{children:a.jsx(de,{className:"p-4",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[a.jsxs("div",{children:[a.jsx(Gr,{children:"Search"}),a.jsxs("div",{className:"relative",children:[a.jsx(_y,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),a.jsx(sp,{placeholder:"Search videos...",value:d,onChange:S=>h(S.target.value),className:"pl-10"})]})]}),a.jsxs("div",{children:[a.jsx(Gr,{children:"Language"}),a.jsxs("select",{value:f,onChange:S=>v(S.target.value),className:"w-full p-2 border rounded-md",children:[a.jsx("option",{value:"all",children:"All Languages"}),a.jsx("option",{value:"zh",children:"🇨🇳 Chinese"}),a.jsx("option",{value:"en",children:"🇺🇸 English"})]})]}),a.jsxs("div",{children:[a.jsx(Gr,{children:"Difficulty"}),a.jsxs("select",{value:y,onChange:S=>x(S.target.value),className:"w-full p-2 border rounded-md",children:[a.jsx("option",{value:"all",children:"All Levels"}),a.jsx("option",{value:"beginner",children:"Beginner"}),a.jsx("option",{value:"intermediate",children:"Intermediate"}),a.jsx("option",{value:"advanced",children:"Advanced"})]})]}),a.jsxs("div",{children:[a.jsx(Gr,{children:"Sort By"}),a.jsxs("select",{value:k,onChange:S=>m(S.target.value),className:"w-full p-2 border rounded-md",children:[a.jsx("option",{value:"newest",children:"Newest First"}),a.jsx("option",{value:"oldest",children:"Oldest First"}),a.jsx("option",{value:"duration",children:"Duration"}),a.jsx("option",{value:"title",children:"Title"})]})]}),a.jsxs("div",{children:[a.jsx(Gr,{children:"View"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(V,{variant:p==="grid"?"default":"outline",size:"sm",onClick:()=>g("grid"),children:"Grid"}),a.jsx(V,{variant:p==="list"?"default":"outline",size:"sm",onClick:()=>g("list"),children:"List"})]})]})]})})}),r.length===0?a.jsx(ce,{children:a.jsxs(de,{className:"p-12 text-center",children:[a.jsx(Mi,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No videos found"}),a.jsx("p",{className:"text-gray-600 mb-4",children:t.length===0?"You haven't created any videos yet. Start by generating your first AI math teaching video!":"No videos match your current filters. Try adjusting your search criteria."}),t.length===0&&a.jsx(V,{onClick:()=>window.location.href="/",children:"Create Your First Video"})]})}):a.jsx("div",{className:p==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6":"space-y-4",children:r.map(S=>a.jsx(ce,{className:"group hover:shadow-lg transition-shadow",children:a.jsxs(de,{className:"p-4",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-1 line-clamp-2",children:S.title}),a.jsx("p",{className:"text-sm text-gray-600 mb-2 line-clamp-2",children:S.question})]}),a.jsx("div",{className:"flex items-center gap-1 ml-2",children:a.jsx("span",{className:"text-lg",children:z(S.language)})})]}),a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(tr,{className:A(S.difficulty_level),children:S.difficulty_level||"intermediate"}),a.jsx("span",{className:"text-sm text-gray-500",children:it(S.duration)})]}),a.jsx("span",{className:"text-sm text-gray-500",children:Le(S.created_at)})]}),S.math_topics&&S.math_topics.length>0&&a.jsxs("div",{className:"flex flex-wrap gap-1 mb-3",children:[S.math_topics.slice(0,3).map((T,D)=>a.jsx(tr,{variant:"outline",className:"text-xs",children:T},D)),S.math_topics.length>3&&a.jsxs(tr,{variant:"outline",className:"text-xs",children:["+",S.math_topics.length-3]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs(V,{size:"sm",onClick:()=>window.open(S.video_url,"_blank"),className:"flex-1",children:[a.jsx(Zn,{className:"h-4 w-4 mr-2"}),"Play"]}),a.jsx(V,{size:"sm",variant:"outline",onClick:()=>Qe(S),children:a.jsx(Tf,{className:"h-4 w-4"})}),a.jsx(V,{size:"sm",variant:"outline",onClick:()=>ft(S.id),children:a.jsx(If,{className:"h-4 w-4"})}),a.jsx(V,{size:"sm",variant:"outline",onClick:()=>P(S.id),className:"text-red-600 hover:text-red-700",children:a.jsx(Of,{className:"h-4 w-4"})})]})]})},S.id))}),E&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsxs(ce,{className:"w-full max-w-md",children:[a.jsx(Xe,{children:a.jsx(Ze,{className:"text-red-600",children:"Delete Video"})}),a.jsxs(de,{children:[a.jsx("p",{className:"text-gray-600 mb-4",children:"Are you sure you want to delete this video? This action cannot be undone."}),a.jsxs("div",{className:"flex gap-2 justify-end",children:[a.jsx(V,{variant:"outline",onClick:()=>P(null),disabled:O,children:"Cancel"}),a.jsx(V,{variant:"destructive",onClick:()=>Te(E),disabled:O,children:O?"Deleting...":"Delete"})]})]})]})})]})};/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Fi(){return Fi=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Fi.apply(this,arguments)}var br;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(br||(br={}));const Yc="popstate";function Xw(t){t===void 0&&(t={});function e(n,s){let{pathname:i,search:o,hash:l}=n.location;return Zl("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:op(s)}return ex(e,r,null,t)}function ip(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Zw(){return Math.random().toString(36).substr(2,8)}function Xc(t,e){return{usr:t.state,key:t.key,idx:e}}function Zl(t,e,r,n){return r===void 0&&(r=null),Fi({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?lp(e):e,{state:r,key:e&&e.key||n||Zw()})}function op(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function lp(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function ex(t,e,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:i=!1}=n,o=s.history,l=br.Pop,u=null,c=d();c==null&&(c=0,o.replaceState(Fi({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function h(){l=br.Pop;let k=d(),m=k==null?null:k-c;c=k,u&&u({action:l,location:x.location,delta:m})}function f(k,m){l=br.Push;let p=Zl(x.location,k,m);c=d()+1;let g=Xc(p,c),w=x.createHref(p);try{o.pushState(g,"",w)}catch(b){if(b instanceof DOMException&&b.name==="DataCloneError")throw b;s.location.assign(w)}i&&u&&u({action:l,location:x.location,delta:1})}function v(k,m){l=br.Replace;let p=Zl(x.location,k,m);c=d();let g=Xc(p,c),w=x.createHref(p);o.replaceState(g,"",w),i&&u&&u({action:l,location:x.location,delta:0})}function y(k){let m=s.location.origin!=="null"?s.location.origin:s.location.href,p=typeof k=="string"?k:op(k);return p=p.replace(/ $/,"%20"),ip(m,"No window.location.(origin|href) available to create URL for href: "+p),new URL(p,m)}let x={get action(){return l},get location(){return t(s,o)},listen(k){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(Yc,h),u=k,()=>{s.removeEventListener(Yc,h),u=null}},createHref(k){return e(s,k)},createURL:y,encodeLocation(k){let m=y(k);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:f,replace:v,go(k){return o.go(k)}};return x}var Zc;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Zc||(Zc={}));function tx(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}const ap=["post","put","patch","delete"];new Set(ap);const rx=["get",...ap];new Set(rx);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ea(){return ea=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ea.apply(this,arguments)}const nx=j.createContext(null),up=j.createContext(null);function sx(){return j.useContext(up)!=null}function ix(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function ox(t){let{basename:e="/",children:r=null,location:n,navigationType:s=br.Pop,navigator:i,static:o=!1,future:l}=t;sx()&&ip(!1);let u=e.replace(/^\/*/,"/"),c=j.useMemo(()=>({basename:u,navigator:i,static:o,future:ea({v7_relativeSplatPath:!1},l)}),[u,l,i,o]);typeof n=="string"&&(n=lp(n));let{pathname:d="/",search:h="",hash:f="",state:v=null,key:y="default"}=n,x=j.useMemo(()=>{let k=tx(d,u);return k==null?null:{location:{pathname:k,search:h,hash:f,state:v,key:y},navigationType:s}},[u,d,h,f,v,y,s]);return x==null?null:j.createElement(nx.Provider,{value:c},j.createElement(up.Provider,{children:r,value:x}))}new Promise(()=>{});/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const lx="6";try{window.__reactRouterVersion=lx}catch{}const ax="startTransition",ed=Jp[ax];function ux(t){let{basename:e,children:r,future:n,window:s}=t,i=j.useRef();i.current==null&&(i.current=Xw({window:s,v5Compat:!0}));let o=i.current,[l,u]=j.useState({action:o.action,location:o.location}),{v7_startTransition:c}=n||{},d=j.useCallback(h=>{c&&ed?ed(()=>u(h)):u(h)},[u,c]);return j.useLayoutEffect(()=>o.listen(d),[o,d]),j.useEffect(()=>ix(n),[n]),j.createElement(ox,{basename:e,children:r,location:l.location,navigationType:l.action,navigator:o,future:n})}var td;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(td||(td={}));var rd;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(rd||(rd={}));function cx(){const[t,e]=j.useState("home"),[r,n]=j.useState({qwen:!1,configured:!1}),[s,i]=j.useState(null),[o,l]=j.useState(!1),[u,c]=j.useState(!1);j.useEffect(()=>{const v=async()=>{try{if(await Q.initialize()){const m=Q.getCurrentUser();i(m),console.log("App: Auth initialized, current user:",(m==null?void 0:m.email)||"none")}}catch(k){console.error("Auth initialization error:",k)}finally{c(!0)}},y=k=>{console.log("App: Auth state changed, user:",(k==null?void 0:k.email)||"none"),i(k),k&&(l(!1),e(m=>m==="home"||!m?"home":m))};return Q.onAuthChange=y,v(),typeof window<"u"&&(window.authService=Q,window.supabase=B,window.testAuth={checkSession:()=>Q.checkSession(),refreshSession:()=>Q.refreshSession(),getUser:()=>Q.getCurrentUser(),signInWithGoogle:()=>Q.signInWithGoogle(),getSupabaseSession:()=>B.auth.getSession()},console.log("🔧 Debug functions available:"),console.log("  - window.testAuth.checkSession()"),console.log("  - window.testAuth.signInWithGoogle()"),console.log("  - window.authService (direct access)"),console.log("  - window.supabase (direct access)")),(()=>{n({qwen:!0,configured:!0})})(),console.log("API配置状态:",{qwen:!0,debug:"true"}),()=>{Q.onAuthChange=null}},[]),j.useEffect(()=>{console.log("currentView变化:",t)},[t]);const d=v=>{i(v),l(!1),e("home")},h=async()=>{try{await Q.signOut(),i(null),e("home")}catch(v){console.error("Sign out error:",v)}},f=()=>{if(!u)return a.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"初始化中..."})]})});switch(t){case"api-test":return a.jsx(cv,{});case"video-demo":return a.jsx(Gw,{user:s,onLoginRequired:()=>l(!0)});case"my-videos":return s?a.jsx(Yw,{}):null;default:return a.jsxs("div",{className:"max-w-6xl mx-auto p-6 space-y-8",children:[a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"flex items-center justify-center mb-4",children:[a.jsx(Bl,{className:"h-12 w-12 text-blue-600 mr-3"}),a.jsx("h1",{className:"text-4xl font-bold text-gray-900",children:"MathTutor AI"}),a.jsx(tr,{variant:"secondary",className:"ml-3",children:s?`Welcome, ${s.email}`:"Testing Environment"})]}),a.jsx("p",{className:"text-xl text-gray-600",children:"K12数学AI视频生成测试平台"})]}),a.jsxs(ce,{children:[a.jsx(Xe,{children:a.jsxs(Ze,{className:"flex items-center",children:[a.jsx(ky,{className:"h-5 w-5 mr-2"}),"API配置状态"]})}),a.jsx(de,{children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:"通义千问 API"}),a.jsx("div",{className:"text-sm text-gray-600",children:r.qwen?`已配置 (${"sk-1899f80e08854bdcbe0b3bc64b661ef4".substring(0,8)}...)`:"未配置"})]}),a.jsx(tr,{variant:r.qwen?"default":"destructive",children:r.qwen?"✓ 就绪":"✗ 缺失"})]}),a.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:"系统状态"}),a.jsx("div",{className:"text-sm text-gray-600",children:r.configured?"可以开始测试":"需要配置API"})]}),a.jsx(tr,{variant:r.configured?"default":"outline",children:r.configured?"✓ 正常":"⚠ 等待"})]})]})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[a.jsxs(ce,{className:"hover:shadow-lg transition-shadow cursor-pointer",children:[a.jsx(Xe,{children:a.jsxs(Ze,{className:"flex items-center",children:[a.jsx(Sy,{className:"h-6 w-6 text-blue-600 mr-2"}),"API连接测试"]})}),a.jsxs(de,{children:[a.jsx("p",{className:"text-gray-600 mb-4",children:"测试通义千问API连接状态，验证基础功能和数学解题能力"}),a.jsxs("div",{className:"space-y-2 text-sm text-gray-500 mb-4",children:[a.jsx("div",{children:"• 基础连接测试"}),a.jsx("div",{children:"• 数学解题测试"}),a.jsx("div",{children:"• JSON格式验证"}),a.jsx("div",{children:"• 成本预估"})]}),a.jsx(V,{onClick:()=>e("api-test"),className:"w-full",disabled:!r.qwen,children:"开始API测试"})]})]}),a.jsxs(ce,{className:"hover:shadow-lg transition-shadow cursor-pointer",children:[a.jsx(Xe,{children:a.jsxs(Ze,{className:"flex items-center",children:[a.jsx(Zn,{className:"h-6 w-6 text-green-600 mr-2"}),"视频生成演示"]})}),a.jsxs(de,{children:[a.jsx("p",{className:"text-gray-600 mb-4",children:"完整的AI数学视频生成流程演示，包含多语言支持"}),a.jsxs("div",{className:"space-y-2 text-sm text-gray-500 mb-4",children:[a.jsx("div",{children:"• 多语言数学问题输入"}),a.jsx("div",{children:"• AI解题过程模拟"}),a.jsx("div",{children:"• 视频生成流程"}),a.jsx("div",{children:"• 成本分析"})]}),a.jsx(V,{onClick:()=>e("video-demo"),className:"w-full",disabled:!r.qwen,children:"开始视频测试"})]})]}),s&&a.jsxs(ce,{className:"hover:shadow-lg transition-shadow cursor-pointer",children:[a.jsx(Xe,{children:a.jsxs(Ze,{className:"flex items-center",children:[a.jsx(Mi,{className:"h-6 w-6 text-purple-600 mr-2"}),"我的视频"]})}),a.jsxs(de,{children:[a.jsx("p",{className:"text-gray-600 mb-4",children:"查看和管理您创建的AI数学教学视频"}),a.jsxs("div",{className:"space-y-2 text-sm text-gray-500 mb-4",children:[a.jsx("div",{children:"• 视频播放和下载"}),a.jsx("div",{children:"• 分享和管理"}),a.jsx("div",{children:"• 学习统计"}),a.jsx("div",{children:"• 收藏夹功能"})]}),a.jsx(V,{onClick:()=>e("my-videos"),className:"w-full",children:"查看我的视频"})]})]})]}),a.jsxs(ce,{children:[a.jsx(Xe,{children:a.jsx(Ze,{children:"测试环境信息"})}),a.jsx(de,{children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[a.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg",children:[a.jsx("div",{className:"font-medium text-blue-800",children:"推荐模型"}),a.jsx("div",{className:"text-blue-600",children:"qwen-plus"})]}),a.jsxs("div",{className:"bg-green-50 p-3 rounded-lg",children:[a.jsx("div",{className:"font-medium text-green-800",children:"预估成本"}),a.jsx("div",{className:"text-green-600",children:"¥0.004/1K tokens"})]}),a.jsxs("div",{className:"bg-purple-50 p-3 rounded-lg",children:[a.jsx("div",{className:"font-medium text-purple-800",children:"支持语言"}),a.jsx("div",{className:"text-purple-600",children:"中文、英文等"})]})]})})]}),a.jsxs(ce,{children:[a.jsx(Xe,{children:a.jsx(Ze,{children:"使用说明"})}),a.jsx(de,{children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium mb-2",children:"1. API连接测试"}),a.jsx("p",{className:"text-sm text-gray-600",children:'首先点击"开始API测试"验证你的通义千问API是否正常工作，包括基础连接和数学解题功能。'})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium mb-2",children:"2. 视频生成演示"}),a.jsx("p",{className:"text-sm text-gray-600",children:'API测试通过后，点击"开始视频测试"体验完整的AI数学视频生成流程。'})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium mb-2",children:"3. 功能特色"}),a.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[a.jsx("li",{children:"• 支持文本、图片、语音多种输入方式"}),a.jsx("li",{children:"• 实时生成进度显示"}),a.jsx("li",{children:"• 成本透明化计算"}),a.jsx("li",{children:"• 多语言界面支持"})]})]})]})})]})]})}};return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:[t!=="home"&&a.jsx("nav",{className:"bg-white shadow-sm border-b",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"flex items-center justify-between h-16",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Bl,{className:"h-6 w-6 text-blue-600"}),a.jsx("span",{className:"text-xl font-bold text-gray-900",children:"MathTutor AI"}),a.jsx(tr,{variant:"outline",children:"Testing"})]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[s&&a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(by,{className:"h-5 w-5 text-gray-600"}),a.jsx("span",{className:"text-sm text-gray-600",children:s.email})]}),a.jsx(V,{variant:"outline",onClick:()=>e("home"),children:"返回主页"}),a.jsx(V,{variant:"outline",onClick:()=>e("api-test"),disabled:t==="api-test",children:"API测试"}),a.jsx(V,{variant:"outline",onClick:()=>e("video-demo"),disabled:t==="video-demo",children:"视频演示"}),s&&a.jsx(V,{variant:"outline",onClick:()=>e("my-videos"),disabled:t==="my-videos",children:"我的视频"}),s?a.jsxs(V,{variant:"outline",onClick:h,className:"text-red-600 hover:text-red-700",children:[a.jsx(gy,{className:"h-4 w-4 mr-2"}),"退出"]}):a.jsxs(V,{variant:"outline",onClick:()=>l(!0),children:[a.jsx(Wl,{className:"h-4 w-4 mr-2"}),"登录"]})]})]})})}),a.jsx("main",{className:"py-8",children:f()}),t==="home"&&a.jsx("div",{className:"fixed bottom-6 right-6 flex flex-col gap-2",children:s?a.jsxs(V,{onClick:()=>e("my-videos"),className:"bg-purple-600 hover:bg-purple-700 shadow-lg",children:[a.jsx(Mi,{className:"h-4 w-4 mr-2"}),"我的视频"]}):a.jsxs(V,{onClick:()=>l(!0),className:"bg-blue-600 hover:bg-blue-700 shadow-lg",children:[a.jsx(Wl,{className:"h-4 w-4 mr-2"}),"登录/注册"]})}),a.jsx("footer",{className:"bg-white border-t mt-16",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:a.jsxs("div",{className:"text-center text-gray-600",children:[a.jsx("p",{children:"MathTutor AI 测试环境 - K12数学AI视频生成平台"}),a.jsxs("p",{className:"text-sm mt-2",children:["API状态: ",r.configured?"✅ 已配置":"❌ 未配置"]}),s&&a.jsxs("p",{className:"text-sm mt-1",children:["用户: ",s.email]})]})})}),o&&a.jsx(Kw,{onAuthSuccess:d,onClose:()=>l(!1)})]})}Ko.createRoot(document.getElementById("root")).render(a.jsx(Or.StrictMode,{children:a.jsx(ux,{children:a.jsx(cx,{})})}));
